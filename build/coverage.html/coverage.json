{"/home/travis/build/npmtest/node-npmtest-socketcluster/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":46}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_socketcluster */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireExampleJsFromReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-socketcluster/lib.npmtest_socketcluster.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/lib.npmtest_socketcluster.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":58}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":64}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_socketcluster */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_socketcluster = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_socketcluster = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-socketcluster/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":315,"loc":{"start":{"line":315,"column":32},"end":{"line":315,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":326,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":325,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":296,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":303,"column":8},"end":{"line":303,"column":82},"skip":true},"70":{"start":{"line":306,"column":8},"end":{"line":308,"column":9},"skip":true},"71":{"start":{"line":307,"column":12},"end":{"line":307,"column":82},"skip":true},"72":{"start":{"line":310,"column":8},"end":{"line":312,"column":9},"skip":true},"73":{"start":{"line":311,"column":12},"end":{"line":311,"column":18},"skip":true},"74":{"start":{"line":313,"column":8},"end":{"line":313,"column":54},"skip":true},"75":{"start":{"line":314,"column":8},"end":{"line":314,"column":69},"skip":true},"76":{"start":{"line":315,"column":8},"end":{"line":323,"column":36},"skip":true},"77":{"start":{"line":316,"column":12},"end":{"line":316,"column":61},"skip":true},"78":{"start":{"line":317,"column":12},"end":{"line":320,"column":13},"skip":true},"79":{"start":{"line":318,"column":16},"end":{"line":318,"column":75},"skip":true},"80":{"start":{"line":319,"column":16},"end":{"line":319,"column":23},"skip":true},"81":{"start":{"line":321,"column":12},"end":{"line":321,"column":38},"skip":true},"82":{"start":{"line":322,"column":12},"end":{"line":322,"column":27},"skip":true},"83":{"start":{"line":324,"column":8},"end":{"line":324,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":57}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":324,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":71},"skip":true},{"start":{"line":298,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":43},"end":{"line":303,"column":75},"skip":true},{"start":{"line":303,"column":79},"end":{"line":303,"column":81},"skip":true}]},"25":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true},{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true}]},"26":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true},{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true}]},"27":{"line":313,"type":"binary-expr","locations":[{"start":{"line":313,"column":27},"end":{"line":313,"column":43},"skip":true},{"start":{"line":313,"column":47},"end":{"line":313,"column":53},"skip":true}]},"28":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true},{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-socketcluster && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_socketcluster */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_socketcluster","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_socketcluster.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        // bug-workaround - long $npm_package_buildCustomOrg","        /* jslint-ignore-begin */","        local.assetsDict['/assets.npmtest_socketcluster.rollup.js'] =","            local.assetsDict['/assets.npmtest_socketcluster.rollup.js'] ||","            local.fs.readFileSync(","                local.npmtest_socketcluster.__dirname + '/lib.npmtest_socketcluster.js',","                'utf8'","            ).replace((/^#!/), '//');","        /* jslint-ignore-end */","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"296":1,"303":1,"306":1,"307":1,"310":1,"311":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"319":1,"321":1,"322":1,"324":1}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":1,"160":0,"161":1,"162":0,"163":0,"164":0,"165":0,"166":1,"167":0,"168":0,"169":0,"170":1,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":1,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":1,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":1,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":1,"214":0,"215":1,"216":0,"217":1,"218":0,"219":0,"220":0,"221":1,"222":0,"223":0,"224":0,"225":1,"226":0,"227":0,"228":1,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":1,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":1,"253":0,"254":0,"255":0,"256":1,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":1,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":1,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":1,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":1,"358":0,"359":1,"360":0,"361":1,"362":0,"363":0,"364":1,"365":0,"366":0,"367":1,"368":0,"369":0,"370":0,"371":1,"372":0,"373":0,"374":0,"375":0,"376":0,"377":1,"378":0,"379":0,"380":0,"381":0,"382":0,"383":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0,0],"65":[0,0],"66":[0,0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0},"fnMap":{"1":{"name":"(anonymous_1)","line":23,"loc":{"start":{"line":23,"column":20},"end":{"line":23,"column":39}}},"2":{"name":"(anonymous_2)","line":44,"loc":{"start":{"line":44,"column":32},"end":{"line":44,"column":47}}},"3":{"name":"(anonymous_3)","line":51,"loc":{"start":{"line":51,"column":24},"end":{"line":51,"column":36}}},"4":{"name":"(anonymous_4)","line":58,"loc":{"start":{"line":58,"column":32},"end":{"line":58,"column":51}}},"5":{"name":"(anonymous_5)","line":136,"loc":{"start":{"line":136,"column":23},"end":{"line":136,"column":47}}},"6":{"name":"(anonymous_6)","line":229,"loc":{"start":{"line":229,"column":40},"end":{"line":229,"column":56}}},"7":{"name":"(anonymous_7)","line":296,"loc":{"start":{"line":296,"column":28},"end":{"line":296,"column":43}}},"8":{"name":"(anonymous_8)","line":313,"loc":{"start":{"line":313,"column":46},"end":{"line":313,"column":71}}},"9":{"name":"(anonymous_9)","line":327,"loc":{"start":{"line":327,"column":47},"end":{"line":327,"column":67}}},"10":{"name":"(anonymous_10)","line":331,"loc":{"start":{"line":331,"column":48},"end":{"line":331,"column":60}}},"11":{"name":"(anonymous_11)","line":339,"loc":{"start":{"line":339,"column":49},"end":{"line":339,"column":64}}},"12":{"name":"(anonymous_12)","line":346,"loc":{"start":{"line":346,"column":37},"end":{"line":346,"column":67}}},"13":{"name":"(anonymous_13)","line":369,"loc":{"start":{"line":369,"column":39},"end":{"line":369,"column":62}}},"14":{"name":"(anonymous_14)","line":388,"loc":{"start":{"line":388,"column":41},"end":{"line":388,"column":68}}},"15":{"name":"(anonymous_15)","line":405,"loc":{"start":{"line":405,"column":38},"end":{"line":405,"column":62}}},"16":{"name":"(anonymous_16)","line":425,"loc":{"start":{"line":425,"column":53},"end":{"line":425,"column":75}}},"17":{"name":"(anonymous_17)","line":432,"loc":{"start":{"line":432,"column":46},"end":{"line":432,"column":74}}},"18":{"name":"(anonymous_18)","line":439,"loc":{"start":{"line":439,"column":52},"end":{"line":439,"column":74}}},"19":{"name":"(anonymous_19)","line":449,"loc":{"start":{"line":449,"column":46},"end":{"line":449,"column":74}}},"20":{"name":"(anonymous_20)","line":459,"loc":{"start":{"line":459,"column":48},"end":{"line":459,"column":78}}},"21":{"name":"(anonymous_21)","line":467,"loc":{"start":{"line":467,"column":53},"end":{"line":467,"column":65}}},"22":{"name":"(anonymous_22)","line":472,"loc":{"start":{"line":472,"column":28},"end":{"line":472,"column":40}}},"23":{"name":"(anonymous_23)","line":494,"loc":{"start":{"line":494,"column":45},"end":{"line":494,"column":67}}},"24":{"name":"(anonymous_24)","line":505,"loc":{"start":{"line":505,"column":46},"end":{"line":505,"column":68}}},"25":{"name":"(anonymous_25)","line":512,"loc":{"start":{"line":512,"column":51},"end":{"line":512,"column":72}}},"26":{"name":"(anonymous_26)","line":525,"loc":{"start":{"line":525,"column":47},"end":{"line":525,"column":59}}},"27":{"name":"(anonymous_27)","line":533,"loc":{"start":{"line":533,"column":38},"end":{"line":533,"column":53}}},"28":{"name":"workerHandler","line":586,"loc":{"start":{"line":586,"column":36},"end":{"line":586,"column":62}}},"29":{"name":"(anonymous_29)","line":611,"loc":{"start":{"line":611,"column":48},"end":{"line":611,"column":60}}},"30":{"name":"(anonymous_30)","line":626,"loc":{"start":{"line":626,"column":33},"end":{"line":626,"column":45}}},"31":{"name":"(anonymous_31)","line":641,"loc":{"start":{"line":641,"column":32},"end":{"line":641,"column":44}}},"32":{"name":"(anonymous_32)","line":646,"loc":{"start":{"line":646,"column":27},"end":{"line":646,"column":39}}},"33":{"name":"(anonymous_33)","line":671,"loc":{"start":{"line":671,"column":41},"end":{"line":671,"column":56}}},"34":{"name":"(anonymous_34)","line":681,"loc":{"start":{"line":681,"column":49},"end":{"line":681,"column":75}}},"35":{"name":"(anonymous_35)","line":689,"loc":{"start":{"line":689,"column":39},"end":{"line":689,"column":65}}},"36":{"name":"(anonymous_36)","line":697,"loc":{"start":{"line":697,"column":39},"end":{"line":697,"column":65}}},"37":{"name":"(anonymous_37)","line":704,"loc":{"start":{"line":704,"column":38},"end":{"line":704,"column":57}}},"38":{"name":"(anonymous_38)","line":713,"loc":{"start":{"line":713,"column":38},"end":{"line":713,"column":50}}},"39":{"name":"(anonymous_39)","line":719,"loc":{"start":{"line":719,"column":30},"end":{"line":719,"column":55}}},"40":{"name":"(anonymous_40)","line":726,"loc":{"start":{"line":726,"column":39},"end":{"line":726,"column":57}}},"41":{"name":"(anonymous_41)","line":736,"loc":{"start":{"line":736,"column":36},"end":{"line":736,"column":62}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":27}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":31}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":50}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":34}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":23}},"7":{"start":{"line":7,"column":0},"end":{"line":7,"column":29}},"8":{"start":{"line":8,"column":0},"end":{"line":8,"column":38}},"9":{"start":{"line":9,"column":0},"end":{"line":9,"column":27}},"10":{"start":{"line":10,"column":0},"end":{"line":10,"column":36}},"11":{"start":{"line":11,"column":0},"end":{"line":11,"column":54}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":33}},"13":{"start":{"line":14,"column":0},"end":{"line":14,"column":36}},"14":{"start":{"line":15,"column":0},"end":{"line":15,"column":55}},"15":{"start":{"line":16,"column":0},"end":{"line":16,"column":53}},"16":{"start":{"line":17,"column":0},"end":{"line":17,"column":39}},"17":{"start":{"line":18,"column":0},"end":{"line":18,"column":49}},"18":{"start":{"line":19,"column":0},"end":{"line":19,"column":41}},"19":{"start":{"line":21,"column":0},"end":{"line":21,"column":34}},"20":{"start":{"line":23,"column":0},"end":{"line":54,"column":2}},"21":{"start":{"line":24,"column":2},"end":{"line":24,"column":18}},"22":{"start":{"line":25,"column":2},"end":{"line":29,"column":3}},"23":{"start":{"line":26,"column":4},"end":{"line":26,"column":143}},"24":{"start":{"line":27,"column":4},"end":{"line":27,"column":63}},"25":{"start":{"line":28,"column":4},"end":{"line":28,"column":35}},"26":{"start":{"line":30,"column":2},"end":{"line":30,"column":32}},"27":{"start":{"line":32,"column":2},"end":{"line":32,"column":27}},"28":{"start":{"line":33,"column":2},"end":{"line":33,"column":33}},"29":{"start":{"line":34,"column":2},"end":{"line":34,"column":27}},"30":{"start":{"line":35,"column":2},"end":{"line":35,"column":29}},"31":{"start":{"line":36,"column":2},"end":{"line":36,"column":42}},"32":{"start":{"line":37,"column":2},"end":{"line":37,"column":40}},"33":{"start":{"line":39,"column":2},"end":{"line":41,"column":4}},"34":{"start":{"line":43,"column":2},"end":{"line":43,"column":38}},"35":{"start":{"line":44,"column":2},"end":{"line":48,"column":5}},"36":{"start":{"line":45,"column":4},"end":{"line":47,"column":7}},"37":{"start":{"line":49,"column":2},"end":{"line":49,"column":30}},"38":{"start":{"line":51,"column":2},"end":{"line":53,"column":5}},"39":{"start":{"line":52,"column":4},"end":{"line":52,"column":24}},"40":{"start":{"line":56,"column":0},"end":{"line":56,"column":64}},"41":{"start":{"line":58,"column":0},"end":{"line":325,"column":2}},"42":{"start":{"line":59,"column":2},"end":{"line":59,"column":18}},"43":{"start":{"line":61,"column":2},"end":{"line":61,"column":29}},"44":{"start":{"line":62,"column":2},"end":{"line":62,"column":84}},"45":{"start":{"line":64,"column":2},"end":{"line":114,"column":4}},"46":{"start":{"line":116,"column":2},"end":{"line":116,"column":23}},"47":{"start":{"line":117,"column":2},"end":{"line":117,"column":29}},"48":{"start":{"line":119,"column":2},"end":{"line":123,"column":4}},"49":{"start":{"line":125,"column":2},"end":{"line":129,"column":3}},"50":{"start":{"line":126,"column":4},"end":{"line":128,"column":5}},"51":{"start":{"line":127,"column":6},"end":{"line":127,"column":35}},"52":{"start":{"line":132,"column":2},"end":{"line":132,"column":61}},"53":{"start":{"line":134,"column":2},"end":{"line":134,"column":39}},"54":{"start":{"line":136,"column":2},"end":{"line":141,"column":4}},"55":{"start":{"line":137,"column":4},"end":{"line":140,"column":5}},"56":{"start":{"line":138,"column":6},"end":{"line":139,"column":63}},"57":{"start":{"line":143,"column":2},"end":{"line":143,"column":31}},"58":{"start":{"line":144,"column":2},"end":{"line":144,"column":33}},"59":{"start":{"line":145,"column":2},"end":{"line":145,"column":32}},"60":{"start":{"line":146,"column":2},"end":{"line":146,"column":41}},"61":{"start":{"line":147,"column":2},"end":{"line":147,"column":39}},"62":{"start":{"line":149,"column":2},"end":{"line":151,"column":3}},"63":{"start":{"line":150,"column":4},"end":{"line":150,"column":37}},"64":{"start":{"line":153,"column":2},"end":{"line":157,"column":3}},"65":{"start":{"line":154,"column":4},"end":{"line":156,"column":56}},"66":{"start":{"line":159,"column":2},"end":{"line":163,"column":4}},"67":{"start":{"line":165,"column":2},"end":{"line":169,"column":3}},"68":{"start":{"line":166,"column":6},"end":{"line":166,"column":84}},"69":{"start":{"line":168,"column":6},"end":{"line":168,"column":47}},"70":{"start":{"line":171,"column":2},"end":{"line":175,"column":3}},"71":{"start":{"line":172,"column":4},"end":{"line":172,"column":67}},"72":{"start":{"line":174,"column":4},"end":{"line":174,"column":53}},"73":{"start":{"line":177,"column":2},"end":{"line":177,"column":44}},"74":{"start":{"line":178,"column":2},"end":{"line":178,"column":52}},"75":{"start":{"line":179,"column":2},"end":{"line":179,"column":56}},"76":{"start":{"line":181,"column":2},"end":{"line":181,"column":56}},"77":{"start":{"line":183,"column":2},"end":{"line":211,"column":3}},"78":{"start":{"line":184,"column":4},"end":{"line":188,"column":5}},"79":{"start":{"line":185,"column":6},"end":{"line":185,"column":58}},"80":{"start":{"line":187,"column":6},"end":{"line":187,"column":96}},"81":{"start":{"line":190,"column":4},"end":{"line":190,"column":35}},"82":{"start":{"line":191,"column":4},"end":{"line":196,"column":5}},"83":{"start":{"line":192,"column":6},"end":{"line":192,"column":67}},"84":{"start":{"line":194,"column":6},"end":{"line":194,"column":56}},"85":{"start":{"line":195,"column":6},"end":{"line":195,"column":72}},"86":{"start":{"line":197,"column":4},"end":{"line":203,"column":5}},"87":{"start":{"line":198,"column":6},"end":{"line":202,"column":7}},"88":{"start":{"line":199,"column":8},"end":{"line":199,"column":33}},"89":{"start":{"line":201,"column":8},"end":{"line":201,"column":123}},"90":{"start":{"line":204,"column":4},"end":{"line":204,"column":29}},"91":{"start":{"line":205,"column":4},"end":{"line":209,"column":5}},"92":{"start":{"line":206,"column":6},"end":{"line":208,"column":22}},"93":{"start":{"line":207,"column":8},"end":{"line":207,"column":46}},"94":{"start":{"line":210,"column":4},"end":{"line":210,"column":36}},"95":{"start":{"line":213,"column":2},"end":{"line":217,"column":3}},"96":{"start":{"line":214,"column":4},"end":{"line":214,"column":86}},"97":{"start":{"line":216,"column":4},"end":{"line":216,"column":47}},"98":{"start":{"line":219,"column":2},"end":{"line":261,"column":3}},"99":{"start":{"line":220,"column":4},"end":{"line":220,"column":49}},"100":{"start":{"line":221,"column":4},"end":{"line":223,"column":5}},"101":{"start":{"line":222,"column":6},"end":{"line":222,"column":47}},"102":{"start":{"line":224,"column":4},"end":{"line":226,"column":5}},"103":{"start":{"line":225,"column":6},"end":{"line":225,"column":49}},"104":{"start":{"line":227,"column":4},"end":{"line":239,"column":5}},"105":{"start":{"line":228,"column":6},"end":{"line":238,"column":7}},"106":{"start":{"line":229,"column":8},"end":{"line":235,"column":11}},"107":{"start":{"line":230,"column":10},"end":{"line":234,"column":11}},"108":{"start":{"line":231,"column":12},"end":{"line":231,"column":35}},"109":{"start":{"line":233,"column":12},"end":{"line":233,"column":24}},"110":{"start":{"line":236,"column":13},"end":{"line":238,"column":7}},"111":{"start":{"line":237,"column":8},"end":{"line":237,"column":47}},"112":{"start":{"line":240,"column":4},"end":{"line":242,"column":5}},"113":{"start":{"line":241,"column":6},"end":{"line":241,"column":55}},"114":{"start":{"line":243,"column":4},"end":{"line":260,"column":5}},"115":{"start":{"line":244,"column":6},"end":{"line":259,"column":7}},"116":{"start":{"line":245,"column":8},"end":{"line":245,"column":58}},"117":{"start":{"line":246,"column":8},"end":{"line":250,"column":9}},"118":{"start":{"line":247,"column":10},"end":{"line":248,"column":81}},"119":{"start":{"line":249,"column":10},"end":{"line":249,"column":49}},"120":{"start":{"line":251,"column":13},"end":{"line":259,"column":7}},"121":{"start":{"line":252,"column":8},"end":{"line":253,"column":79}},"122":{"start":{"line":254,"column":8},"end":{"line":254,"column":47}},"123":{"start":{"line":256,"column":8},"end":{"line":257,"column":75}},"124":{"start":{"line":258,"column":8},"end":{"line":258,"column":47}},"125":{"start":{"line":263,"column":2},"end":{"line":265,"column":3}},"126":{"start":{"line":264,"column":4},"end":{"line":264,"column":73}},"127":{"start":{"line":266,"column":2},"end":{"line":268,"column":3}},"128":{"start":{"line":267,"column":4},"end":{"line":267,"column":71}},"129":{"start":{"line":270,"column":2},"end":{"line":272,"column":3}},"130":{"start":{"line":271,"column":4},"end":{"line":271,"column":29}},"131":{"start":{"line":273,"column":2},"end":{"line":275,"column":3}},"132":{"start":{"line":274,"column":4},"end":{"line":274,"column":73}},"133":{"start":{"line":277,"column":2},"end":{"line":279,"column":3}},"134":{"start":{"line":278,"column":4},"end":{"line":278,"column":29}},"135":{"start":{"line":280,"column":2},"end":{"line":282,"column":3}},"136":{"start":{"line":281,"column":4},"end":{"line":281,"column":73}},"137":{"start":{"line":284,"column":2},"end":{"line":284,"column":34}},"138":{"start":{"line":285,"column":2},"end":{"line":285,"column":36}},"139":{"start":{"line":286,"column":2},"end":{"line":286,"column":32}},"140":{"start":{"line":288,"column":2},"end":{"line":288,"column":34}},"141":{"start":{"line":290,"column":2},"end":{"line":290,"column":58}},"142":{"start":{"line":292,"column":2},"end":{"line":294,"column":3}},"143":{"start":{"line":293,"column":4},"end":{"line":293,"column":89}},"144":{"start":{"line":296,"column":2},"end":{"line":298,"column":5}},"145":{"start":{"line":297,"column":4},"end":{"line":297,"column":47}},"146":{"start":{"line":303,"column":2},"end":{"line":306,"column":3}},"147":{"start":{"line":304,"column":4},"end":{"line":304,"column":27}},"148":{"start":{"line":305,"column":4},"end":{"line":305,"column":38}},"149":{"start":{"line":308,"column":2},"end":{"line":324,"column":3}},"150":{"start":{"line":309,"column":4},"end":{"line":321,"column":5}},"151":{"start":{"line":310,"column":6},"end":{"line":310,"column":73}},"152":{"start":{"line":311,"column":6},"end":{"line":311,"column":20}},"153":{"start":{"line":313,"column":6},"end":{"line":320,"column":9}},"154":{"start":{"line":314,"column":8},"end":{"line":319,"column":9}},"155":{"start":{"line":315,"column":10},"end":{"line":315,"column":118}},"156":{"start":{"line":317,"column":10},"end":{"line":317,"column":54}},"157":{"start":{"line":318,"column":10},"end":{"line":318,"column":24}},"158":{"start":{"line":323,"column":4},"end":{"line":323,"column":18}},"159":{"start":{"line":327,"column":0},"end":{"line":329,"column":2}},"160":{"start":{"line":328,"column":2},"end":{"line":328,"column":24}},"161":{"start":{"line":331,"column":0},"end":{"line":337,"column":2}},"162":{"start":{"line":332,"column":2},"end":{"line":332,"column":23}},"163":{"start":{"line":333,"column":2},"end":{"line":335,"column":3}},"164":{"start":{"line":334,"column":4},"end":{"line":334,"column":73}},"165":{"start":{"line":336,"column":2},"end":{"line":336,"column":21}},"166":{"start":{"line":339,"column":0},"end":{"line":344,"column":2}},"167":{"start":{"line":340,"column":2},"end":{"line":342,"column":3}},"168":{"start":{"line":341,"column":4},"end":{"line":341,"column":13}},"169":{"start":{"line":343,"column":2},"end":{"line":343,"column":52}},"170":{"start":{"line":346,"column":0},"end":{"line":367,"column":2}},"171":{"start":{"line":347,"column":2},"end":{"line":349,"column":3}},"172":{"start":{"line":348,"column":4},"end":{"line":348,"column":22}},"173":{"start":{"line":350,"column":2},"end":{"line":352,"column":3}},"174":{"start":{"line":351,"column":4},"end":{"line":351,"column":20}},"175":{"start":{"line":353,"column":2},"end":{"line":355,"column":3}},"176":{"start":{"line":354,"column":4},"end":{"line":354,"column":34}},"177":{"start":{"line":356,"column":2},"end":{"line":356,"column":47}},"178":{"start":{"line":358,"column":2},"end":{"line":358,"column":17}},"179":{"start":{"line":359,"column":2},"end":{"line":365,"column":3}},"180":{"start":{"line":360,"column":4},"end":{"line":361,"column":39}},"181":{"start":{"line":363,"column":4},"end":{"line":364,"column":39}},"182":{"start":{"line":366,"column":2},"end":{"line":366,"column":29}},"183":{"start":{"line":369,"column":0},"end":{"line":386,"column":2}},"184":{"start":{"line":370,"column":2},"end":{"line":375,"column":3}},"185":{"start":{"line":372,"column":4},"end":{"line":372,"column":32}},"186":{"start":{"line":373,"column":9},"end":{"line":375,"column":3}},"187":{"start":{"line":374,"column":4},"end":{"line":374,"column":28}},"188":{"start":{"line":376,"column":2},"end":{"line":376,"column":52}},"189":{"start":{"line":377,"column":2},"end":{"line":379,"column":3}},"190":{"start":{"line":378,"column":4},"end":{"line":378,"column":75}},"191":{"start":{"line":381,"column":2},"end":{"line":381,"column":22}},"192":{"start":{"line":382,"column":2},"end":{"line":382,"column":24}},"193":{"start":{"line":383,"column":2},"end":{"line":383,"column":34}},"194":{"start":{"line":385,"column":2},"end":{"line":385,"column":32}},"195":{"start":{"line":388,"column":0},"end":{"line":403,"column":2}},"196":{"start":{"line":389,"column":2},"end":{"line":394,"column":3}},"197":{"start":{"line":391,"column":4},"end":{"line":391,"column":40}},"198":{"start":{"line":392,"column":9},"end":{"line":394,"column":3}},"199":{"start":{"line":393,"column":4},"end":{"line":393,"column":36}},"200":{"start":{"line":395,"column":2},"end":{"line":395,"column":26}},"201":{"start":{"line":396,"column":2},"end":{"line":396,"column":28}},"202":{"start":{"line":398,"column":2},"end":{"line":398,"column":41}},"203":{"start":{"line":400,"column":2},"end":{"line":402,"column":3}},"204":{"start":{"line":401,"column":4},"end":{"line":401,"column":40}},"205":{"start":{"line":405,"column":0},"end":{"line":423,"column":2}},"206":{"start":{"line":406,"column":2},"end":{"line":422,"column":3}},"207":{"start":{"line":407,"column":4},"end":{"line":411,"column":5}},"208":{"start":{"line":408,"column":6},"end":{"line":410,"column":8}},"209":{"start":{"line":412,"column":4},"end":{"line":416,"column":6}},"210":{"start":{"line":417,"column":4},"end":{"line":417,"column":44}},"211":{"start":{"line":419,"column":4},"end":{"line":421,"column":5}},"212":{"start":{"line":420,"column":6},"end":{"line":420,"column":54}},"213":{"start":{"line":425,"column":0},"end":{"line":430,"column":2}},"214":{"start":{"line":426,"column":2},"end":{"line":429,"column":5}},"215":{"start":{"line":432,"column":0},"end":{"line":437,"column":2}},"216":{"start":{"line":433,"column":2},"end":{"line":436,"column":5}},"217":{"start":{"line":439,"column":0},"end":{"line":447,"column":2}},"218":{"start":{"line":440,"column":2},"end":{"line":442,"column":3}},"219":{"start":{"line":441,"column":4},"end":{"line":441,"column":35}},"220":{"start":{"line":443,"column":2},"end":{"line":446,"column":5}},"221":{"start":{"line":449,"column":0},"end":{"line":457,"column":2}},"222":{"start":{"line":450,"column":2},"end":{"line":452,"column":3}},"223":{"start":{"line":451,"column":4},"end":{"line":451,"column":35}},"224":{"start":{"line":453,"column":2},"end":{"line":456,"column":5}},"225":{"start":{"line":459,"column":0},"end":{"line":465,"column":2}},"226":{"start":{"line":460,"column":2},"end":{"line":463,"column":4}},"227":{"start":{"line":464,"column":2},"end":{"line":464,"column":39}},"228":{"start":{"line":467,"column":0},"end":{"line":492,"column":2}},"229":{"start":{"line":468,"column":2},"end":{"line":468,"column":18}},"230":{"start":{"line":470,"column":2},"end":{"line":491,"column":3}},"231":{"start":{"line":471,"column":4},"end":{"line":487,"column":5}},"232":{"start":{"line":472,"column":6},"end":{"line":486,"column":9}},"233":{"start":{"line":473,"column":8},"end":{"line":473,"column":20}},"234":{"start":{"line":474,"column":8},"end":{"line":474,"column":29}},"235":{"start":{"line":475,"column":8},"end":{"line":480,"column":9}},"236":{"start":{"line":476,"column":10},"end":{"line":476,"column":93}},"237":{"start":{"line":477,"column":10},"end":{"line":477,"column":39}},"238":{"start":{"line":479,"column":10},"end":{"line":479,"column":119}},"239":{"start":{"line":481,"column":8},"end":{"line":481,"column":55}},"240":{"start":{"line":482,"column":8},"end":{"line":482,"column":38}},"241":{"start":{"line":483,"column":8},"end":{"line":485,"column":9}},"242":{"start":{"line":484,"column":10},"end":{"line":484,"column":25}},"243":{"start":{"line":489,"column":4},"end":{"line":489,"column":24}},"244":{"start":{"line":490,"column":4},"end":{"line":490,"column":33}},"245":{"start":{"line":494,"column":0},"end":{"line":503,"column":2}},"246":{"start":{"line":495,"column":2},"end":{"line":501,"column":3}},"247":{"start":{"line":496,"column":4},"end":{"line":496,"column":88}},"248":{"start":{"line":497,"column":4},"end":{"line":499,"column":5}},"249":{"start":{"line":498,"column":6},"end":{"line":498,"column":50}},"250":{"start":{"line":500,"column":4},"end":{"line":500,"column":22}},"251":{"start":{"line":502,"column":2},"end":{"line":502,"column":48}},"252":{"start":{"line":505,"column":0},"end":{"line":510,"column":2}},"253":{"start":{"line":506,"column":2},"end":{"line":508,"column":3}},"254":{"start":{"line":507,"column":4},"end":{"line":507,"column":59}},"255":{"start":{"line":509,"column":2},"end":{"line":509,"column":49}},"256":{"start":{"line":512,"column":0},"end":{"line":523,"column":2}},"257":{"start":{"line":513,"column":2},"end":{"line":513,"column":63}},"258":{"start":{"line":514,"column":2},"end":{"line":521,"column":3}},"259":{"start":{"line":515,"column":4},"end":{"line":515,"column":22}},"260":{"start":{"line":517,"column":4},"end":{"line":517,"column":57}},"261":{"start":{"line":518,"column":4},"end":{"line":520,"column":7}},"262":{"start":{"line":522,"column":2},"end":{"line":522,"column":30}},"263":{"start":{"line":525,"column":0},"end":{"line":609,"column":2}},"264":{"start":{"line":526,"column":2},"end":{"line":526,"column":18}},"265":{"start":{"line":528,"column":2},"end":{"line":528,"column":29}},"266":{"start":{"line":532,"column":2},"end":{"line":536,"column":4}},"267":{"start":{"line":534,"column":6},"end":{"line":534,"column":76}},"268":{"start":{"line":538,"column":2},"end":{"line":545,"column":3}},"269":{"start":{"line":539,"column":4},"end":{"line":543,"column":5}},"270":{"start":{"line":540,"column":6},"end":{"line":540,"column":54}},"271":{"start":{"line":542,"column":6},"end":{"line":542,"column":40}},"272":{"start":{"line":544,"column":4},"end":{"line":544,"column":54}},"273":{"start":{"line":547,"column":2},"end":{"line":555,"column":3}},"274":{"start":{"line":548,"column":4},"end":{"line":552,"column":5}},"275":{"start":{"line":549,"column":6},"end":{"line":549,"column":56}},"276":{"start":{"line":551,"column":6},"end":{"line":551,"column":44}},"277":{"start":{"line":553,"column":4},"end":{"line":553,"column":61}},"278":{"start":{"line":554,"column":4},"end":{"line":554,"column":58}},"279":{"start":{"line":557,"column":2},"end":{"line":557,"column":102}},"280":{"start":{"line":559,"column":2},"end":{"line":559,"column":51}},"281":{"start":{"line":560,"column":2},"end":{"line":560,"column":33}},"282":{"start":{"line":561,"column":2},"end":{"line":561,"column":44}},"283":{"start":{"line":562,"column":2},"end":{"line":562,"column":48}},"284":{"start":{"line":563,"column":2},"end":{"line":563,"column":52}},"285":{"start":{"line":564,"column":2},"end":{"line":564,"column":48}},"286":{"start":{"line":565,"column":2},"end":{"line":565,"column":44}},"287":{"start":{"line":566,"column":2},"end":{"line":566,"column":58}},"288":{"start":{"line":567,"column":2},"end":{"line":567,"column":56}},"289":{"start":{"line":568,"column":2},"end":{"line":568,"column":64}},"290":{"start":{"line":569,"column":2},"end":{"line":569,"column":56}},"291":{"start":{"line":570,"column":2},"end":{"line":570,"column":56}},"292":{"start":{"line":571,"column":2},"end":{"line":571,"column":60}},"293":{"start":{"line":573,"column":2},"end":{"line":579,"column":3}},"294":{"start":{"line":574,"column":4},"end":{"line":578,"column":5}},"295":{"start":{"line":575,"column":6},"end":{"line":575,"column":53}},"296":{"start":{"line":576,"column":11},"end":{"line":578,"column":5}},"297":{"start":{"line":577,"column":6},"end":{"line":577,"column":55}},"298":{"start":{"line":581,"column":2},"end":{"line":584,"column":5}},"299":{"start":{"line":586,"column":2},"end":{"line":606,"column":5}},"300":{"start":{"line":587,"column":4},"end":{"line":605,"column":5}},"301":{"start":{"line":588,"column":6},"end":{"line":588,"column":54}},"302":{"start":{"line":589,"column":6},"end":{"line":593,"column":7}},"303":{"start":{"line":590,"column":8},"end":{"line":590,"column":58}},"304":{"start":{"line":592,"column":8},"end":{"line":592,"column":59}},"305":{"start":{"line":594,"column":11},"end":{"line":605,"column":5}},"306":{"start":{"line":595,"column":6},"end":{"line":595,"column":56}},"307":{"start":{"line":596,"column":6},"end":{"line":596,"column":60}},"308":{"start":{"line":597,"column":11},"end":{"line":605,"column":5}},"309":{"start":{"line":598,"column":6},"end":{"line":598,"column":40}},"310":{"start":{"line":599,"column":11},"end":{"line":605,"column":5}},"311":{"start":{"line":600,"column":6},"end":{"line":600,"column":39}},"312":{"start":{"line":601,"column":11},"end":{"line":605,"column":5}},"313":{"start":{"line":602,"column":6},"end":{"line":602,"column":38}},"314":{"start":{"line":603,"column":11},"end":{"line":605,"column":5}},"315":{"start":{"line":604,"column":6},"end":{"line":604,"column":53}},"316":{"start":{"line":608,"column":2},"end":{"line":608,"column":75}},"317":{"start":{"line":611,"column":0},"end":{"line":624,"column":2}},"318":{"start":{"line":612,"column":2},"end":{"line":622,"column":3}},"319":{"start":{"line":613,"column":4},"end":{"line":613,"column":88}},"320":{"start":{"line":614,"column":4},"end":{"line":614,"column":55}},"321":{"start":{"line":615,"column":4},"end":{"line":615,"column":72}},"322":{"start":{"line":616,"column":4},"end":{"line":616,"column":74}},"323":{"start":{"line":617,"column":4},"end":{"line":617,"column":58}},"324":{"start":{"line":618,"column":4},"end":{"line":618,"column":58}},"325":{"start":{"line":619,"column":4},"end":{"line":619,"column":69}},"326":{"start":{"line":620,"column":4},"end":{"line":620,"column":69}},"327":{"start":{"line":621,"column":4},"end":{"line":621,"column":18}},"328":{"start":{"line":623,"column":2},"end":{"line":623,"column":30}},"329":{"start":{"line":626,"column":0},"end":{"line":687,"column":2}},"330":{"start":{"line":627,"column":2},"end":{"line":627,"column":18}},"331":{"start":{"line":629,"column":2},"end":{"line":631,"column":3}},"332":{"start":{"line":630,"column":4},"end":{"line":630,"column":68}},"333":{"start":{"line":632,"column":2},"end":{"line":634,"column":3}},"334":{"start":{"line":633,"column":4},"end":{"line":633,"column":66}},"335":{"start":{"line":635,"column":2},"end":{"line":637,"column":3}},"336":{"start":{"line":636,"column":4},"end":{"line":636,"column":40}},"337":{"start":{"line":639,"column":2},"end":{"line":639,"column":23}},"338":{"start":{"line":641,"column":2},"end":{"line":644,"column":4}},"339":{"start":{"line":642,"column":4},"end":{"line":642,"column":78}},"340":{"start":{"line":643,"column":4},"end":{"line":643,"column":32}},"341":{"start":{"line":646,"column":2},"end":{"line":684,"column":4}},"342":{"start":{"line":647,"column":4},"end":{"line":647,"column":48}},"343":{"start":{"line":648,"column":4},"end":{"line":650,"column":5}},"344":{"start":{"line":649,"column":6},"end":{"line":649,"column":60}},"345":{"start":{"line":652,"column":4},"end":{"line":652,"column":52}},"346":{"start":{"line":653,"column":4},"end":{"line":655,"column":5}},"347":{"start":{"line":654,"column":6},"end":{"line":654,"column":62}},"348":{"start":{"line":657,"column":4},"end":{"line":669,"column":7}},"349":{"start":{"line":671,"column":4},"end":{"line":677,"column":7}},"350":{"start":{"line":672,"column":6},"end":{"line":676,"column":7}},"351":{"start":{"line":673,"column":8},"end":{"line":673,"column":53}},"352":{"start":{"line":675,"column":8},"end":{"line":675,"column":53}},"353":{"start":{"line":679,"column":4},"end":{"line":679,"column":66}},"354":{"start":{"line":681,"column":4},"end":{"line":683,"column":7}},"355":{"start":{"line":682,"column":6},"end":{"line":682,"column":49}},"356":{"start":{"line":686,"column":2},"end":{"line":686,"column":23}},"357":{"start":{"line":689,"column":0},"end":{"line":695,"column":2}},"358":{"start":{"line":690,"column":2},"end":{"line":694,"column":5}},"359":{"start":{"line":697,"column":0},"end":{"line":699,"column":2}},"360":{"start":{"line":698,"column":2},"end":{"line":698,"column":56}},"361":{"start":{"line":704,"column":0},"end":{"line":711,"column":2}},"362":{"start":{"line":705,"column":2},"end":{"line":710,"column":3}},"363":{"start":{"line":706,"column":4},"end":{"line":709,"column":7}},"364":{"start":{"line":713,"column":0},"end":{"line":717,"column":2}},"365":{"start":{"line":714,"column":2},"end":{"line":716,"column":3}},"366":{"start":{"line":715,"column":4},"end":{"line":715,"column":39}},"367":{"start":{"line":719,"column":0},"end":{"line":724,"column":2}},"368":{"start":{"line":720,"column":2},"end":{"line":722,"column":3}},"369":{"start":{"line":721,"column":4},"end":{"line":721,"column":22}},"370":{"start":{"line":723,"column":2},"end":{"line":723,"column":38}},"371":{"start":{"line":726,"column":0},"end":{"line":734,"column":2}},"372":{"start":{"line":727,"column":2},"end":{"line":727,"column":17}},"373":{"start":{"line":728,"column":2},"end":{"line":732,"column":3}},"374":{"start":{"line":729,"column":4},"end":{"line":731,"column":5}},"375":{"start":{"line":730,"column":6},"end":{"line":730,"column":27}},"376":{"start":{"line":733,"column":2},"end":{"line":733,"column":15}},"377":{"start":{"line":736,"column":0},"end":{"line":743,"column":2}},"378":{"start":{"line":737,"column":2},"end":{"line":741,"column":3}},"379":{"start":{"line":738,"column":4},"end":{"line":738,"column":75}},"380":{"start":{"line":739,"column":9},"end":{"line":741,"column":3}},"381":{"start":{"line":740,"column":4},"end":{"line":740,"column":55}},"382":{"start":{"line":742,"column":2},"end":{"line":742,"column":17}},"383":{"start":{"line":745,"column":0},"end":{"line":745,"column":45}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":2},"end":{"line":25,"column":2}},{"start":{"line":25,"column":2},"end":{"line":25,"column":2}}]},"2":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":4},"end":{"line":126,"column":4}},{"start":{"line":126,"column":4},"end":{"line":126,"column":4}}]},"3":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":4},"end":{"line":137,"column":4}},{"start":{"line":137,"column":4},"end":{"line":137,"column":4}}]},"4":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":2},"end":{"line":149,"column":2}},{"start":{"line":149,"column":2},"end":{"line":149,"column":2}}]},"5":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":2},"end":{"line":153,"column":2}},{"start":{"line":153,"column":2},"end":{"line":153,"column":2}}]},"6":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":2},"end":{"line":165,"column":2}},{"start":{"line":165,"column":2},"end":{"line":165,"column":2}}]},"7":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":2},"end":{"line":171,"column":2}},{"start":{"line":171,"column":2},"end":{"line":171,"column":2}}]},"8":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":2},"end":{"line":183,"column":2}},{"start":{"line":183,"column":2},"end":{"line":183,"column":2}}]},"9":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":4},"end":{"line":184,"column":4}},{"start":{"line":184,"column":4},"end":{"line":184,"column":4}}]},"10":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":4},"end":{"line":191,"column":4}},{"start":{"line":191,"column":4},"end":{"line":191,"column":4}}]},"11":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":4},"end":{"line":197,"column":4}},{"start":{"line":197,"column":4},"end":{"line":197,"column":4}}]},"12":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":4},"end":{"line":205,"column":4}},{"start":{"line":205,"column":4},"end":{"line":205,"column":4}}]},"13":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":2},"end":{"line":213,"column":2}},{"start":{"line":213,"column":2},"end":{"line":213,"column":2}}]},"14":{"line":219,"type":"if","locations":[{"start":{"line":219,"column":2},"end":{"line":219,"column":2}},{"start":{"line":219,"column":2},"end":{"line":219,"column":2}}]},"15":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":4},"end":{"line":221,"column":4}},{"start":{"line":221,"column":4},"end":{"line":221,"column":4}}]},"16":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":4},"end":{"line":224,"column":4}},{"start":{"line":224,"column":4},"end":{"line":224,"column":4}}]},"17":{"line":227,"type":"if","locations":[{"start":{"line":227,"column":4},"end":{"line":227,"column":4}},{"start":{"line":227,"column":4},"end":{"line":227,"column":4}}]},"18":{"line":228,"type":"if","locations":[{"start":{"line":228,"column":6},"end":{"line":228,"column":6}},{"start":{"line":228,"column":6},"end":{"line":228,"column":6}}]},"19":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":10},"end":{"line":230,"column":10}},{"start":{"line":230,"column":10},"end":{"line":230,"column":10}}]},"20":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":13},"end":{"line":236,"column":13}},{"start":{"line":236,"column":13},"end":{"line":236,"column":13}}]},"21":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":4},"end":{"line":240,"column":4}},{"start":{"line":240,"column":4},"end":{"line":240,"column":4}}]},"22":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":4},"end":{"line":243,"column":4}},{"start":{"line":243,"column":4},"end":{"line":243,"column":4}}]},"23":{"line":244,"type":"if","locations":[{"start":{"line":244,"column":6},"end":{"line":244,"column":6}},{"start":{"line":244,"column":6},"end":{"line":244,"column":6}}]},"24":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":8},"end":{"line":246,"column":8}},{"start":{"line":246,"column":8},"end":{"line":246,"column":8}}]},"25":{"line":251,"type":"if","locations":[{"start":{"line":251,"column":13},"end":{"line":251,"column":13}},{"start":{"line":251,"column":13},"end":{"line":251,"column":13}}]},"26":{"line":263,"type":"if","locations":[{"start":{"line":263,"column":2},"end":{"line":263,"column":2}},{"start":{"line":263,"column":2},"end":{"line":263,"column":2}}]},"27":{"line":266,"type":"if","locations":[{"start":{"line":266,"column":2},"end":{"line":266,"column":2}},{"start":{"line":266,"column":2},"end":{"line":266,"column":2}}]},"28":{"line":270,"type":"if","locations":[{"start":{"line":270,"column":2},"end":{"line":270,"column":2}},{"start":{"line":270,"column":2},"end":{"line":270,"column":2}}]},"29":{"line":270,"type":"binary-expr","locations":[{"start":{"line":270,"column":6},"end":{"line":270,"column":27}},{"start":{"line":270,"column":31},"end":{"line":270,"column":55}}]},"30":{"line":273,"type":"if","locations":[{"start":{"line":273,"column":2},"end":{"line":273,"column":2}},{"start":{"line":273,"column":2},"end":{"line":273,"column":2}}]},"31":{"line":277,"type":"if","locations":[{"start":{"line":277,"column":2},"end":{"line":277,"column":2}},{"start":{"line":277,"column":2},"end":{"line":277,"column":2}}]},"32":{"line":277,"type":"binary-expr","locations":[{"start":{"line":277,"column":6},"end":{"line":277,"column":27}},{"start":{"line":277,"column":31},"end":{"line":277,"column":55}}]},"33":{"line":280,"type":"if","locations":[{"start":{"line":280,"column":2},"end":{"line":280,"column":2}},{"start":{"line":280,"column":2},"end":{"line":280,"column":2}}]},"34":{"line":292,"type":"if","locations":[{"start":{"line":292,"column":2},"end":{"line":292,"column":2}},{"start":{"line":292,"column":2},"end":{"line":292,"column":2}}]},"35":{"line":303,"type":"if","locations":[{"start":{"line":303,"column":2},"end":{"line":303,"column":2}},{"start":{"line":303,"column":2},"end":{"line":303,"column":2}}]},"36":{"line":308,"type":"if","locations":[{"start":{"line":308,"column":2},"end":{"line":308,"column":2}},{"start":{"line":308,"column":2},"end":{"line":308,"column":2}}]},"37":{"line":308,"type":"binary-expr","locations":[{"start":{"line":308,"column":6},"end":{"line":308,"column":34}},{"start":{"line":308,"column":38},"end":{"line":308,"column":65}}]},"38":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":4},"end":{"line":309,"column":4}},{"start":{"line":309,"column":4},"end":{"line":309,"column":4}}]},"39":{"line":314,"type":"if","locations":[{"start":{"line":314,"column":8},"end":{"line":314,"column":8}},{"start":{"line":314,"column":8},"end":{"line":314,"column":8}}]},"40":{"line":340,"type":"if","locations":[{"start":{"line":340,"column":2},"end":{"line":340,"column":2}},{"start":{"line":340,"column":2},"end":{"line":340,"column":2}}]},"41":{"line":347,"type":"if","locations":[{"start":{"line":347,"column":2},"end":{"line":347,"column":2}},{"start":{"line":347,"column":2},"end":{"line":347,"column":2}}]},"42":{"line":350,"type":"if","locations":[{"start":{"line":350,"column":2},"end":{"line":350,"column":2}},{"start":{"line":350,"column":2},"end":{"line":350,"column":2}}]},"43":{"line":353,"type":"if","locations":[{"start":{"line":353,"column":2},"end":{"line":353,"column":2}},{"start":{"line":353,"column":2},"end":{"line":353,"column":2}}]},"44":{"line":356,"type":"binary-expr","locations":[{"start":{"line":356,"column":15},"end":{"line":356,"column":24}},{"start":{"line":356,"column":28},"end":{"line":356,"column":39}},{"start":{"line":356,"column":43},"end":{"line":356,"column":46}}]},"45":{"line":359,"type":"if","locations":[{"start":{"line":359,"column":2},"end":{"line":359,"column":2}},{"start":{"line":359,"column":2},"end":{"line":359,"column":2}}]},"46":{"line":370,"type":"if","locations":[{"start":{"line":370,"column":2},"end":{"line":370,"column":2}},{"start":{"line":370,"column":2},"end":{"line":370,"column":2}}]},"47":{"line":373,"type":"if","locations":[{"start":{"line":373,"column":9},"end":{"line":373,"column":9}},{"start":{"line":373,"column":9},"end":{"line":373,"column":9}}]},"48":{"line":377,"type":"if","locations":[{"start":{"line":377,"column":2},"end":{"line":377,"column":2}},{"start":{"line":377,"column":2},"end":{"line":377,"column":2}}]},"49":{"line":389,"type":"if","locations":[{"start":{"line":389,"column":2},"end":{"line":389,"column":2}},{"start":{"line":389,"column":2},"end":{"line":389,"column":2}}]},"50":{"line":392,"type":"if","locations":[{"start":{"line":392,"column":9},"end":{"line":392,"column":9}},{"start":{"line":392,"column":9},"end":{"line":392,"column":9}}]},"51":{"line":400,"type":"if","locations":[{"start":{"line":400,"column":2},"end":{"line":400,"column":2}},{"start":{"line":400,"column":2},"end":{"line":400,"column":2}}]},"52":{"line":406,"type":"if","locations":[{"start":{"line":406,"column":2},"end":{"line":406,"column":2}},{"start":{"line":406,"column":2},"end":{"line":406,"column":2}}]},"53":{"line":407,"type":"if","locations":[{"start":{"line":407,"column":4},"end":{"line":407,"column":4}},{"start":{"line":407,"column":4},"end":{"line":407,"column":4}}]},"54":{"line":419,"type":"if","locations":[{"start":{"line":419,"column":4},"end":{"line":419,"column":4}},{"start":{"line":419,"column":4},"end":{"line":419,"column":4}}]},"55":{"line":440,"type":"if","locations":[{"start":{"line":440,"column":2},"end":{"line":440,"column":2}},{"start":{"line":440,"column":2},"end":{"line":440,"column":2}}]},"56":{"line":450,"type":"if","locations":[{"start":{"line":450,"column":2},"end":{"line":450,"column":2}},{"start":{"line":450,"column":2},"end":{"line":450,"column":2}}]},"57":{"line":470,"type":"if","locations":[{"start":{"line":470,"column":2},"end":{"line":470,"column":2}},{"start":{"line":470,"column":2},"end":{"line":470,"column":2}}]},"58":{"line":471,"type":"if","locations":[{"start":{"line":471,"column":4},"end":{"line":471,"column":4}},{"start":{"line":471,"column":4},"end":{"line":471,"column":4}}]},"59":{"line":475,"type":"if","locations":[{"start":{"line":475,"column":8},"end":{"line":475,"column":8}},{"start":{"line":475,"column":8},"end":{"line":475,"column":8}}]},"60":{"line":483,"type":"if","locations":[{"start":{"line":483,"column":8},"end":{"line":483,"column":8}},{"start":{"line":483,"column":8},"end":{"line":483,"column":8}}]},"61":{"line":495,"type":"if","locations":[{"start":{"line":495,"column":2},"end":{"line":495,"column":2}},{"start":{"line":495,"column":2},"end":{"line":495,"column":2}}]},"62":{"line":497,"type":"if","locations":[{"start":{"line":497,"column":4},"end":{"line":497,"column":4}},{"start":{"line":497,"column":4},"end":{"line":497,"column":4}}]},"63":{"line":506,"type":"if","locations":[{"start":{"line":506,"column":2},"end":{"line":506,"column":2}},{"start":{"line":506,"column":2},"end":{"line":506,"column":2}}]},"64":{"line":506,"type":"binary-expr","locations":[{"start":{"line":506,"column":6},"end":{"line":506,"column":18}},{"start":{"line":506,"column":22},"end":{"line":506,"column":47}},{"start":{"line":506,"column":51},"end":{"line":506,"column":69}}]},"65":{"line":514,"type":"if","locations":[{"start":{"line":514,"column":2},"end":{"line":514,"column":2}},{"start":{"line":514,"column":2},"end":{"line":514,"column":2}}]},"66":{"line":534,"type":"binary-expr","locations":[{"start":{"line":534,"column":13},"end":{"line":534,"column":29}},{"start":{"line":534,"column":33},"end":{"line":534,"column":53}},{"start":{"line":534,"column":57},"end":{"line":534,"column":75}}]},"67":{"line":538,"type":"if","locations":[{"start":{"line":538,"column":2},"end":{"line":538,"column":2}},{"start":{"line":538,"column":2},"end":{"line":538,"column":2}}]},"68":{"line":539,"type":"if","locations":[{"start":{"line":539,"column":4},"end":{"line":539,"column":4}},{"start":{"line":539,"column":4},"end":{"line":539,"column":4}}]},"69":{"line":547,"type":"if","locations":[{"start":{"line":547,"column":2},"end":{"line":547,"column":2}},{"start":{"line":547,"column":2},"end":{"line":547,"column":2}}]},"70":{"line":548,"type":"if","locations":[{"start":{"line":548,"column":4},"end":{"line":548,"column":4}},{"start":{"line":548,"column":4},"end":{"line":548,"column":4}}]},"71":{"line":573,"type":"if","locations":[{"start":{"line":573,"column":2},"end":{"line":573,"column":2}},{"start":{"line":573,"column":2},"end":{"line":573,"column":2}}]},"72":{"line":574,"type":"if","locations":[{"start":{"line":574,"column":4},"end":{"line":574,"column":4}},{"start":{"line":574,"column":4},"end":{"line":574,"column":4}}]},"73":{"line":576,"type":"if","locations":[{"start":{"line":576,"column":11},"end":{"line":576,"column":11}},{"start":{"line":576,"column":11},"end":{"line":576,"column":11}}]},"74":{"line":587,"type":"if","locations":[{"start":{"line":587,"column":4},"end":{"line":587,"column":4}},{"start":{"line":587,"column":4},"end":{"line":587,"column":4}}]},"75":{"line":589,"type":"if","locations":[{"start":{"line":589,"column":6},"end":{"line":589,"column":6}},{"start":{"line":589,"column":6},"end":{"line":589,"column":6}}]},"76":{"line":594,"type":"if","locations":[{"start":{"line":594,"column":11},"end":{"line":594,"column":11}},{"start":{"line":594,"column":11},"end":{"line":594,"column":11}}]},"77":{"line":597,"type":"if","locations":[{"start":{"line":597,"column":11},"end":{"line":597,"column":11}},{"start":{"line":597,"column":11},"end":{"line":597,"column":11}}]},"78":{"line":599,"type":"if","locations":[{"start":{"line":599,"column":11},"end":{"line":599,"column":11}},{"start":{"line":599,"column":11},"end":{"line":599,"column":11}}]},"79":{"line":601,"type":"if","locations":[{"start":{"line":601,"column":11},"end":{"line":601,"column":11}},{"start":{"line":601,"column":11},"end":{"line":601,"column":11}}]},"80":{"line":603,"type":"if","locations":[{"start":{"line":603,"column":11},"end":{"line":603,"column":11}},{"start":{"line":603,"column":11},"end":{"line":603,"column":11}}]},"81":{"line":612,"type":"if","locations":[{"start":{"line":612,"column":2},"end":{"line":612,"column":2}},{"start":{"line":612,"column":2},"end":{"line":612,"column":2}}]},"82":{"line":629,"type":"if","locations":[{"start":{"line":629,"column":2},"end":{"line":629,"column":2}},{"start":{"line":629,"column":2},"end":{"line":629,"column":2}}]},"83":{"line":632,"type":"if","locations":[{"start":{"line":632,"column":2},"end":{"line":632,"column":2}},{"start":{"line":632,"column":2},"end":{"line":632,"column":2}}]},"84":{"line":632,"type":"binary-expr","locations":[{"start":{"line":632,"column":6},"end":{"line":632,"column":34}},{"start":{"line":632,"column":38},"end":{"line":632,"column":73}},{"start":{"line":632,"column":77},"end":{"line":632,"column":111}}]},"85":{"line":635,"type":"if","locations":[{"start":{"line":635,"column":2},"end":{"line":635,"column":2}},{"start":{"line":635,"column":2},"end":{"line":635,"column":2}}]},"86":{"line":648,"type":"if","locations":[{"start":{"line":648,"column":4},"end":{"line":648,"column":4}},{"start":{"line":648,"column":4},"end":{"line":648,"column":4}}]},"87":{"line":653,"type":"if","locations":[{"start":{"line":653,"column":4},"end":{"line":653,"column":4}},{"start":{"line":653,"column":4},"end":{"line":653,"column":4}}]},"88":{"line":672,"type":"if","locations":[{"start":{"line":672,"column":6},"end":{"line":672,"column":6}},{"start":{"line":672,"column":6},"end":{"line":672,"column":6}}]},"89":{"line":705,"type":"if","locations":[{"start":{"line":705,"column":2},"end":{"line":705,"column":2}},{"start":{"line":705,"column":2},"end":{"line":705,"column":2}}]},"90":{"line":708,"type":"binary-expr","locations":[{"start":{"line":708,"column":12},"end":{"line":708,"column":19}},{"start":{"line":708,"column":23},"end":{"line":708,"column":25}}]},"91":{"line":714,"type":"if","locations":[{"start":{"line":714,"column":2},"end":{"line":714,"column":2}},{"start":{"line":714,"column":2},"end":{"line":714,"column":2}}]},"92":{"line":720,"type":"if","locations":[{"start":{"line":720,"column":2},"end":{"line":720,"column":2}},{"start":{"line":720,"column":2},"end":{"line":720,"column":2}}]},"93":{"line":729,"type":"if","locations":[{"start":{"line":729,"column":4},"end":{"line":729,"column":4}},{"start":{"line":729,"column":4},"end":{"line":729,"column":4}}]},"94":{"line":737,"type":"if","locations":[{"start":{"line":737,"column":2},"end":{"line":737,"column":2}},{"start":{"line":737,"column":2},"end":{"line":737,"column":2}}]},"95":{"line":739,"type":"if","locations":[{"start":{"line":739,"column":9},"end":{"line":739,"column":9}},{"start":{"line":739,"column":9},"end":{"line":739,"column":9}}]}},"code":["var path = require('path');","var crypto = require('crypto');","var EventEmitter = require('events').EventEmitter;","var domain = require('sc-domain');","var fork = require('child_process').fork;","var os = require('os');","var fs = require('fs-extra');","var uidNumber = require('uid-number');","var uuid = require('uuid');","var pkg = require('./package.json');","var argv = require('minimist')(process.argv.slice(2));","var cluster = require('cluster');","","var scErrors = require('sc-errors');","var InvalidOptionsError = scErrors.InvalidOptionsError;","var InvalidActionError = scErrors.InvalidActionError;","var BrokerError = scErrors.BrokerError;","var ProcessExitError = scErrors.ProcessExitError;","var UnknownError = scErrors.UnknownError;","","var socketClusterSingleton = null;","","var SocketCluster = function (options) {","  var self = this;","  if (socketClusterSingleton) {","    var doubleInstantiationError = new Error('The SocketCluster master object is a singleton - It can only be instantiated once per process.');","    doubleInstantiationError.name = 'DoubleInstantiationError';","    throw doubleInstantiationError;","  }","  socketClusterSingleton = self;","","  self.EVENT_FAIL = 'fail';","  self.EVENT_WARNING = 'warning';","  self.EVENT_INFO = 'info';","  self.EVENT_READY = 'ready';","  self.EVENT_WORKER_START = 'workerStart';","  self.EVENT_WORKER_EXIT = 'workerExit';","","  self._errorAnnotations = {","    'EADDRINUSE': 'Failed to bind to a port because it was already used by another process.'","  };","","  self._errorDomain = domain.create();","  self._errorDomain.on('error', function (err) {","    self.errorHandler(err, {","      type: 'master'","    });","  });","  self._errorDomain.add(self);","","  self._errorDomain.run(function () {","    self._init(options);","  });","};","","SocketCluster.prototype = Object.create(EventEmitter.prototype);","","SocketCluster.prototype._init = function (options) {","  var self = this;","","  var backslashRegex = /\\\\/g;","  var appDirPath = path.dirname(require.main.filename).replace(backslashRegex, '/');","","  self.options = {","    port: 8000,","    workers: null,","    brokers: null,","    appName: null,","    instanceId: null,","    secretKey: null,","    authKey: null,","    authPrivateKey: null,","    authPublicKey: null,","    authDefaultExpiry: 86400,","    authAlgorithm: null,","    authSignAsync: false,","    authVerifyAsync: true,","    crashWorkerOnError: true,","    rebootWorkerOnCrash: true,","    killWorkerMemoryThreshold: null,","    protocol: 'http',","    protocolOptions: null,","    logLevel: 2,","    handshakeTimeout: 10000,","    ackTimeout: 10000,","    pingInterval: 8000,","    pingTimeout: 20000,","    origins: '*:*',","    socketChannelLimit: 1000,","    workerStatusInterval: 10000,","    processTermTimeout: 10000,","    propagateErrors: true,","    propagateWarnings: true,","    middlewareEmitWarnings: true,","    host: null,","    tcpSynBacklog: null,","    workerController: null,","    brokerController: null,","    initController: null,","    rebootOnSignal: true,","    downgradeToUser: false,","    path: '/socketcluster/',","    socketRoot: null,","    schedulingPolicy: null,","    allowClientPublish: true,","    defaultWorkerDebugPort: 5858,","    defaultBrokerDebugPort: 6858,","    httpServerModule: null,","    pubSubBatchDuration: null,","    environment: 'dev',","    killMasterOnSignal: false,","    wsEngine: 'uws',","    brokerEngine: 'sc-broker-cluster'","  };","","  self._active = false;","  self._workerCluster = null;","","  self._colorCodes = {","    red: 31,","    green: 32,","    yellow: 33","  };","","  for (var i in options) {","    if (options.hasOwnProperty(i)) {","      self.options[i] = options[i];","    }","  }","","  // Make sure there is always a trailing slash in WS path","  self.options.path = self.options.path.replace(/\\/?$/, '/');","","  var maxTimeout = Math.pow(2, 31) - 1;","","  var verifyDuration = function (propertyName) {","    if (self.options[propertyName] > maxTimeout) {","      throw new InvalidOptionsError('The ' + propertyName +","        ' value provided exceeded the maximum amount allowed');","    }","  };","","  verifyDuration('ackTimeout');","  verifyDuration('pingInterval');","  verifyDuration('pingTimeout');","  verifyDuration('workerStatusInterval');","  verifyDuration('processTermTimeout');","","  if (self.options.appName == null) {","    self.options.appName = uuid.v4();","  }","","  if (self.options.workerController == null) {","    throw new InvalidOptionsError(\"Compulsory option 'workerController' was not specified \" +","      \"- It needs to be a path to a JavaScript file which will act as the \" +","      \"boot controller for each worker in the cluster\");","  }","","  self._paths = {","    appDirPath: appDirPath,","    statusURL: '/~status',","    appWorkerControllerPath: path.resolve(self.options.workerController)","  };","","  if (self.options.initController) {","      self._paths.appInitControllerPath = path.resolve(self.options.initController);","  } else {","      self._paths.appInitControllerPath = null;","  }","","  if (/\\.js$/.test(self.options.wsEngine)) {","    self._paths.wsEnginePath = path.resolve(self.options.wsEngine);","  } else {","    self._paths.wsEnginePath = self.options.wsEngine;","  }","","  var pathHasher = crypto.createHash('md5');","  pathHasher.update(self._paths.appDirPath, 'utf8');","  var pathHash = pathHasher.digest('hex').substr(0, 10);","  // Trimp it because some OSes (e.g. OSX) do not like long path names for domain sockets.","  var shortAppName = self.options.appName.substr(0, 13);","","  if (process.platform == 'win32') {","    if (self.options.socketRoot) {","      self._socketDirPath = self.options.socketRoot + '_';","    } else {","      self._socketDirPath = '\\\\\\\\.\\\\pipe\\\\socketcluster_' + shortAppName + '_' + pathHash + '_';","    }","  } else {","    var socketDir, socketParentDir;","    if (self.options.socketRoot) {","      socketDir = self.options.socketRoot.replace(/\\/$/, '') + '/';","    } else {","      socketParentDir = os.tmpdir() + '/socketcluster/';","      socketDir = socketParentDir + shortAppName + '_' + pathHash + '/';","    }","    if (fs.existsSync(socketDir)) {","      try {","        fs.removeSync(socketDir);","      } catch (err) {","        throw new InvalidActionError('Failed to remove old socket directory ' + socketDir + ' - Try removing it manually');","      }","    }","    fs.mkdirsSync(socketDir);","    if (socketParentDir) {","      try {","        fs.chmodSync(socketParentDir, '1777');","      } catch (err) {}","    }","    self._socketDirPath = socketDir;","  }","","  if (self.options.brokerController) {","    self._paths.appBrokerControllerPath = path.resolve(self.options.brokerController);","  } else {","    self._paths.appBrokerControllerPath = null;","  }","","  if (self.options.protocolOptions) {","    var protoOpts = self.options.protocolOptions;","    if (protoOpts.key instanceof Buffer) {","      protoOpts.key = protoOpts.key.toString();","    }","    if (protoOpts.cert instanceof Buffer) {","      protoOpts.cert = protoOpts.cert.toString();","    }","    if (protoOpts.ca) {","      if (protoOpts.ca instanceof Array) {","        protoOpts.ca = protoOpts.ca.map(function (item) {","          if (item instanceof Buffer) {","            return item.toString();","          } else {","            return item;","          }","        });","      } else if (protoOpts.ca instanceof Buffer) {","        protoOpts.ca = protoOpts.ca.toString();","      }","    }","    if (protoOpts.pfx instanceof Buffer) {","      protoOpts.pfx = protoOpts.pfx.toString('base64');","    }","    if (protoOpts.passphrase == null) {","      if (protoOpts.key) {","        var privKeyEncLine = protoOpts.key.split('\\n')[1];","        if (privKeyEncLine.toUpperCase().indexOf('ENCRYPTED') > -1) {","          var message = 'The supplied private key is encrypted and cannot be used without a passphrase - ' +","            'Please provide a valid passphrase as a property to protocolOptions';","          throw new InvalidOptionsError(message);","        }","      } else if (protoOpts.pfx) {","        var message = 'The supplied pfx certificate cannot be used without a passphrase - ' +","          'Please provide a valid passphrase as a property to protocolOptions';","        throw new InvalidOptionsError(message);","      } else {","        var message = 'The supplied protocolOptions were invalid - ' +","          'Please provide either a key and cert pair or a pfx certificate';","        throw new InvalidOptionsError(message);","      }","    }","  }","","  if (self.options.authPrivateKey instanceof Buffer) {","    self.options.authPrivateKey = self.options.authPrivateKey.toString();","  }","  if (self.options.authPublicKey instanceof Buffer) {","    self.options.authPublicKey = self.options.authPublicKey.toString();","  }","","  if (!self.options.brokers || self.options.brokers < 1) {","    self.options.brokers = 1;","  }","  if (typeof self.options.brokers != 'number') {","    throw new InvalidOptionsError('The brokers option must be a number');","  }","","  if (!self.options.workers || self.options.workers < 1) {","    self.options.workers = 1;","  }","  if (typeof self.options.workers != 'number') {","    throw new InvalidOptionsError('The workers option must be a number');","  }","","  self._extRegex = /[.][^\\/\\\\]*$/;","  self._slashSequenceRegex = /\\/+/g;","  self._startSlashRegex = /^\\//;","","  self._dataExpiryAccuracy = 5000;","","  self._brokerEngine = require(self.options.brokerEngine);","","  if (self.options.logLevel > 0) {","    console.log('   ' + self.colorText('[Busy]', 'yellow') + ' Launching SocketCluster');","  }","","  process.stdin.on('error', function (err) {","    self.warningHandler(err, {type: 'master'});","  });","","  /*","    To allow inserting blank lines in console on Windows to aid with debugging.","  */","  if (process.platform == 'win32') {","    process.stdin.resume();","    process.stdin.setEncoding('utf8');","  }","","  if (self.options.downgradeToUser && process.platform != 'win32') {","    if (typeof self.options.downgradeToUser == 'number') {","      fs.chownSync(self._socketDirPath, self.options.downgradeToUser, 0);","      self._start();","    } else {","      uidNumber(self.options.downgradeToUser, function (err, uid, gid) {","        if (err) {","          throw new InvalidActionError('Failed to downgrade to user \"' + self.options.downgradeToUser + '\" - ' + err);","        } else {","          fs.chownSync(self._socketDirPath, uid, gid);","          self._start();","        }","      });","    }","  } else {","    self._start();","  }","};","","SocketCluster.prototype._getBrokerSocketName = function (brokerId) {","  return 'b' + brokerId;","};","","SocketCluster.prototype._getBrokerSocketPaths = function () {","  var socketPaths = [];","  for (var i = 0; i < this.options.brokers; i++) {","    socketPaths.push(this._socketDirPath + this._getBrokerSocketName(i));","  }","  return socketPaths;","};","","SocketCluster.prototype._capitaliseFirstLetter = function (str) {","  if (str == null) {","    str = '';","  }","  return str.charAt(0).toUpperCase() + str.slice(1);","};","","SocketCluster.prototype._logObject = function (obj, objType, time) {","  if (!objType) {","    objType = 'Error';","  }","  if (!obj.origin) {","    obj.origin = {};","  }","  if (!obj.origin.type) {","    obj.origin.type = 'Undefined';","  }","  var output = obj.stack || obj.message || obj;","","  var logMessage;","  if (obj.origin.pid == null) {","    logMessage = 'Origin: ' + this._capitaliseFirstLetter(obj.origin.type) + '\\n' +","      '   [' + objType + '] ' + output;","  } else {","    logMessage = 'Origin: ' + this._capitaliseFirstLetter(obj.origin.type) + ' (PID ' + obj.origin.pid + ')\\n' +","      '   [' + objType + '] ' + output;","  }","  this.log(logMessage, time);","};","","SocketCluster.prototype.errorHandler = function (err, origin) {","  if (!(err instanceof Object)) {","    // If a string (or null...)","    err = new UnknownError(err);","  } else if (err.stack == null) {","    err.stack = err.message;","  }","  var annotation = this._errorAnnotations[err.code];","  if (annotation) {","    err.stack += '\\n    ' + this.colorText('!!', 'red') + ' ' + annotation;","  }","","  err.origin = origin;","  err.time = Date.now();","  this.emit(this.EVENT_FAIL, err);","","  this._logObject(err, 'Error');","};","","SocketCluster.prototype.warningHandler = function (warning, origin) {","  if (!(warning instanceof Object)) {","    // If a string (or null...)","    warning = new UnknownError(warning);","  } else if (warning.stack == null) {","    warning.stack = warning.message;","  }","  warning.origin = origin;","  warning.time = Date.now();","","  this.emit(this.EVENT_WARNING, warning);","","  if (this.options.logLevel > 1) {","    this._logObject(warning, 'Warning');","  }","};","","SocketCluster.prototype.triggerInfo = function (info, origin) {","  if (this._active) {","    if (!(origin instanceof Object)) {","      origin = {","        type: origin","      };","    }","    var infoData = {","      origin: origin,","      message: info,","      time: Date.now()","    };","    this.emit(this.EVENT_WARNING, infoData);","","    if (this.options.logLevel > 0) {","      this._logObject(infoData, 'Info', infoData.time)","    }","  }","};","","SocketCluster.prototype._workerClusterErrorHandler = function (pid, error) {","  this.errorHandler(error, {","    type: 'WorkerCluster',","    pid: pid","  });","};","","SocketCluster.prototype._workerErrorHandler = function (workerPid, error) {","  this.errorHandler(error, {","    type: 'Worker',","    pid: workerPid","  });","};","","SocketCluster.prototype._brokerEngineErrorHandler = function (pid, error) {","  if (typeof error == 'string') {","    error = new BrokerError(error);","  }","  this.errorHandler(error, {","    type: 'BrokerEngine',","    pid: pid","  });","};","","SocketCluster.prototype._brokerErrorHandler = function (brokerPid, error) {","  if (typeof error == 'string') {","    error = new BrokerError(error);","  }","  this.errorHandler(error, {","    type: 'Broker',","    pid: brokerPid","  });","};","","SocketCluster.prototype._workerWarningHandler = function (workerPid, warning) {","  var origin = {","    type: 'Worker',","    pid: workerPid","  };","  this.warningHandler(warning, origin);","};","","SocketCluster.prototype._workerClusterReadyHandler = function () {","  var self = this;","","  if (!this._active) {","    if (this.options.rebootOnSignal) {","      process.on('SIGUSR2', function () {","        var warning;","        var killOptions = {};","        if (self.options.environment == 'dev') {","          warning = 'Master received SIGUSR2 signal - Shutting down all workers immediately';","          killOptions.immediate = true;","        } else {","          warning = 'Master received SIGUSR2 signal - Shutting down all workers in accordance with processTermTimeout';","        }","        self.warningHandler(warning, {type: 'master'});","        self.killWorkers(killOptions);","        if (self.options.killMasterOnSignal) {","          process.exit();","        }","      });","    }","","    this._active = true;","    this._logDeploymentDetails();","  }","};","","SocketCluster.prototype._workerExitHandler = function (workerInfo) {","  if (this.options.logLevel > 0) {","    var message = 'Worker ' + workerInfo.id + ' exited - Exit code: ' + workerInfo.code;","    if (workerInfo.signal) {","      message += ', signal: ' + workerInfo.signal;","    }","    this.log(message);","  }","  this.emit(this.EVENT_WORKER_EXIT, workerInfo);","};","","SocketCluster.prototype._workerStartHandler = function (workerInfo) {","  if (this._active && this.options.logLevel > 0 && workerInfo.respawn) {","    this.log('Worker ' + workerInfo.id + ' was respawned');","  }","  this.emit(this.EVENT_WORKER_START, workerInfo);","};","","SocketCluster.prototype._handleWorkerClusterExit = function (errorCode) {","  var message = 'workerCluster exited with code: ' + errorCode;","  if (errorCode == 0) {","    this.log(message);","  } else {","    var error = new ProcessExitError(message, errorCode);","    this.errorHandler(error, {","      type: 'workerCluster'","    });","  }","  this._launchWorkerCluster();","};","","SocketCluster.prototype._launchWorkerCluster = function () {","  var self = this;","","  var debugPort, inspectPort;","","  // Workers should not inherit the master --debug argument","  // because they have their own --debug-workers option.","  var execOptions = {","    execArgv: process.execArgv.filter(function (arg) {","      return arg != '--debug' && arg != '--debug-brk' && arg != '--inspect';","    })","  };","","  if (argv['debug-workers']) {","    if (argv['debug-workers'] == true) {","      debugPort = this.options.defaultWorkerDebugPort;","    } else {","      debugPort = argv['debug-workers'];","    }","    execOptions.execArgv.push('--debug=' + debugPort);","  }","","  if (argv['inspect-workers']) {","    if (argv['inspect-workers'] == true) {","      inspectPort = this.options.defaultWorkerDebugPort;","    } else {","      inspectPort = argv['inspect-workers'];","    }","    execOptions.execArgv.push('--debug-port=' + inspectPort);","    execOptions.execArgv.push('--inspect=' + inspectPort);","  }","","  this._workerCluster = fork(__dirname + '/lib/workercluster.js', process.argv.slice(2), execOptions);","","  var workerOpts = this._cloneObject(this.options);","  workerOpts.paths = this._paths;","  workerOpts.sourcePort = this.options.port;","  workerOpts.workerCount = this.options.workers;","  workerOpts.brokers = this._getBrokerSocketPaths();","  workerOpts.secretKey = this.options.secretKey;","  workerOpts.authKey = this.options.authKey;","  workerOpts.authPrivateKey = this.options.authPrivateKey;","  workerOpts.authPublicKey = this.options.authPublicKey;","  workerOpts.authDefaultExpiry = this.options.authDefaultExpiry;","  workerOpts.authAlgorithm = this.options.authAlgorithm;","  workerOpts.authSignAsync = this.options.authSignAsync;","  workerOpts.authVerifyAsync = this.options.authVerifyAsync;","","  if (typeof workerOpts.schedulingPolicy == 'string') {","    if (workerOpts.schedulingPolicy == 'rr') {","      workerOpts.schedulingPolicy = cluster.SCHED_RR;","    } else if (workerOpts.schedulingPolicy == 'none') {","      workerOpts.schedulingPolicy = cluster.SCHED_NONE;","    }","  }","","  this._workerCluster.send({","    type: 'init',","    data: workerOpts","  });","","  this._workerCluster.on('message', function workerHandler(m) {","    if (m.type == 'error') {","      var error = scErrors.hydrateError(m.data.error);","      if (m.data.workerPid) {","        self._workerErrorHandler(m.data.workerPid, error);","      } else {","        self._workerClusterErrorHandler(m.data.pid, error);","      }","    } else if (m.type == 'warning') {","      var warning = scErrors.hydrateError(m.data.error);","      self._workerWarningHandler(m.data.workerPid, warning);","    } else if (m.type == 'ready') {","      self._workerClusterReadyHandler();","    } else if (m.type == 'workerStart') {","      self._workerStartHandler(m.data);","    } else if (m.type == 'workerExit') {","      self._workerExitHandler(m.data);","    } else if (m.type == 'workerMessage') {","      self.emit('workerMessage', m.workerId, m.data);","    }","  });","","  this._workerCluster.on('exit', this._handleWorkerClusterExit.bind(this));","};","","SocketCluster.prototype._logDeploymentDetails = function () {","  if (this.options.logLevel > 0) {","    console.log('   ' + this.colorText('[Active]', 'green') + ' SocketCluster started');","    console.log('            Version: ' + pkg.version);","    console.log('            Environment: ' + this.options.environment);","    console.log('            WebSocket engine: ' + this.options.wsEngine);","    console.log('            Port: ' + this.options.port);","    console.log('            Master PID: ' + process.pid);","    console.log('            Worker count: ' + this.options.workers);","    console.log('            Broker count: ' + this.options.brokers);","    console.log();","  }","  this.emit(this.EVENT_READY);","};","","SocketCluster.prototype._start = function () {","  var self = this;","","  if (self.options.secretKey == null) {","    self.options.secretKey = crypto.randomBytes(32).toString('hex');","  }","  if (this.options.authKey == null && this.options.authPrivateKey == null && this.options.authPublicKey == null) {","    this.options.authKey = crypto.randomBytes(32).toString('hex');","  }","  if (self.options.instanceId == null) {","    self.options.instanceId = uuid.v4();","  }","","  self._active = false;","","  var brokerEngineServerReady = function () {","    self._brokerEngineServer.removeListener('ready', brokerEngineServerReady);","    self._launchWorkerCluster();","  };","","  var launchBrokerEngine = function () {","    var brokerDebugPort = argv['debug-brokers'];","    if (brokerDebugPort == true) {","      brokerDebugPort = self.options.defaultBrokerDebugPort;","    }","","    var brokerInspectPort = argv['inspect-brokers'];","    if (brokerInspectPort == true) {","      brokerInspectPort = self.options.defaultBrokerDebugPort;","    }","","    self._brokerEngineServer = new self._brokerEngine.Server({","      brokers: self._getBrokerSocketPaths(),","      debug: brokerDebugPort,","      inspect: brokerInspectPort,","      instanceId: self.options.instanceId,","      secretKey: self.options.secretKey,","      expiryAccuracy: self._dataExpiryAccuracy,","      downgradeToUser: self.options.downgradeToUser,","      processTermTimeout: self.options.processTermTimeout,","      brokerOptions: self.options,","      appBrokerControllerPath: self._paths.appBrokerControllerPath,","      appInitControllerPath: self._paths.appInitControllerPath","    });","","    self._brokerEngineServer.on('error', function (err) {","      if (err.brokerPid) {","        self._brokerErrorHandler(err.brokerPid, err);","      } else {","        self._brokerEngineErrorHandler(err.pid, err);","      }","    });","","    self._brokerEngineServer.on('ready', brokerEngineServerReady);","","    self._brokerEngineServer.on('brokerMessage', function (brokerId, data) {","      self.emit('brokerMessage', brokerId, data);","    });","  };","","  launchBrokerEngine();","};","","SocketCluster.prototype.sendToWorker = function (workerId, data) {","  this._workerCluster.send({","    type: 'masterMessage',","    workerId: workerId,","    data: data","  });","};","","SocketCluster.prototype.sendToBroker = function (brokerId, data) {","  this._brokerEngineServer.sendToBroker(brokerId, data);","};","","// The options object is optional and can have two boolean fields:","// immediate: Shut down the workers immediately without waiting for termination timeout.","// killClusterMaster: Shut down the cluster master (load balancer) as well as all the workers.","SocketCluster.prototype.killWorkers = function (options) {","  if (this._workerCluster) {","    this._workerCluster.send({","      type: 'terminate',","      data: options || {}","    });","  }","};","","SocketCluster.prototype.killBrokers = function () {","  if (this._brokerEngineServer) {","    this._brokerEngineServer.destroy();","  }","};","","SocketCluster.prototype.log = function (message, time) {","  if (time == null) {","    time = Date.now();","  }","  console.log(time + ' - ' + message);","};","","SocketCluster.prototype._cloneObject = function (object) {","  var clone = {};","  for (var i in object) {","    if (object.hasOwnProperty(i)) {","      clone[i] = object[i];","    }","  }","  return clone;","};","","SocketCluster.prototype.colorText = function (message, color) {","  if (this._colorCodes[color]) {","    return '\\x1b[0;' + this._colorCodes[color] + 'm' + message + '\\x1b[0m';","  } else if (color) {","    return '\\x1b[' + color + 'm' + message + '\\x1b[0m';","  }","  return message;","};","","module.exports.SocketCluster = SocketCluster;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"21":1,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"30":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"39":0,"43":0,"44":0,"45":0,"49":0,"51":0,"52":0,"56":1,"58":1,"59":0,"61":0,"62":0,"64":0,"116":0,"117":0,"119":0,"125":0,"126":0,"127":0,"132":0,"134":0,"136":0,"137":0,"138":0,"143":0,"144":0,"145":0,"146":0,"147":0,"149":0,"150":0,"153":0,"154":0,"159":0,"165":0,"166":0,"168":0,"171":0,"172":0,"174":0,"177":0,"178":0,"179":0,"181":0,"183":0,"184":0,"185":0,"187":0,"190":0,"191":0,"192":0,"194":0,"195":0,"197":0,"198":0,"199":0,"201":0,"204":0,"205":0,"206":0,"207":0,"210":0,"213":0,"214":0,"216":0,"219":0,"220":0,"221":0,"222":0,"224":0,"225":0,"227":0,"228":0,"229":0,"230":0,"231":0,"233":0,"236":0,"237":0,"240":0,"241":0,"243":0,"244":0,"245":0,"246":0,"247":0,"249":0,"251":0,"252":0,"254":0,"256":0,"258":0,"263":0,"264":0,"266":0,"267":0,"270":0,"271":0,"273":0,"274":0,"277":0,"278":0,"280":0,"281":0,"284":0,"285":0,"286":0,"288":0,"290":0,"292":0,"293":0,"296":0,"297":0,"303":0,"304":0,"305":0,"308":0,"309":0,"310":0,"311":0,"313":0,"314":0,"315":0,"317":0,"318":0,"323":0,"327":1,"328":0,"331":1,"332":0,"333":0,"334":0,"336":0,"339":1,"340":0,"341":0,"343":0,"346":1,"347":0,"348":0,"350":0,"351":0,"353":0,"354":0,"356":0,"358":0,"359":0,"360":0,"363":0,"366":0,"369":1,"370":0,"372":0,"373":0,"374":0,"376":0,"377":0,"378":0,"381":0,"382":0,"383":0,"385":0,"388":1,"389":0,"391":0,"392":0,"393":0,"395":0,"396":0,"398":0,"400":0,"401":0,"405":1,"406":0,"407":0,"408":0,"412":0,"417":0,"419":0,"420":0,"425":1,"426":0,"432":1,"433":0,"439":1,"440":0,"441":0,"443":0,"449":1,"450":0,"451":0,"453":0,"459":1,"460":0,"464":0,"467":1,"468":0,"470":0,"471":0,"472":0,"473":0,"474":0,"475":0,"476":0,"477":0,"479":0,"481":0,"482":0,"483":0,"484":0,"489":0,"490":0,"494":1,"495":0,"496":0,"497":0,"498":0,"500":0,"502":0,"505":1,"506":0,"507":0,"509":0,"512":1,"513":0,"514":0,"515":0,"517":0,"518":0,"522":0,"525":1,"526":0,"528":0,"532":0,"534":0,"538":0,"539":0,"540":0,"542":0,"544":0,"547":0,"548":0,"549":0,"551":0,"553":0,"554":0,"557":0,"559":0,"560":0,"561":0,"562":0,"563":0,"564":0,"565":0,"566":0,"567":0,"568":0,"569":0,"570":0,"571":0,"573":0,"574":0,"575":0,"576":0,"577":0,"581":0,"586":0,"587":0,"588":0,"589":0,"590":0,"592":0,"594":0,"595":0,"596":0,"597":0,"598":0,"599":0,"600":0,"601":0,"602":0,"603":0,"604":0,"608":0,"611":1,"612":0,"613":0,"614":0,"615":0,"616":0,"617":0,"618":0,"619":0,"620":0,"621":0,"623":0,"626":1,"627":0,"629":0,"630":0,"632":0,"633":0,"635":0,"636":0,"639":0,"641":0,"642":0,"643":0,"646":0,"647":0,"648":0,"649":0,"652":0,"653":0,"654":0,"657":0,"671":0,"672":0,"673":0,"675":0,"679":0,"681":0,"682":0,"686":0,"689":1,"690":0,"697":1,"698":0,"704":1,"705":0,"706":0,"713":1,"714":0,"715":0,"719":1,"720":0,"721":0,"723":0,"726":1,"727":0,"728":0,"729":0,"730":0,"733":0,"736":1,"737":0,"738":0,"739":0,"740":0,"742":0,"745":1}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/bin/cli.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/bin/cli.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":1,"22":1,"23":0,"24":1,"25":0,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":0,"37":1,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":0,"71":0,"72":1,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":1,"91":0,"92":1,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":1,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":1,"115":1,"116":1},"b":{"1":[0,1],"2":[0,0],"3":[0,1],"4":[0,1],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,1],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"f":{"1":0,"2":1,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"(anonymous_1)","line":18,"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":44}}},"2":{"name":"(anonymous_2)","line":29,"loc":{"start":{"line":29,"column":19},"end":{"line":29,"column":38}}},"3":{"name":"(anonymous_3)","line":33,"loc":{"start":{"line":33,"column":21},"end":{"line":33,"column":40}}},"4":{"name":"(anonymous_4)","line":37,"loc":{"start":{"line":37,"column":21},"end":{"line":37,"column":40}}},"5":{"name":"(anonymous_5)","line":41,"loc":{"start":{"line":41,"column":23},"end":{"line":41,"column":35}}},"6":{"name":"(anonymous_6)","line":52,"loc":{"start":{"line":52,"column":31},"end":{"line":52,"column":50}}},"7":{"name":"(anonymous_7)","line":56,"loc":{"start":{"line":56,"column":28},"end":{"line":56,"column":40}}},"8":{"name":"(anonymous_8)","line":60,"loc":{"start":{"line":60,"column":20},"end":{"line":60,"column":49}}},"9":{"name":"(anonymous_9)","line":75,"loc":{"start":{"line":75,"column":23},"end":{"line":75,"column":44}}},"10":{"name":"(anonymous_10)","line":85,"loc":{"start":{"line":85,"column":21},"end":{"line":85,"column":40}}},"11":{"name":"(anonymous_11)","line":114,"loc":{"start":{"line":114,"column":17},"end":{"line":114,"column":29}}},"12":{"name":"(anonymous_12)","line":119,"loc":{"start":{"line":119,"column":20},"end":{"line":119,"column":32}}},"13":{"name":"(anonymous_13)","line":130,"loc":{"start":{"line":130,"column":31},"end":{"line":130,"column":47}}},"14":{"name":"(anonymous_14)","line":134,"loc":{"start":{"line":134,"column":31},"end":{"line":134,"column":47}}},"15":{"name":"(anonymous_15)","line":138,"loc":{"start":{"line":138,"column":25},"end":{"line":138,"column":41}}},"16":{"name":"(anonymous_16)","line":156,"loc":{"start":{"line":156,"column":19},"end":{"line":156,"column":31}}},"17":{"name":"(anonymous_17)","line":160,"loc":{"start":{"line":160,"column":26},"end":{"line":160,"column":45}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":44}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":35}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":43}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":29}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":31}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":29}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":24}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":43}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":21}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":38}},"14":{"start":{"line":18,"column":0},"end":{"line":27,"column":2}},"15":{"start":{"line":19,"column":2},"end":{"line":19,"column":48}},"16":{"start":{"line":20,"column":2},"end":{"line":24,"column":16}},"17":{"start":{"line":21,"column":4},"end":{"line":23,"column":5}},"18":{"start":{"line":22,"column":6},"end":{"line":22,"column":74}},"19":{"start":{"line":26,"column":2},"end":{"line":26,"column":12}},"20":{"start":{"line":29,"column":0},"end":{"line":31,"column":2}},"21":{"start":{"line":30,"column":2},"end":{"line":30,"column":53}},"22":{"start":{"line":33,"column":0},"end":{"line":35,"column":2}},"23":{"start":{"line":34,"column":2},"end":{"line":34,"column":55}},"24":{"start":{"line":37,"column":0},"end":{"line":39,"column":2}},"25":{"start":{"line":38,"column":2},"end":{"line":38,"column":55}},"26":{"start":{"line":41,"column":0},"end":{"line":50,"column":2}},"27":{"start":{"line":42,"column":2},"end":{"line":42,"column":60}},"28":{"start":{"line":43,"column":2},"end":{"line":43,"column":26}},"29":{"start":{"line":44,"column":2},"end":{"line":44,"column":91}},"30":{"start":{"line":45,"column":2},"end":{"line":45,"column":69}},"31":{"start":{"line":46,"column":2},"end":{"line":46,"column":93}},"32":{"start":{"line":47,"column":2},"end":{"line":47,"column":16}},"33":{"start":{"line":48,"column":2},"end":{"line":48,"column":27}},"34":{"start":{"line":49,"column":2},"end":{"line":49,"column":97}},"35":{"start":{"line":52,"column":0},"end":{"line":54,"column":2}},"36":{"start":{"line":53,"column":2},"end":{"line":53,"column":169}},"37":{"start":{"line":56,"column":0},"end":{"line":58,"column":2}},"38":{"start":{"line":57,"column":2},"end":{"line":57,"column":97}},"39":{"start":{"line":60,"column":0},"end":{"line":73,"column":2}},"40":{"start":{"line":61,"column":2},"end":{"line":72,"column":5}},"41":{"start":{"line":68,"column":4},"end":{"line":68,"column":29}},"42":{"start":{"line":70,"column":4},"end":{"line":70,"column":30}},"43":{"start":{"line":71,"column":4},"end":{"line":71,"column":19}},"44":{"start":{"line":75,"column":0},"end":{"line":83,"column":2}},"45":{"start":{"line":76,"column":2},"end":{"line":81,"column":3}},"46":{"start":{"line":77,"column":4},"end":{"line":77,"column":27}},"47":{"start":{"line":78,"column":4},"end":{"line":78,"column":16}},"48":{"start":{"line":80,"column":4},"end":{"line":80,"column":28}},"49":{"start":{"line":82,"column":2},"end":{"line":82,"column":15}},"50":{"start":{"line":85,"column":0},"end":{"line":93,"column":2}},"51":{"start":{"line":86,"column":2},"end":{"line":91,"column":3}},"52":{"start":{"line":87,"column":4},"end":{"line":87,"column":27}},"53":{"start":{"line":88,"column":4},"end":{"line":88,"column":16}},"54":{"start":{"line":90,"column":4},"end":{"line":90,"column":38}},"55":{"start":{"line":92,"column":2},"end":{"line":92,"column":15}},"56":{"start":{"line":95,"column":0},"end":{"line":98,"column":1}},"57":{"start":{"line":96,"column":2},"end":{"line":96,"column":21}},"58":{"start":{"line":97,"column":2},"end":{"line":97,"column":17}},"59":{"start":{"line":100,"column":0},"end":{"line":105,"column":1}},"60":{"start":{"line":101,"column":2},"end":{"line":101,"column":33}},"61":{"start":{"line":102,"column":2},"end":{"line":102,"column":38}},"62":{"start":{"line":103,"column":2},"end":{"line":103,"column":35}},"63":{"start":{"line":104,"column":2},"end":{"line":104,"column":17}},"64":{"start":{"line":107,"column":0},"end":{"line":107,"column":23}},"65":{"start":{"line":109,"column":0},"end":{"line":109,"column":41}},"66":{"start":{"line":110,"column":0},"end":{"line":110,"column":46}},"67":{"start":{"line":111,"column":0},"end":{"line":111,"column":107}},"68":{"start":{"line":112,"column":0},"end":{"line":112,"column":78}},"69":{"start":{"line":114,"column":0},"end":{"line":117,"column":2}},"70":{"start":{"line":115,"column":2},"end":{"line":115,"column":61}},"71":{"start":{"line":116,"column":2},"end":{"line":116,"column":17}},"72":{"start":{"line":119,"column":0},"end":{"line":154,"column":2}},"73":{"start":{"line":120,"column":2},"end":{"line":120,"column":83}},"74":{"start":{"line":122,"column":2},"end":{"line":122,"column":70}},"75":{"start":{"line":123,"column":2},"end":{"line":126,"column":4}},"76":{"start":{"line":128,"column":2},"end":{"line":128,"column":59}},"77":{"start":{"line":130,"column":2},"end":{"line":132,"column":5}},"78":{"start":{"line":131,"column":4},"end":{"line":131,"column":31}},"79":{"start":{"line":134,"column":2},"end":{"line":136,"column":5}},"80":{"start":{"line":135,"column":4},"end":{"line":135,"column":31}},"81":{"start":{"line":138,"column":2},"end":{"line":151,"column":5}},"82":{"start":{"line":139,"column":4},"end":{"line":149,"column":5}},"83":{"start":{"line":140,"column":6},"end":{"line":140,"column":89}},"84":{"start":{"line":142,"column":6},"end":{"line":148,"column":7}},"85":{"start":{"line":143,"column":8},"end":{"line":143,"column":84}},"86":{"start":{"line":144,"column":8},"end":{"line":144,"column":89}},"87":{"start":{"line":146,"column":8},"end":{"line":147,"column":63}},"88":{"start":{"line":150,"column":4},"end":{"line":150,"column":23}},"89":{"start":{"line":153,"column":2},"end":{"line":153,"column":25}},"90":{"start":{"line":156,"column":0},"end":{"line":158,"column":2}},"91":{"start":{"line":157,"column":2},"end":{"line":157,"column":43}},"92":{"start":{"line":160,"column":0},"end":{"line":172,"column":2}},"93":{"start":{"line":161,"column":2},"end":{"line":171,"column":3}},"94":{"start":{"line":162,"column":4},"end":{"line":162,"column":19}},"95":{"start":{"line":163,"column":4},"end":{"line":167,"column":5}},"96":{"start":{"line":164,"column":6},"end":{"line":164,"column":22}},"97":{"start":{"line":166,"column":6},"end":{"line":166,"column":19}},"98":{"start":{"line":169,"column":4},"end":{"line":169,"column":63}},"99":{"start":{"line":170,"column":4},"end":{"line":170,"column":19}},"100":{"start":{"line":174,"column":0},"end":{"line":200,"column":1}},"101":{"start":{"line":175,"column":2},"end":{"line":195,"column":3}},"102":{"start":{"line":176,"column":4},"end":{"line":190,"column":5}},"103":{"start":{"line":177,"column":6},"end":{"line":182,"column":7}},"104":{"start":{"line":178,"column":8},"end":{"line":178,"column":34}},"105":{"start":{"line":180,"column":8},"end":{"line":180,"column":102}},"106":{"start":{"line":181,"column":8},"end":{"line":181,"column":52}},"107":{"start":{"line":184,"column":6},"end":{"line":184,"column":21}},"108":{"start":{"line":185,"column":6},"end":{"line":189,"column":7}},"109":{"start":{"line":186,"column":8},"end":{"line":186,"column":24}},"110":{"start":{"line":188,"column":8},"end":{"line":188,"column":21}},"111":{"start":{"line":192,"column":4},"end":{"line":192,"column":81}},"112":{"start":{"line":193,"column":4},"end":{"line":193,"column":23}},"113":{"start":{"line":194,"column":4},"end":{"line":194,"column":19}},"114":{"start":{"line":197,"column":2},"end":{"line":197,"column":74}},"115":{"start":{"line":198,"column":2},"end":{"line":198,"column":21}},"116":{"start":{"line":199,"column":2},"end":{"line":199,"column":17}}},"branchMap":{"1":{"line":16,"type":"cond-expr","locations":[{"start":{"line":16,"column":25},"end":{"line":16,"column":29}},{"start":{"line":16,"column":32},"end":{"line":16,"column":37}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"3":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":0},"end":{"line":95,"column":0}},{"start":{"line":95,"column":0},"end":{"line":95,"column":0}}]},"4":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":0},"end":{"line":100,"column":0}},{"start":{"line":100,"column":0},"end":{"line":100,"column":0}}]},"5":{"line":122,"type":"cond-expr","locations":[{"start":{"line":122,"column":51},"end":{"line":122,"column":60}},{"start":{"line":122,"column":63},"end":{"line":122,"column":68}}]},"6":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":4},"end":{"line":139,"column":4}},{"start":{"line":139,"column":4},"end":{"line":139,"column":4}}]},"7":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":2},"end":{"line":161,"column":2}},{"start":{"line":161,"column":2},"end":{"line":161,"column":2}}]},"8":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":4},"end":{"line":163,"column":4}},{"start":{"line":163,"column":4},"end":{"line":163,"column":4}}]},"9":{"line":163,"type":"binary-expr","locations":[{"start":{"line":163,"column":8},"end":{"line":163,"column":31}},{"start":{"line":163,"column":35},"end":{"line":163,"column":71}}]},"10":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":0},"end":{"line":174,"column":0}},{"start":{"line":174,"column":0},"end":{"line":174,"column":0}}]},"11":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":2},"end":{"line":175,"column":2}},{"start":{"line":175,"column":2},"end":{"line":175,"column":2}}]},"12":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":4},"end":{"line":176,"column":4}},{"start":{"line":176,"column":4},"end":{"line":176,"column":4}}]},"13":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":6},"end":{"line":177,"column":6}},{"start":{"line":177,"column":6},"end":{"line":177,"column":6}}]},"14":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":6},"end":{"line":185,"column":6}},{"start":{"line":185,"column":6},"end":{"line":185,"column":6}}]}},"code":["//#!/usr/bin/env node","","var fs = require('fs-extra');","var path = require('path');","var argv = require('minimist')(process.argv.slice(2));","var childProcess = require('child_process');","var inquirer = require('inquirer');","var prompt = inquirer.createPromptModule();","var exec = childProcess.exec;","var spawn = childProcess.spawn;","var fork = childProcess.fork;","","var command = argv._[0];","var commandRawArgs = process.argv.slice(3);","var arg1 = argv._[1];","var force = argv.force ? true : false;","","var parsePackageFile = function (moduleDir) {","  var packageFile = moduleDir + '/package.json';","  try {","    if (fs.existsSync(packageFile)) {","      return JSON.parse(fs.readFileSync(packageFile, {encoding: 'utf8'}));","    }","  } catch (e) {}","","  return {};","};","","var errorMessage = function (message) {","  console.log('\\033[0;31m[Error]\\033[0m ' + message);","};","","var successMessage = function (message) {","  console.log('\\033[0;32m[Success]\\033[0m ' + message);","};","","var warningMessage = function (message) {","  console.log('\\033[0;33m[Warning]\\033[0m ' + message);","};","","var showCorrectUsage = function () {","  console.log('Usage: socketcluster [options] [command]\\n');","  console.log('Options:');","  console.log(\"  -v            Get the version of the current SocketCluster installation\");","  console.log('  --help        Get info on how to use this command');","  console.log('  --force       Force all necessary directory modifications without prompts');","  console.log();","  console.log('Commands:');","  console.log('  create <appname>            Create a new boilerplate app in working directory');","};","","var failedToRemoveDirMessage = function (dirPath) {","  errorMessage('Failed to remove existing directory at ' + dirPath + '. This directory may be used by another program or you may not have the permission to remove it.');","};","","var failedToCreateMessage = function () {","  errorMessage('Failed to create necessary files. Please check your permissions and try again.');","};","","var promptConfirm = function (message, callback) {","  prompt([","    {","      type: 'confirm',","      message: message,","      name: 'result'","    }","  ]).then((answers) => {","    callback(answers.result);","  }).catch((err) => {","    errorMessage(err.message);","    process.exit();","  });","};","","var copyDirRecursive = function (src, dest) {","  try {","    fs.copySync(src, dest);","    return true;","  } catch (e) {","    failedToCreateMessage();","  }","  return false;","};","","var rmdirRecursive = function (dirname) {","  try {","    fs.removeSync(dirname);","    return true;","  } catch (e) {","    failedToRemoveDirMessage(dirname);","  }","  return false;","};","","if (argv.help) {","  showCorrectUsage();","  process.exit();","};","","if (argv.v) {","  var scDir = __dirname + '/../';","  var scPkg = parsePackageFile(scDir);","  console.log('v' + scPkg.version);","  process.exit();","};","","var wd = process.cwd();","","var sampleDir = __dirname + '/../sample';","var destDir = path.normalize(wd + '/' + arg1);","var clientFileSourcePath = path.normalize(destDir + '/node_modules/socketcluster-client/socketcluster.js');","var clientFileDestPath = path.normalize(destDir + '/public/socketcluster.js');","","var createFail = function () {","  errorMessage(\"Failed to create SocketCluster sample app.\");","  process.exit();","};","","var createSuccess = function () {","  console.log('Installing app dependencies using npm. This could take a while...');","","  var npmCommand = (process.platform === \"win32\" ? \"npm.cmd\" : \"npm\");","  var options = {","    cwd: destDir,","    maxBuffer: Infinity","  };","","  var npmProcess = spawn(npmCommand, ['install'], options);","","  npmProcess.stdout.on('data', function (data) {","    process.stdout.write(data);","  });","","  npmProcess.stderr.on('data', function (data) {","    process.stderr.write(data);","  });","","  npmProcess.on('close', function (code) {","    if (code) {","      errorMessage('Failed to install npm dependencies. Exited with code ' + code + '.');","    } else {","      try {","        fs.writeFileSync(clientFileDestPath, fs.readFileSync(clientFileSourcePath));","        successMessage(\"SocketCluster sample '\" + destDir + \"' was setup successfully.\");","      } catch (err) {","        warningMessage(\"Failed to copy file from '\" + clientFileSourcePath + \"' to '\" +","          clientFileDestPath + \"' - Try copying it manually.\");","      }","    }","    process.exit(code);","  });","","  npmProcess.stdin.end();","};","","var setupMessage = function () {","  console.log('Creating app structure...');","};","","var confirmReplaceSetup = function (confirm) {","  if (confirm) {","    setupMessage();","    if (rmdirRecursive(destDir) && copyDirRecursive(sampleDir, destDir)) {","      createSuccess();","    } else {","      createFail();","    }","  } else {","    errorMessage(\"SocketCluster 'create' action was aborted.\");","    process.exit();","  }","};","","if (command == 'create') {","  if (arg1) {","    if (fs.existsSync(destDir)) {","      if (force) {","        confirmReplaceSetup(true);","      } else {","        var message = \"There is already a directory at \" + destDir + '. Do you want to overwrite it?';","        promptConfirm(message, confirmReplaceSetup);","      }","    } else {","      setupMessage();","      if (copyDirRecursive(sampleDir, destDir)) {","        createSuccess();","      } else {","        createFail();","      }","    }","  } else {","    errorMessage(\"The 'create' command requires a valid <appname> as argument.\");","    showCorrectUsage();","    process.exit();","  }","} else {","  errorMessage(\"'\" + command + \"' is not a valid SocketCluster command.\");","  showCorrectUsage();","  process.exit();","}",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"13":1,"14":1,"15":1,"16":1,"18":1,"19":0,"20":0,"21":0,"22":0,"26":0,"29":1,"30":1,"33":1,"34":0,"37":1,"38":0,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"52":1,"53":0,"56":1,"57":0,"60":1,"61":0,"68":0,"70":0,"71":0,"75":1,"76":0,"77":0,"78":0,"80":0,"82":0,"85":1,"86":0,"87":0,"88":0,"90":0,"92":0,"95":1,"96":0,"97":0,"100":1,"101":0,"102":0,"103":0,"104":0,"107":1,"109":1,"110":1,"111":1,"112":1,"114":1,"115":0,"116":0,"119":1,"120":0,"122":0,"123":0,"128":0,"130":0,"131":0,"134":0,"135":0,"138":0,"139":0,"140":0,"142":0,"143":0,"144":0,"146":0,"150":0,"153":0,"156":1,"157":0,"160":1,"161":0,"162":0,"163":0,"164":0,"166":0,"169":0,"170":0,"174":1,"175":0,"176":0,"177":0,"178":0,"180":0,"181":0,"184":0,"185":0,"186":0,"188":0,"192":0,"193":0,"194":0,"197":1,"198":1,"199":1}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/lib/scworker.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/lib/scworker.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":1,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":1,"104":0,"105":1,"106":0,"107":0,"108":1,"109":0,"110":1,"111":0,"112":1,"113":0,"114":0,"115":0,"116":1,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":1,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":1,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":1,"171":0,"172":1,"173":0,"174":1,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":1,"191":0,"192":1,"193":0,"194":1,"195":0,"196":1,"197":0,"198":1,"199":0,"200":1,"201":0,"202":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},"fnMap":{"1":{"name":"(anonymous_1)","line":18,"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":34}}},"2":{"name":"(anonymous_2)","line":32,"loc":{"start":{"line":32,"column":32},"end":{"line":32,"column":44}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":44,"loc":{"start":{"line":44,"column":35},"end":{"line":44,"column":57}}},"5":{"name":"(anonymous_5)","line":51,"loc":{"start":{"line":51,"column":36},"end":{"line":51,"column":59}}},"6":{"name":"(anonymous_6)","line":56,"loc":{"start":{"line":56,"column":27},"end":{"line":56,"column":46}}},"7":{"name":"(anonymous_7)","line":98,"loc":{"start":{"line":98,"column":38},"end":{"line":98,"column":53}}},"8":{"name":"(anonymous_8)","line":107,"loc":{"start":{"line":107,"column":40},"end":{"line":107,"column":52}}},"9":{"name":"(anonymous_9)","line":129,"loc":{"start":{"line":129,"column":36},"end":{"line":129,"column":51}}},"10":{"name":"(anonymous_10)","line":171,"loc":{"start":{"line":171,"column":34},"end":{"line":171,"column":52}}},"11":{"name":"(anonymous_11)","line":174,"loc":{"start":{"line":174,"column":25},"end":{"line":174,"column":37}}},"12":{"name":"(anonymous_12)","line":180,"loc":{"start":{"line":180,"column":30},"end":{"line":180,"column":42}}},"13":{"name":"(anonymous_13)","line":189,"loc":{"start":{"line":189,"column":28},"end":{"line":189,"column":40}}},"14":{"name":"(anonymous_14)","line":194,"loc":{"start":{"line":194,"column":26},"end":{"line":194,"column":38}}},"15":{"name":"(anonymous_15)","line":198,"loc":{"start":{"line":198,"column":27},"end":{"line":198,"column":47}}},"16":{"name":"(anonymous_16)","line":204,"loc":{"start":{"line":204,"column":69},"end":{"line":204,"column":81}}},"17":{"name":"(anonymous_17)","line":208,"loc":{"start":{"line":208,"column":35},"end":{"line":208,"column":63}}},"18":{"name":"(anonymous_18)","line":212,"loc":{"start":{"line":212,"column":38},"end":{"line":212,"column":66}}},"19":{"name":"(anonymous_19)","line":215,"loc":{"start":{"line":215,"column":54},"end":{"line":215,"column":68}}},"20":{"name":"(anonymous_20)","line":220,"loc":{"start":{"line":220,"column":34},"end":{"line":220,"column":46}}},"21":{"name":"(anonymous_21)","line":225,"loc":{"start":{"line":225,"column":14},"end":{"line":225,"column":26}}},"22":{"name":"(anonymous_22)","line":239,"loc":{"start":{"line":239,"column":52},"end":{"line":239,"column":67}}},"23":{"name":"(anonymous_23)","line":256,"loc":{"start":{"line":256,"column":28},"end":{"line":256,"column":40}}},"24":{"name":"(anonymous_24)","line":281,"loc":{"start":{"line":281,"column":41},"end":{"line":281,"column":61}}},"25":{"name":"(anonymous_25)","line":310,"loc":{"start":{"line":310,"column":33},"end":{"line":310,"column":45}}},"26":{"name":"(anonymous_26)","line":314,"loc":{"start":{"line":314,"column":35},"end":{"line":314,"column":47}}},"27":{"name":"(anonymous_27)","line":318,"loc":{"start":{"line":318,"column":38},"end":{"line":318,"column":50}}},"28":{"name":"(anonymous_28)","line":340,"loc":{"start":{"line":340,"column":31},"end":{"line":340,"column":43}}},"29":{"name":"(anonymous_29)","line":348,"loc":{"start":{"line":348,"column":34},"end":{"line":348,"column":50}}},"30":{"name":"(anonymous_30)","line":356,"loc":{"start":{"line":356,"column":39},"end":{"line":356,"column":51}}},"31":{"name":"(anonymous_31)","line":360,"loc":{"start":{"line":360,"column":41},"end":{"line":360,"column":60}}},"32":{"name":"(anonymous_32)","line":364,"loc":{"start":{"line":364,"column":34},"end":{"line":364,"column":49}}},"33":{"name":"(anonymous_33)","line":368,"loc":{"start":{"line":368,"column":36},"end":{"line":368,"column":55}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":58}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":50}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":34}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":27}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":29}},"7":{"start":{"line":7,"column":0},"end":{"line":7,"column":23}},"8":{"start":{"line":8,"column":0},"end":{"line":8,"column":35}},"9":{"start":{"line":9,"column":0},"end":{"line":9,"column":29}},"10":{"start":{"line":10,"column":0},"end":{"line":10,"column":47}},"11":{"start":{"line":12,"column":0},"end":{"line":12,"column":36}},"12":{"start":{"line":13,"column":0},"end":{"line":13,"column":53}},"13":{"start":{"line":14,"column":0},"end":{"line":14,"column":53}},"14":{"start":{"line":15,"column":0},"end":{"line":15,"column":39}},"15":{"start":{"line":16,"column":0},"end":{"line":16,"column":47}},"16":{"start":{"line":18,"column":0},"end":{"line":40,"column":2}},"17":{"start":{"line":19,"column":2},"end":{"line":19,"column":18}},"18":{"start":{"line":21,"column":2},"end":{"line":21,"column":29}},"19":{"start":{"line":22,"column":2},"end":{"line":22,"column":33}},"20":{"start":{"line":23,"column":2},"end":{"line":23,"column":27}},"21":{"start":{"line":24,"column":2},"end":{"line":24,"column":29}},"22":{"start":{"line":25,"column":2},"end":{"line":25,"column":39}},"23":{"start":{"line":27,"column":2},"end":{"line":27,"column":34}},"24":{"start":{"line":29,"column":2},"end":{"line":29,"column":23}},"25":{"start":{"line":31,"column":2},"end":{"line":31,"column":38}},"26":{"start":{"line":32,"column":2},"end":{"line":34,"column":5}},"27":{"start":{"line":33,"column":4},"end":{"line":33,"column":45}},"28":{"start":{"line":36,"column":2},"end":{"line":36,"column":51}},"29":{"start":{"line":37,"column":2},"end":{"line":39,"column":5}},"30":{"start":{"line":38,"column":4},"end":{"line":38,"column":24}},"31":{"start":{"line":42,"column":0},"end":{"line":42,"column":59}},"32":{"start":{"line":44,"column":0},"end":{"line":49,"column":2}},"33":{"start":{"line":45,"column":2},"end":{"line":45,"column":25}},"34":{"start":{"line":47,"column":2},"end":{"line":47,"column":35}},"35":{"start":{"line":48,"column":2},"end":{"line":48,"column":41}},"36":{"start":{"line":51,"column":0},"end":{"line":54,"column":2}},"37":{"start":{"line":52,"column":2},"end":{"line":52,"column":27}},"38":{"start":{"line":53,"column":2},"end":{"line":53,"column":43}},"39":{"start":{"line":56,"column":0},"end":{"line":192,"column":2}},"40":{"start":{"line":57,"column":2},"end":{"line":57,"column":18}},"41":{"start":{"line":59,"column":2},"end":{"line":59,"column":20}},"42":{"start":{"line":61,"column":2},"end":{"line":65,"column":3}},"43":{"start":{"line":62,"column":4},"end":{"line":64,"column":5}},"44":{"start":{"line":63,"column":6},"end":{"line":63,"column":35}},"45":{"start":{"line":67,"column":2},"end":{"line":67,"column":28}},"46":{"start":{"line":68,"column":2},"end":{"line":68,"column":31}},"47":{"start":{"line":70,"column":2},"end":{"line":70,"column":24}},"48":{"start":{"line":71,"column":2},"end":{"line":71,"column":47}},"49":{"start":{"line":73,"column":2},"end":{"line":81,"column":3}},"50":{"start":{"line":74,"column":4},"end":{"line":80,"column":5}},"51":{"start":{"line":75,"column":6},"end":{"line":75,"column":51}},"52":{"start":{"line":77,"column":6},"end":{"line":79,"column":30}},"53":{"start":{"line":83,"column":2},"end":{"line":83,"column":57}},"54":{"start":{"line":85,"column":2},"end":{"line":85,"column":30}},"55":{"start":{"line":87,"column":2},"end":{"line":87,"column":29}},"56":{"start":{"line":88,"column":2},"end":{"line":88,"column":27}},"57":{"start":{"line":89,"column":2},"end":{"line":89,"column":20}},"58":{"start":{"line":90,"column":2},"end":{"line":90,"column":18}},"59":{"start":{"line":92,"column":2},"end":{"line":96,"column":5}},"60":{"start":{"line":98,"column":2},"end":{"line":106,"column":5}},"61":{"start":{"line":99,"column":4},"end":{"line":99,"column":14}},"62":{"start":{"line":100,"column":4},"end":{"line":104,"column":5}},"63":{"start":{"line":101,"column":6},"end":{"line":101,"column":35}},"64":{"start":{"line":103,"column":6},"end":{"line":103,"column":18}},"65":{"start":{"line":105,"column":4},"end":{"line":105,"column":43}},"66":{"start":{"line":107,"column":2},"end":{"line":109,"column":5}},"67":{"start":{"line":108,"column":4},"end":{"line":108,"column":47}},"68":{"start":{"line":110,"column":2},"end":{"line":110,"column":67}},"69":{"start":{"line":112,"column":2},"end":{"line":121,"column":3}},"70":{"start":{"line":113,"column":4},"end":{"line":113,"column":67}},"71":{"start":{"line":114,"column":4},"end":{"line":114,"column":83}},"72":{"start":{"line":116,"column":4},"end":{"line":120,"column":5}},"73":{"start":{"line":117,"column":6},"end":{"line":117,"column":73}},"74":{"start":{"line":119,"column":6},"end":{"line":119,"column":44}},"75":{"start":{"line":122,"column":2},"end":{"line":122,"column":69}},"76":{"start":{"line":123,"column":2},"end":{"line":123,"column":69}},"77":{"start":{"line":125,"column":2},"end":{"line":125,"column":68}},"78":{"start":{"line":127,"column":2},"end":{"line":127,"column":46}},"79":{"start":{"line":128,"column":2},"end":{"line":128,"column":45}},"80":{"start":{"line":129,"column":2},"end":{"line":136,"column":5}},"81":{"start":{"line":130,"column":4},"end":{"line":134,"column":5}},"82":{"start":{"line":131,"column":6},"end":{"line":131,"column":39}},"83":{"start":{"line":133,"column":6},"end":{"line":133,"column":18}},"84":{"start":{"line":135,"column":4},"end":{"line":135,"column":43}},"85":{"start":{"line":138,"column":2},"end":{"line":138,"column":56}},"86":{"start":{"line":140,"column":2},"end":{"line":161,"column":5}},"87":{"start":{"line":163,"column":2},"end":{"line":165,"column":3}},"88":{"start":{"line":164,"column":4},"end":{"line":164,"column":55}},"89":{"start":{"line":168,"column":2},"end":{"line":168,"column":39}},"90":{"start":{"line":169,"column":2},"end":{"line":169,"column":35}},"91":{"start":{"line":171,"column":2},"end":{"line":178,"column":5}},"92":{"start":{"line":173,"column":4},"end":{"line":173,"column":27}},"93":{"start":{"line":174,"column":4},"end":{"line":176,"column":7}},"94":{"start":{"line":175,"column":6},"end":{"line":175,"column":29}},"95":{"start":{"line":177,"column":4},"end":{"line":177,"column":45}},"96":{"start":{"line":180,"column":2},"end":{"line":182,"column":5}},"97":{"start":{"line":181,"column":4},"end":{"line":181,"column":47}},"98":{"start":{"line":184,"column":2},"end":{"line":184,"column":45}},"99":{"start":{"line":185,"column":2},"end":{"line":185,"column":61}},"100":{"start":{"line":187,"column":2},"end":{"line":187,"column":39}},"101":{"start":{"line":189,"column":2},"end":{"line":191,"column":5}},"102":{"start":{"line":190,"column":4},"end":{"line":190,"column":32}},"103":{"start":{"line":194,"column":0},"end":{"line":196,"column":2}},"104":{"start":{"line":195,"column":2},"end":{"line":195,"column":22}},"105":{"start":{"line":198,"column":0},"end":{"line":201,"column":2}},"106":{"start":{"line":199,"column":2},"end":{"line":199,"column":24}},"107":{"start":{"line":200,"column":2},"end":{"line":200,"column":34}},"108":{"start":{"line":204,"column":0},"end":{"line":206,"column":2}},"109":{"start":{"line":205,"column":2},"end":{"line":205,"column":26}},"110":{"start":{"line":208,"column":0},"end":{"line":210,"column":2}},"111":{"start":{"line":209,"column":2},"end":{"line":209,"column":42}},"112":{"start":{"line":212,"column":0},"end":{"line":218,"column":2}},"113":{"start":{"line":213,"column":2},"end":{"line":213,"column":51}},"114":{"start":{"line":215,"column":2},"end":{"line":217,"column":5}},"115":{"start":{"line":216,"column":4},"end":{"line":216,"column":28}},"116":{"start":{"line":220,"column":0},"end":{"line":254,"column":2}},"117":{"start":{"line":221,"column":2},"end":{"line":221,"column":18}},"118":{"start":{"line":223,"column":2},"end":{"line":223,"column":29}},"119":{"start":{"line":225,"column":2},"end":{"line":233,"column":4}},"120":{"start":{"line":226,"column":4},"end":{"line":232,"column":5}},"121":{"start":{"line":227,"column":6},"end":{"line":227,"column":86}},"122":{"start":{"line":228,"column":11},"end":{"line":232,"column":5}},"123":{"start":{"line":229,"column":6},"end":{"line":229,"column":63}},"124":{"start":{"line":231,"column":6},"end":{"line":231,"column":49}},"125":{"start":{"line":235,"column":2},"end":{"line":235,"column":64}},"126":{"start":{"line":236,"column":2},"end":{"line":253,"column":3}},"127":{"start":{"line":237,"column":4},"end":{"line":237,"column":32}},"128":{"start":{"line":239,"column":4},"end":{"line":250,"column":7}},"129":{"start":{"line":240,"column":6},"end":{"line":249,"column":7}},"130":{"start":{"line":241,"column":8},"end":{"line":241,"column":130}},"131":{"start":{"line":243,"column":8},"end":{"line":243,"column":31}},"132":{"start":{"line":244,"column":8},"end":{"line":248,"column":9}},"133":{"start":{"line":245,"column":10},"end":{"line":245,"column":20}},"134":{"start":{"line":247,"column":10},"end":{"line":247,"column":18}},"135":{"start":{"line":252,"column":4},"end":{"line":252,"column":12}},"136":{"start":{"line":256,"column":0},"end":{"line":279,"column":2}},"137":{"start":{"line":257,"column":2},"end":{"line":257,"column":18}},"138":{"start":{"line":259,"column":2},"end":{"line":259,"column":29}},"139":{"start":{"line":260,"column":2},"end":{"line":260,"column":27}},"140":{"start":{"line":261,"column":2},"end":{"line":261,"column":20}},"141":{"start":{"line":262,"column":2},"end":{"line":262,"column":18}},"142":{"start":{"line":264,"column":2},"end":{"line":266,"column":3}},"143":{"start":{"line":265,"column":4},"end":{"line":265,"column":40}},"144":{"start":{"line":267,"column":2},"end":{"line":267,"column":106}},"145":{"start":{"line":270,"column":2},"end":{"line":273,"column":3}},"146":{"start":{"line":271,"column":6},"end":{"line":271,"column":72}},"147":{"start":{"line":272,"column":6},"end":{"line":272,"column":37}},"148":{"start":{"line":275,"column":2},"end":{"line":275,"column":72}},"149":{"start":{"line":276,"column":2},"end":{"line":276,"column":35}},"150":{"start":{"line":278,"column":2},"end":{"line":278,"column":22}},"151":{"start":{"line":281,"column":0},"end":{"line":308,"column":2}},"152":{"start":{"line":282,"column":2},"end":{"line":282,"column":18}},"153":{"start":{"line":284,"column":2},"end":{"line":284,"column":27}},"154":{"start":{"line":286,"column":2},"end":{"line":286,"column":44}},"155":{"start":{"line":288,"column":2},"end":{"line":288,"column":52}},"156":{"start":{"line":290,"column":2},"end":{"line":298,"column":3}},"157":{"start":{"line":291,"column":4},"end":{"line":291,"column":26}},"158":{"start":{"line":292,"column":4},"end":{"line":296,"column":5}},"159":{"start":{"line":293,"column":6},"end":{"line":293,"column":53}},"160":{"start":{"line":295,"column":6},"end":{"line":295,"column":39}},"161":{"start":{"line":297,"column":4},"end":{"line":297,"column":48}},"162":{"start":{"line":299,"column":2},"end":{"line":307,"column":3}},"163":{"start":{"line":300,"column":4},"end":{"line":300,"column":53}},"164":{"start":{"line":301,"column":4},"end":{"line":301,"column":51}},"165":{"start":{"line":302,"column":4},"end":{"line":302,"column":47}},"166":{"start":{"line":303,"column":9},"end":{"line":307,"column":3}},"167":{"start":{"line":304,"column":4},"end":{"line":304,"column":49}},"168":{"start":{"line":305,"column":4},"end":{"line":305,"column":47}},"169":{"start":{"line":306,"column":4},"end":{"line":306,"column":43}},"170":{"start":{"line":310,"column":0},"end":{"line":312,"column":2}},"171":{"start":{"line":311,"column":2},"end":{"line":311,"column":23}},"172":{"start":{"line":314,"column":0},"end":{"line":316,"column":2}},"173":{"start":{"line":315,"column":2},"end":{"line":315,"column":25}},"174":{"start":{"line":318,"column":0},"end":{"line":338,"column":2}},"175":{"start":{"line":319,"column":2},"end":{"line":319,"column":66}},"176":{"start":{"line":320,"column":2},"end":{"line":320,"column":59}},"177":{"start":{"line":321,"column":2},"end":{"line":321,"column":55}},"178":{"start":{"line":322,"column":2},"end":{"line":322,"column":29}},"179":{"start":{"line":323,"column":2},"end":{"line":323,"column":27}},"180":{"start":{"line":325,"column":2},"end":{"line":325,"column":60}},"181":{"start":{"line":327,"column":2},"end":{"line":337,"column":3}},"182":{"start":{"line":328,"column":4},"end":{"line":328,"column":44}},"183":{"start":{"line":329,"column":4},"end":{"line":336,"column":5}},"184":{"start":{"line":330,"column":6},"end":{"line":330,"column":63}},"185":{"start":{"line":331,"column":6},"end":{"line":331,"column":67}},"186":{"start":{"line":332,"column":6},"end":{"line":332,"column":68}},"187":{"start":{"line":333,"column":6},"end":{"line":333,"column":52}},"188":{"start":{"line":334,"column":6},"end":{"line":334,"column":35}},"189":{"start":{"line":335,"column":6},"end":{"line":335,"column":21}},"190":{"start":{"line":340,"column":0},"end":{"line":346,"column":2}},"191":{"start":{"line":341,"column":2},"end":{"line":345,"column":4}},"192":{"start":{"line":348,"column":0},"end":{"line":354,"column":2}},"193":{"start":{"line":349,"column":2},"end":{"line":353,"column":5}},"194":{"start":{"line":356,"column":0},"end":{"line":358,"column":2}},"195":{"start":{"line":357,"column":2},"end":{"line":357,"column":35}},"196":{"start":{"line":360,"column":0},"end":{"line":362,"column":2}},"197":{"start":{"line":361,"column":2},"end":{"line":361,"column":43}},"198":{"start":{"line":364,"column":0},"end":{"line":366,"column":2}},"199":{"start":{"line":365,"column":2},"end":{"line":365,"column":35}},"200":{"start":{"line":368,"column":0},"end":{"line":370,"column":2}},"201":{"start":{"line":369,"column":2},"end":{"line":369,"column":41}},"202":{"start":{"line":372,"column":0},"end":{"line":372,"column":26}}},"branchMap":{"1":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":62,"column":4}},{"start":{"line":62,"column":4},"end":{"line":62,"column":4}}]},"2":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":2},"end":{"line":73,"column":2}},{"start":{"line":73,"column":2},"end":{"line":73,"column":2}}]},"3":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":6},"end":{"line":73,"column":34}},{"start":{"line":73,"column":38},"end":{"line":73,"column":52}}]},"4":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":4},"end":{"line":100,"column":4}},{"start":{"line":100,"column":4},"end":{"line":100,"column":4}}]},"5":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":2},"end":{"line":112,"column":2}},{"start":{"line":112,"column":2},"end":{"line":112,"column":2}}]},"6":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":4},"end":{"line":116,"column":4}},{"start":{"line":116,"column":4},"end":{"line":116,"column":4}}]},"7":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":4},"end":{"line":130,"column":4}},{"start":{"line":130,"column":4},"end":{"line":130,"column":4}}]},"8":{"line":138,"type":"cond-expr","locations":[{"start":{"line":138,"column":50},"end":{"line":138,"column":51}},{"start":{"line":138,"column":54},"end":{"line":138,"column":55}}]},"9":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":2},"end":{"line":163,"column":2}},{"start":{"line":163,"column":2},"end":{"line":163,"column":2}}]},"10":{"line":226,"type":"if","locations":[{"start":{"line":226,"column":4},"end":{"line":226,"column":4}},{"start":{"line":226,"column":4},"end":{"line":226,"column":4}}]},"11":{"line":228,"type":"if","locations":[{"start":{"line":228,"column":11},"end":{"line":228,"column":11}},{"start":{"line":228,"column":11},"end":{"line":228,"column":11}}]},"12":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":2},"end":{"line":236,"column":2}},{"start":{"line":236,"column":2},"end":{"line":236,"column":2}}]},"13":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":6},"end":{"line":240,"column":6}},{"start":{"line":240,"column":6},"end":{"line":240,"column":6}}]},"14":{"line":244,"type":"if","locations":[{"start":{"line":244,"column":8},"end":{"line":244,"column":8}},{"start":{"line":244,"column":8},"end":{"line":244,"column":8}}]},"15":{"line":264,"type":"if","locations":[{"start":{"line":264,"column":2},"end":{"line":264,"column":2}},{"start":{"line":264,"column":2},"end":{"line":264,"column":2}}]},"16":{"line":270,"type":"if","locations":[{"start":{"line":270,"column":2},"end":{"line":270,"column":2}},{"start":{"line":270,"column":2},"end":{"line":270,"column":2}}]},"17":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":2},"end":{"line":290,"column":2}},{"start":{"line":290,"column":2},"end":{"line":290,"column":2}}]},"18":{"line":292,"type":"if","locations":[{"start":{"line":292,"column":4},"end":{"line":292,"column":4}},{"start":{"line":292,"column":4},"end":{"line":292,"column":4}}]},"19":{"line":299,"type":"if","locations":[{"start":{"line":299,"column":2},"end":{"line":299,"column":2}},{"start":{"line":299,"column":2},"end":{"line":299,"column":2}}]},"20":{"line":303,"type":"if","locations":[{"start":{"line":303,"column":9},"end":{"line":303,"column":9}},{"start":{"line":303,"column":9},"end":{"line":303,"column":9}}]},"21":{"line":327,"type":"if","locations":[{"start":{"line":327,"column":2},"end":{"line":327,"column":2}},{"start":{"line":327,"column":2},"end":{"line":327,"column":2}}]},"22":{"line":329,"type":"if","locations":[{"start":{"line":329,"column":4},"end":{"line":329,"column":4}},{"start":{"line":329,"column":4},"end":{"line":329,"column":4}}]}},"code":["var socketClusterServer = require('socketcluster-server');","var EventEmitter = require('events').EventEmitter;","var crypto = require('crypto');","var domain = require('sc-domain');","var http = require('http');","var https = require('https');","var fs = require('fs');","var base64id = require('base64id');","var async = require('async');","var AuthEngine = require('sc-auth').AuthEngine;","","var scErrors = require('sc-errors');","var InvalidActionError = scErrors.InvalidActionError;","var ResourceLimitError = scErrors.ResourceLimitError;","var BrokerError = scErrors.BrokerError;","var HTTPServerError = scErrors.HTTPServerError;","","var SCWorker = function (options) {","  var self = this;","","  this.EVENT_ERROR = 'error';","  this.EVENT_WARNING = 'warning';","  this.EVENT_EXIT = 'exit';","  this.EVENT_READY = 'ready';","  this.EVENT_CONNECTION = 'connection';","","  this.MIDDLEWARE_START = 'start';","","  this.type = 'worker';","","  this._errorDomain = domain.create();","  this._errorDomain.on('error', function () {","    self.errorHandler.apply(self, arguments);","  });","","  this.start = this._errorDomain.bind(this._start);","  this._errorDomain.run(function () {","    self._init(options);","  });","};","","SCWorker.prototype = Object.create(EventEmitter.prototype);","","SCWorker.prototype.setAuthEngine = function (authEngine) {","  this.auth = authEngine;","","  this.httpServer.auth = this.auth;","  this.scServer.setAuthEngine(this.auth);","};","","SCWorker.prototype.setCodecEngine = function (codecEngine) {","  this.codec = codecEngine;","  this.scServer.setCodecEngine(this.codec);","};","","SCWorker.prototype._init = function (options) {","  var self = this;","","  this.options = {};","","  for (var i in options) {","    if (options.hasOwnProperty(i)) {","      this.options[i] = options[i];","    }","  }","","  this.id = this.options.id;","  this.isLeader = this.id == 0;","","  this._middleware = {};","  this._middleware[this.MIDDLEWARE_START] = [];","","  if (this.options.downgradeToUser && process.setuid) {","    try {","      process.setuid(this.options.downgradeToUser);","    } catch (err) {","      this._errorDomain.emit('error', new InvalidActionError('Could not downgrade to user \"' + this.options.downgradeToUser +","        '\" - Either this user does not exist or the current process does not have the permission' +","        ' to switch to it.'));","    }","  }","","  this.brokerEngine = require(this.options.brokerEngine);","","  this._paths = options.paths;","","  this._httpRequestCount = 0;","  this._wsRequestCount = 0;","  this._httpRPM = 0;","  this._wsRPM = 0;","","  this.brokerEngineClient = new this.brokerEngine.Client({","    brokers: this.options.brokers,","    secretKey: this.options.secretKey,","    pubSubBatchDuration: this.options.pubSubBatchDuration","  });","","  this.brokerEngineClient.on('error', function (err) {","    var error;","    if (typeof err == 'string') {","      error = new BrokerError(err);","    } else {","      error = err;","    }","    self._errorDomain.emit('error', error);","  });","  this.brokerEngineClient.on('warning', function () {","    self.warningHandler.apply(self, arguments);","  });","  this.exchange = this.global = this.brokerEngineClient.exchange();","","  if (this.options.httpServerModule) {","    var httpServerFactory = require(this.options.httpServerModule);","    this.httpServer = httpServerFactory.createServer(this.options.protocolOptions);","  } else {","    if (this.options.protocol == 'https') {","      this.httpServer = https.createServer(this.options.protocolOptions);","    } else {","      this.httpServer = http.createServer();","    }","  }","  this.httpServer.on('request', this._httpRequestHandler.bind(this));","  this.httpServer.on('upgrade', this._httpRequestHandler.bind(this));","","  this.httpServer.exchange = this.httpServer.global = this.exchange;","","  var httpServerErrorDomain = domain.create();","  httpServerErrorDomain.add(this.httpServer);","  httpServerErrorDomain.on('error', function (err) {","    if (typeof err == 'string') {","      error = new HTTPServerError(err);","    } else {","      error = err;","    }","    self._errorDomain.emit('error', error);","  });","","  var secure = this.options.protocol == 'https' ? 1 : 0;","","  this.scServer = socketClusterServer.attach(this.httpServer, {","    brokerEngine: this.brokerEngineClient,","    wsEngine: this._paths.wsEnginePath,","    allowClientPublish: this.options.allowClientPublish,","    handshakeTimeout: this.options.handshakeTimeout,","    ackTimeout: this.options.ackTimeout,","    pingTimeout: this.options.pingTimeout,","    pingInterval: this.options.pingInterval,","    origins: this.options.origins,","    appName: this.options.appName,","    path: this.options.path,","    authKey: this.options.authKey,","    authPrivateKey: this.options.authPrivateKey,","    authPublicKey: this.options.authPublicKey,","    authAlgorithm: this.options.authAlgorithm,","    authSignAsync: this.options.authSignAsync,","    authVerifyAsync: this.options.authVerifyAsync,","    authDefaultExpiry: this.options.authDefaultExpiry,","    middlewareEmitWarnings: this.options.middlewareEmitWarnings,","    socketChannelLimit: this.options.socketChannelLimit,","    perMessageDeflate: this.options.perMessageDeflate","  });","","  if (this.brokerEngineClient.setSCServer) {","    this.brokerEngineClient.setSCServer(this.scServer);","  }","","  // Default authentication engine","  this.setAuthEngine(new AuthEngine());","  this.codec = this.scServer.codec;","","  this.scServer.on('_connection', function (socket) {","    // The connection event counts as a WS request","    self._wsRequestCount++;","    socket.on('message', function () {","      self._wsRequestCount++;","    });","    self.emit(self.EVENT_CONNECTION, socket);","  });","","  this.scServer.on('warning', function () {","    self.warningHandler.apply(self, arguments);","  });","","  this._socketPath = this.scServer.getPath();","  this._socketPathRegex = new RegExp('^' + this._socketPath);","","  this._errorDomain.add(this.scServer);","","  this.scServer.on('ready', function () {","    self.emit(self.EVENT_READY);","  });","};","","SCWorker.prototype.open = function () {","  this._startServer();","};","","SCWorker.prototype.close = function (callback) {","  this.scServer.close();","  this.httpServer.close(callback);","};","","// getSocketURL is deprecated","SCWorker.prototype.getSocketPath = SCWorker.prototype.getSocketURL = function () {","  return this._socketPath;","};","","SCWorker.prototype.addMiddleware = function (type, middleware) {","  this._middleware[type].push(middleware);","};","","SCWorker.prototype.removeMiddleware = function (type, middleware) {","  var middlewareFunctions = this._middleware[type];","","  this._middleware[type] = middlewareFunctions.filter(function (fn) {","    return fn != middleware;","  });","};","","SCWorker.prototype._startServer = function () {","  var self = this;","","  var options = this.options;","","  var start = function () {","    if (options.tcpSynBacklog != null) {","      self.httpServer.listen(options.sourcePort, options.host, options.tcpSynBacklog);","    } else if (options.host != null) {","      self.httpServer.listen(options.sourcePort, options.host);","    } else {","      self.httpServer.listen(options.sourcePort);","    }","  };","","  var startMiddleware = this._middleware[this.MIDDLEWARE_START];","  if (startMiddleware.length) {","    var callbackInvoked = false;","","    async.applyEachSeries(startMiddleware, options, function (err) {","      if (callbackInvoked) {","        self.emit('warning', new InvalidActionError('Callback for ' + self.MIDDLEWARE_START + ' middleware was already invoked'));","      } else {","        callbackInvoked = true;","        if (err) {","          throw err;","        } else {","          start();","        }","      }","    });","  } else {","    start();","  }","};","","SCWorker.prototype._start = function () {","  var self = this;","","  this._httpRequestCount = 0;","  this._wsRequestCount = 0;","  this._httpRPM = 0;","  this._wsRPM = 0;","","  if (this._statusInterval != null) {","    clearInterval(this._statusInterval);","  }","  this._statusInterval = setInterval(this._calculateStatus.bind(this), this.options.workerStatusInterval);","","  // Run the initController to initialize the global context","  if (this._paths.appInitControllerPath != null) {","      this._initController = require(this._paths.appInitControllerPath);","      this._initController.run(this);","  }","","  this._workerController = require(this._paths.appWorkerControllerPath);","  this._workerController.run(this);","","  this._startServer();","};","","SCWorker.prototype._httpRequestHandler = function (req, res) {","  var self = this;","","  this._httpRequestCount++;","","  req.exchange = req.global = this.exchange;","","  var forwardedFor = req.headers['x-forwarded-for'];","","  if (forwardedFor) {","    var forwardedClientIP;","    if (forwardedFor.indexOf(',') > -1) {","      forwardedClientIP = forwardedFor.split(',')[0];","    } else {","      forwardedClientIP = forwardedFor;","    }","    req.forwardedForAddress = forwardedClientIP;","  }","  if (req.connection) {","    req.remoteAddress = req.connection.remoteAddress;","    req.remoteFamily = req.connection.remoteFamily;","    req.remotePort = req.connection.remotePort;","  } else if (req.socket) {","    req.remoteAddress = req.socket.remoteAddress;","    req.remoteFamily = req.socket.remoteFamily;","    req.remotePort = req.socket.remotePort;","  }","};","","SCWorker.prototype.getSCServer = function () {","  return this.scServer;","};","","SCWorker.prototype.getHTTPServer = function () {","  return this.httpServer;","};","","SCWorker.prototype._calculateStatus = function () {","  var perMinuteFactor = 60000 / this.options.workerStatusInterval;","  this._httpRPM = this._httpRequestCount * perMinuteFactor;","  this._wsRPM = this._wsRequestCount * perMinuteFactor;","  this._httpRequestCount = 0;","  this._wsRequestCount = 0;","","  var memThreshold = this.options.killWorkerMemoryThreshold;","","  if (memThreshold != null) {","    var memoryUsage = process.memoryUsage();","    if (memoryUsage.heapUsed > memThreshold) {","      var message = 'Worker killed itself because its memory ';","      message += 'usage of ' + memoryUsage.heapUsed + ' exceeded ';","      message += 'the killWorkerMemoryThreshold of ' + memThreshold;","      var warning = new ResourceLimitError(message);","      this.warningHandler(warning);","      process.exit();","    }","  }","};","","SCWorker.prototype.getStatus = function () {","  return {","    clientCount: this.scServer.clientsCount,","    httpRPM: this._httpRPM,","    wsRPM: this._wsRPM","  };","};","","SCWorker.prototype.sendToMaster = function (data) {","  process.send({","    type: 'workerMessage',","    data: data,","    workerId: this.id","  });","};","","SCWorker.prototype.handleMasterEvent = function () {","  this.emit.apply(this, arguments);","};","","SCWorker.prototype.handleMasterMessage = function (message) {","  this.emit('masterMessage', message.data);","};","","SCWorker.prototype.errorHandler = function (err) {","  this.emit(this.EVENT_ERROR, err);","};","","SCWorker.prototype.warningHandler = function (warning) {","  this.emit(this.EVENT_WARNING, warning);","};","","module.exports = SCWorker;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"12":1,"13":1,"14":1,"15":1,"16":1,"18":1,"19":0,"21":0,"22":0,"23":0,"24":0,"25":0,"27":0,"29":0,"31":0,"32":0,"33":0,"36":0,"37":0,"38":0,"42":1,"44":1,"45":0,"47":0,"48":0,"51":1,"52":0,"53":0,"56":1,"57":0,"59":0,"61":0,"62":0,"63":0,"67":0,"68":0,"70":0,"71":0,"73":0,"74":0,"75":0,"77":0,"83":0,"85":0,"87":0,"88":0,"89":0,"90":0,"92":0,"98":0,"99":0,"100":0,"101":0,"103":0,"105":0,"107":0,"108":0,"110":0,"112":0,"113":0,"114":0,"116":0,"117":0,"119":0,"122":0,"123":0,"125":0,"127":0,"128":0,"129":0,"130":0,"131":0,"133":0,"135":0,"138":0,"140":0,"163":0,"164":0,"168":0,"169":0,"171":0,"173":0,"174":0,"175":0,"177":0,"180":0,"181":0,"184":0,"185":0,"187":0,"189":0,"190":0,"194":1,"195":0,"198":1,"199":0,"200":0,"204":1,"205":0,"208":1,"209":0,"212":1,"213":0,"215":0,"216":0,"220":1,"221":0,"223":0,"225":0,"226":0,"227":0,"228":0,"229":0,"231":0,"235":0,"236":0,"237":0,"239":0,"240":0,"241":0,"243":0,"244":0,"245":0,"247":0,"252":0,"256":1,"257":0,"259":0,"260":0,"261":0,"262":0,"264":0,"265":0,"267":0,"270":0,"271":0,"272":0,"275":0,"276":0,"278":0,"281":1,"282":0,"284":0,"286":0,"288":0,"290":0,"291":0,"292":0,"293":0,"295":0,"297":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"310":1,"311":0,"314":1,"315":0,"318":1,"319":0,"320":0,"321":0,"322":0,"323":0,"325":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"340":1,"341":0,"348":1,"349":0,"356":1,"357":0,"360":1,"361":0,"364":1,"365":0,"368":1,"369":0,"372":1}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster-server/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster-server/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":33,"loc":{"start":{"line":33,"column":24},"end":{"line":33,"column":53}}},"2":{"name":"(anonymous_2)","line":39,"loc":{"start":{"line":39,"column":33},"end":{"line":39,"column":53}}},"3":{"name":"(anonymous_3)","line":60,"loc":{"start":{"line":60,"column":24},"end":{"line":60,"column":51}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":27}},"2":{"start":{"line":13,"column":0},"end":{"line":13,"column":48}},"3":{"start":{"line":21,"column":0},"end":{"line":21,"column":48}},"4":{"start":{"line":33,"column":0},"end":{"line":49,"column":2}},"5":{"start":{"line":34,"column":2},"end":{"line":37,"column":3}},"6":{"start":{"line":35,"column":4},"end":{"line":35,"column":17}},"7":{"start":{"line":36,"column":4},"end":{"line":36,"column":17}},"8":{"start":{"line":39,"column":2},"end":{"line":42,"column":5}},"9":{"start":{"line":40,"column":4},"end":{"line":40,"column":23}},"10":{"start":{"line":41,"column":4},"end":{"line":41,"column":31}},"11":{"start":{"line":44,"column":2},"end":{"line":44,"column":54}},"12":{"start":{"line":45,"column":2},"end":{"line":45,"column":29}},"13":{"start":{"line":46,"column":2},"end":{"line":46,"column":26}},"14":{"start":{"line":48,"column":2},"end":{"line":48,"column":16}},"15":{"start":{"line":60,"column":0},"end":{"line":67,"column":2}},"16":{"start":{"line":61,"column":2},"end":{"line":63,"column":3}},"17":{"start":{"line":62,"column":4},"end":{"line":62,"column":17}},"18":{"start":{"line":64,"column":2},"end":{"line":64,"column":30}},"19":{"start":{"line":65,"column":2},"end":{"line":65,"column":65}},"20":{"start":{"line":66,"column":2},"end":{"line":66,"column":29}}},"branchMap":{"1":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":2},"end":{"line":34,"column":2}},{"start":{"line":34,"column":2},"end":{"line":34,"column":2}}]},"2":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":2},"end":{"line":61,"column":2}},{"start":{"line":61,"column":2},"end":{"line":61,"column":2}}]}},"code":["/**"," * Module dependencies."," */","","var http = require('http');","","/**"," * Expose SCServer constructor."," *"," * @api public"," */","","module.exports.SCServer = require('./scserver');","","/**"," * Expose SCSocket constructor."," *"," * @api public"," */","","module.exports.SCSocket = require('./scsocket');","","/**"," * Creates an http.Server exclusively used for WS upgrades."," *"," * @param {Number} port"," * @param {Function} callback"," * @param {Object} options"," * @return {SCServer} websocket cluster server"," * @api public"," */","","module.exports.listen = function (port, options, fn) {","  if ('function' == typeof options) {","    fn = options;","    options = {};","  }","","  var server = http.createServer(function (req, res) {","    res.writeHead(501);","    res.end('Not Implemented');","  });","","  var engine = module.exports.attach(server, options);","  engine.httpServer = server;","  server.listen(port, fn);","","  return engine;","};","","/**"," * Captures upgrade requests for a http.Server."," *"," * @param {http.Server} server"," * @param {Object} options"," * @return {SCServer} websocket cluster server"," * @api public"," */","","module.exports.attach = function (server, options) {","  if (options == null) {","    options = {};","  }","  options.httpServer = server;","  var socketClusterServer = new module.exports.SCServer(options);","  return socketClusterServer;","};",""],"l":{"5":1,"13":1,"21":1,"33":1,"34":0,"35":0,"36":0,"39":0,"40":0,"41":0,"44":0,"45":0,"46":0,"48":0,"60":1,"61":0,"62":0,"64":0,"65":0,"66":0}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster-server/scserver.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster-server/scserver.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":1,"98":0,"99":1,"100":0,"101":1,"102":0,"103":0,"104":0,"105":1,"106":0,"107":1,"108":0,"109":1,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":1,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":1,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":1,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":1,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":1,"176":0,"177":0,"178":1,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":1,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":1,"288":0,"289":0,"290":1,"291":0,"292":1,"293":0,"294":1,"295":0,"296":1,"297":0,"298":0,"299":0,"300":1,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":1,"333":0,"334":1,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":1,"342":0,"343":0,"344":0,"345":0,"346":0,"347":1,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":0,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":0,"394":0,"395":0,"396":0,"397":0,"398":0,"399":0,"400":0,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":0,"408":0,"409":0,"410":0,"411":0,"412":1,"413":0,"414":0,"415":0,"416":0,"417":0,"418":0,"419":0,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":1,"430":0,"431":0,"432":0,"433":0,"434":0,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"444":0,"445":0,"446":0,"447":0,"448":0,"449":0,"450":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0],"104":[0,0],"105":[0,0],"106":[0,0],"107":[0,0],"108":[0,0],"109":[0,0],"110":[0,0],"111":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0},"fnMap":{"1":{"name":"(anonymous_1)","line":25,"loc":{"start":{"line":25,"column":15},"end":{"line":25,"column":34}}},"2":{"name":"(anonymous_2)","line":90,"loc":{"start":{"line":90,"column":34},"end":{"line":90,"column":46}}},"3":{"name":"(anonymous_3)","line":168,"loc":{"start":{"line":168,"column":35},"end":{"line":168,"column":57}}},"4":{"name":"(anonymous_4)","line":172,"loc":{"start":{"line":172,"column":36},"end":{"line":172,"column":59}}},"5":{"name":"(anonymous_5)","line":176,"loc":{"start":{"line":176,"column":40},"end":{"line":176,"column":57}}},"6":{"name":"(anonymous_6)","line":183,"loc":{"start":{"line":183,"column":40},"end":{"line":183,"column":57}}},"7":{"name":"(anonymous_7)","line":189,"loc":{"start":{"line":189,"column":45},"end":{"line":189,"column":65}}},"8":{"name":"(anonymous_8)","line":193,"loc":{"start":{"line":193,"column":38},"end":{"line":193,"column":82}}},"9":{"name":"(anonymous_9)","line":200,"loc":{"start":{"line":200,"column":9},"end":{"line":200,"column":41}}},"10":{"name":"(anonymous_10)","line":201,"loc":{"start":{"line":201,"column":21},"end":{"line":201,"column":35}}},"11":{"name":"(anonymous_11)","line":207,"loc":{"start":{"line":207,"column":27},"end":{"line":207,"column":42}}},"12":{"name":"(anonymous_12)","line":215,"loc":{"start":{"line":215,"column":53},"end":{"line":215,"column":97}}},"13":{"name":"(anonymous_13)","line":231,"loc":{"start":{"line":231,"column":59},"end":{"line":231,"column":74}}},"14":{"name":"(anonymous_14)","line":243,"loc":{"start":{"line":243,"column":40},"end":{"line":243,"column":78}}},"15":{"name":"(anonymous_15)","line":258,"loc":{"start":{"line":258,"column":7},"end":{"line":258,"column":26}}},"16":{"name":"(anonymous_16)","line":259,"loc":{"start":{"line":259,"column":19},"end":{"line":259,"column":33}}},"17":{"name":"(anonymous_17)","line":264,"loc":{"start":{"line":264,"column":27},"end":{"line":264,"column":42}}},"18":{"name":"(anonymous_18)","line":272,"loc":{"start":{"line":272,"column":57},"end":{"line":272,"column":94}}},"19":{"name":"(anonymous_19)","line":280,"loc":{"start":{"line":280,"column":55},"end":{"line":280,"column":70}}},"20":{"name":"(anonymous_20)","line":286,"loc":{"start":{"line":286,"column":40},"end":{"line":286,"column":55}}},"21":{"name":"(anonymous_21)","line":310,"loc":{"start":{"line":310,"column":44},"end":{"line":310,"column":88}}},"22":{"name":"(anonymous_22)","line":322,"loc":{"start":{"line":322,"column":39},"end":{"line":322,"column":86}}},"23":{"name":"(anonymous_23)","line":325,"loc":{"start":{"line":325,"column":96},"end":{"line":325,"column":122}}},"24":{"name":"(anonymous_24)","line":345,"loc":{"start":{"line":345,"column":9},"end":{"line":345,"column":48}}},"25":{"name":"(anonymous_25)","line":373,"loc":{"start":{"line":373,"column":45},"end":{"line":373,"column":65}}},"26":{"name":"(anonymous_26)","line":387,"loc":{"start":{"line":387,"column":27},"end":{"line":387,"column":42}}},"27":{"name":"(anonymous_27)","line":391,"loc":{"start":{"line":391,"column":31},"end":{"line":391,"column":67}}},"28":{"name":"(anonymous_28)","line":392,"loc":{"start":{"line":392,"column":54},"end":{"line":392,"column":81}}},"29":{"name":"(anonymous_29)","line":412,"loc":{"start":{"line":412,"column":34},"end":{"line":412,"column":46}}},"30":{"name":"(anonymous_30)","line":419,"loc":{"start":{"line":419,"column":28},"end":{"line":419,"column":59}}},"31":{"name":"(anonymous_31)","line":427,"loc":{"start":{"line":427,"column":52},"end":{"line":427,"column":67}}},"32":{"name":"(anonymous_32)","line":438,"loc":{"start":{"line":438,"column":30},"end":{"line":438,"column":54}}},"33":{"name":"(anonymous_33)","line":439,"loc":{"start":{"line":439,"column":47},"end":{"line":439,"column":62}}},"34":{"name":"(anonymous_34)","line":450,"loc":{"start":{"line":450,"column":31},"end":{"line":450,"column":43}}},"35":{"name":"(anonymous_35)","line":468,"loc":{"start":{"line":468,"column":44},"end":{"line":468,"column":59}}},"36":{"name":"(anonymous_36)","line":479,"loc":{"start":{"line":479,"column":30},"end":{"line":479,"column":55}}},"37":{"name":"(anonymous_37)","line":486,"loc":{"start":{"line":486,"column":54},"end":{"line":486,"column":81}}},"38":{"name":"(anonymous_38)","line":523,"loc":{"start":{"line":523,"column":27},"end":{"line":523,"column":39}}},"39":{"name":"(anonymous_39)","line":528,"loc":{"start":{"line":528,"column":29},"end":{"line":528,"column":41}}},"40":{"name":"(anonymous_40)","line":532,"loc":{"start":{"line":532,"column":32},"end":{"line":532,"column":44}}},"41":{"name":"(anonymous_41)","line":536,"loc":{"start":{"line":536,"column":35},"end":{"line":536,"column":63}}},"42":{"name":"(anonymous_42)","line":540,"loc":{"start":{"line":540,"column":38},"end":{"line":540,"column":66}}},"43":{"name":"(anonymous_43)","line":543,"loc":{"start":{"line":543,"column":54},"end":{"line":543,"column":68}}},"44":{"name":"(anonymous_44)","line":548,"loc":{"start":{"line":548,"column":37},"end":{"line":548,"column":57}}},"45":{"name":"(anonymous_45)","line":574,"loc":{"start":{"line":574,"column":54},"end":{"line":574,"column":69}}},"46":{"name":"(anonymous_46)","line":601,"loc":{"start":{"line":601,"column":48},"end":{"line":601,"column":65}}},"47":{"name":"(anonymous_47)","line":605,"loc":{"start":{"line":605,"column":40},"end":{"line":605,"column":84}}},"48":{"name":"(anonymous_48)","line":622,"loc":{"start":{"line":622,"column":40},"end":{"line":622,"column":57}}},"49":{"name":"(anonymous_49)","line":631,"loc":{"start":{"line":631,"column":44},"end":{"line":631,"column":67}}},"50":{"name":"(anonymous_50)","line":659,"loc":{"start":{"line":659,"column":10},"end":{"line":659,"column":25}}},"51":{"name":"(anonymous_51)","line":686,"loc":{"start":{"line":686,"column":10},"end":{"line":686,"column":25}}},"52":{"name":"(anonymous_52)","line":702,"loc":{"start":{"line":702,"column":69},"end":{"line":702,"column":84}}},"53":{"name":"(anonymous_53)","line":727,"loc":{"start":{"line":727,"column":6},"end":{"line":727,"column":21}}},"54":{"name":"(anonymous_54)","line":746,"loc":{"start":{"line":746,"column":56},"end":{"line":746,"column":79}}},"55":{"name":"(anonymous_55)","line":756,"loc":{"start":{"line":756,"column":4},"end":{"line":756,"column":28}}},"56":{"name":"(anonymous_56)","line":778,"loc":{"start":{"line":778,"column":41},"end":{"line":778,"column":94}}},"57":{"name":"(anonymous_57)","line":790,"loc":{"start":{"line":790,"column":6},"end":{"line":790,"column":21}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":47}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":40}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":50}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":35}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":29}},"7":{"start":{"line":7,"column":0},"end":{"line":7,"column":25}},"8":{"start":{"line":8,"column":0},"end":{"line":8,"column":34}},"9":{"start":{"line":9,"column":0},"end":{"line":9,"column":31}},"10":{"start":{"line":10,"column":0},"end":{"line":10,"column":27}},"11":{"start":{"line":11,"column":0},"end":{"line":11,"column":64}},"12":{"start":{"line":13,"column":0},"end":{"line":13,"column":36}},"13":{"start":{"line":14,"column":0},"end":{"line":14,"column":59}},"14":{"start":{"line":15,"column":0},"end":{"line":15,"column":59}},"15":{"start":{"line":16,"column":0},"end":{"line":16,"column":63}},"16":{"start":{"line":17,"column":0},"end":{"line":17,"column":45}},"17":{"start":{"line":18,"column":0},"end":{"line":18,"column":73}},"18":{"start":{"line":19,"column":0},"end":{"line":19,"column":55}},"19":{"start":{"line":20,"column":0},"end":{"line":20,"column":53}},"20":{"start":{"line":21,"column":0},"end":{"line":21,"column":39}},"21":{"start":{"line":22,"column":0},"end":{"line":22,"column":55}},"22":{"start":{"line":25,"column":0},"end":{"line":164,"column":2}},"23":{"start":{"line":26,"column":2},"end":{"line":26,"column":18}},"24":{"start":{"line":28,"column":2},"end":{"line":43,"column":4}},"25":{"start":{"line":45,"column":2},"end":{"line":49,"column":3}},"26":{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},"27":{"start":{"line":47,"column":6},"end":{"line":47,"column":27}},"28":{"start":{"line":51,"column":2},"end":{"line":51,"column":42}},"29":{"start":{"line":52,"column":2},"end":{"line":52,"column":32}},"30":{"start":{"line":53,"column":2},"end":{"line":53,"column":42}},"31":{"start":{"line":54,"column":2},"end":{"line":54,"column":43}},"32":{"start":{"line":55,"column":2},"end":{"line":55,"column":45}},"33":{"start":{"line":56,"column":2},"end":{"line":56,"column":48}},"34":{"start":{"line":59,"column":2},"end":{"line":59,"column":55}},"35":{"start":{"line":61,"column":2},"end":{"line":61,"column":38}},"36":{"start":{"line":62,"column":2},"end":{"line":62,"column":34}},"37":{"start":{"line":64,"column":2},"end":{"line":64,"column":24}},"38":{"start":{"line":65,"column":2},"end":{"line":65,"column":51}},"39":{"start":{"line":66,"column":2},"end":{"line":66,"column":46}},"40":{"start":{"line":67,"column":2},"end":{"line":67,"column":51}},"41":{"start":{"line":68,"column":2},"end":{"line":68,"column":52}},"42":{"start":{"line":69,"column":2},"end":{"line":69,"column":53}},"43":{"start":{"line":70,"column":2},"end":{"line":70,"column":54}},"44":{"start":{"line":72,"column":2},"end":{"line":72,"column":30}},"45":{"start":{"line":73,"column":2},"end":{"line":73,"column":60}},"46":{"start":{"line":75,"column":2},"end":{"line":75,"column":36}},"47":{"start":{"line":76,"column":2},"end":{"line":76,"column":48}},"48":{"start":{"line":77,"column":2},"end":{"line":77,"column":40}},"49":{"start":{"line":78,"column":2},"end":{"line":78,"column":38}},"50":{"start":{"line":79,"column":2},"end":{"line":79,"column":52}},"51":{"start":{"line":80,"column":2},"end":{"line":80,"column":50}},"52":{"start":{"line":81,"column":2},"end":{"line":81,"column":36}},"53":{"start":{"line":82,"column":2},"end":{"line":82,"column":52}},"54":{"start":{"line":84,"column":2},"end":{"line":84,"column":40}},"55":{"start":{"line":85,"column":2},"end":{"line":85,"column":36}},"56":{"start":{"line":86,"column":2},"end":{"line":86,"column":60}},"57":{"start":{"line":87,"column":2},"end":{"line":87,"column":25}},"58":{"start":{"line":88,"column":2},"end":{"line":88,"column":23}},"59":{"start":{"line":90,"column":2},"end":{"line":93,"column":5}},"60":{"start":{"line":91,"column":4},"end":{"line":91,"column":24}},"61":{"start":{"line":92,"column":4},"end":{"line":92,"column":52}},"62":{"start":{"line":95,"column":2},"end":{"line":95,"column":40}},"63":{"start":{"line":96,"column":2},"end":{"line":99,"column":3}},"64":{"start":{"line":97,"column":4},"end":{"line":98,"column":72}},"65":{"start":{"line":100,"column":2},"end":{"line":100,"column":33}},"66":{"start":{"line":102,"column":2},"end":{"line":116,"column":3}},"67":{"start":{"line":103,"column":4},"end":{"line":107,"column":5}},"68":{"start":{"line":104,"column":6},"end":{"line":104,"column":113}},"69":{"start":{"line":105,"column":11},"end":{"line":107,"column":5}},"70":{"start":{"line":106,"column":6},"end":{"line":106,"column":113}},"71":{"start":{"line":108,"column":4},"end":{"line":108,"column":44}},"72":{"start":{"line":109,"column":4},"end":{"line":109,"column":46}},"73":{"start":{"line":111,"column":4},"end":{"line":113,"column":5}},"74":{"start":{"line":112,"column":6},"end":{"line":112,"column":60}},"75":{"start":{"line":114,"column":4},"end":{"line":114,"column":37}},"76":{"start":{"line":115,"column":4},"end":{"line":115,"column":40}},"77":{"start":{"line":118,"column":2},"end":{"line":118,"column":46}},"78":{"start":{"line":119,"column":2},"end":{"line":119,"column":42}},"79":{"start":{"line":121,"column":2},"end":{"line":123,"column":4}},"80":{"start":{"line":124,"column":2},"end":{"line":127,"column":4}},"81":{"start":{"line":129,"column":2},"end":{"line":132,"column":3}},"82":{"start":{"line":130,"column":4},"end":{"line":130,"column":70}},"83":{"start":{"line":131,"column":4},"end":{"line":131,"column":64}},"84":{"start":{"line":134,"column":2},"end":{"line":139,"column":3}},"85":{"start":{"line":135,"column":4},"end":{"line":135,"column":32}},"86":{"start":{"line":138,"column":4},"end":{"line":138,"column":33}},"87":{"start":{"line":141,"column":2},"end":{"line":146,"column":3}},"88":{"start":{"line":142,"column":4},"end":{"line":142,"column":34}},"89":{"start":{"line":145,"column":4},"end":{"line":145,"column":27}},"90":{"start":{"line":148,"column":2},"end":{"line":148,"column":20}},"91":{"start":{"line":149,"column":2},"end":{"line":149,"column":24}},"92":{"start":{"line":151,"column":2},"end":{"line":151,"column":61}},"93":{"start":{"line":153,"column":2},"end":{"line":160,"column":5}},"94":{"start":{"line":162,"column":2},"end":{"line":162,"column":64}},"95":{"start":{"line":163,"column":2},"end":{"line":163,"column":74}},"96":{"start":{"line":166,"column":0},"end":{"line":166,"column":59}},"97":{"start":{"line":168,"column":0},"end":{"line":170,"column":2}},"98":{"start":{"line":169,"column":2},"end":{"line":169,"column":25}},"99":{"start":{"line":172,"column":0},"end":{"line":174,"column":2}},"100":{"start":{"line":173,"column":2},"end":{"line":173,"column":27}},"101":{"start":{"line":176,"column":0},"end":{"line":181,"column":2}},"102":{"start":{"line":177,"column":2},"end":{"line":179,"column":3}},"103":{"start":{"line":178,"column":4},"end":{"line":178,"column":43}},"104":{"start":{"line":180,"column":2},"end":{"line":180,"column":28}},"105":{"start":{"line":183,"column":0},"end":{"line":187,"column":2}},"106":{"start":{"line":186,"column":2},"end":{"line":186,"column":30}},"107":{"start":{"line":189,"column":0},"end":{"line":191,"column":2}},"108":{"start":{"line":190,"column":2},"end":{"line":190,"column":28}},"109":{"start":{"line":193,"column":0},"end":{"line":213,"column":2}},"110":{"start":{"line":194,"column":2},"end":{"line":194,"column":18}},"111":{"start":{"line":196,"column":2},"end":{"line":212,"column":3}},"112":{"start":{"line":197,"column":4},"end":{"line":197,"column":19}},"113":{"start":{"line":198,"column":4},"end":{"line":206,"column":5}},"114":{"start":{"line":199,"column":6},"end":{"line":205,"column":7}},"115":{"start":{"line":200,"column":8},"end":{"line":204,"column":30}},"116":{"start":{"line":201,"column":10},"end":{"line":203,"column":13}},"117":{"start":{"line":202,"column":12},"end":{"line":202,"column":83}},"118":{"start":{"line":207,"column":4},"end":{"line":209,"column":7}},"119":{"start":{"line":208,"column":6},"end":{"line":208,"column":32}},"120":{"start":{"line":211,"column":4},"end":{"line":211,"column":75}},"121":{"start":{"line":215,"column":0},"end":{"line":241,"column":2}},"122":{"start":{"line":216,"column":2},"end":{"line":216,"column":18}},"123":{"start":{"line":217,"column":2},"end":{"line":217,"column":43}},"124":{"start":{"line":219,"column":2},"end":{"line":240,"column":3}},"125":{"start":{"line":220,"column":4},"end":{"line":221,"column":31}},"126":{"start":{"line":223,"column":4},"end":{"line":225,"column":5}},"127":{"start":{"line":224,"column":6},"end":{"line":224,"column":43}},"128":{"start":{"line":226,"column":4},"end":{"line":229,"column":5}},"129":{"start":{"line":227,"column":6},"end":{"line":227,"column":54}},"130":{"start":{"line":228,"column":6},"end":{"line":228,"column":41}},"131":{"start":{"line":231,"column":4},"end":{"line":239,"column":7}},"132":{"start":{"line":232,"column":6},"end":{"line":237,"column":7}},"133":{"start":{"line":233,"column":8},"end":{"line":233,"column":56}},"134":{"start":{"line":234,"column":8},"end":{"line":234,"column":43}},"135":{"start":{"line":236,"column":8},"end":{"line":236,"column":62}},"136":{"start":{"line":238,"column":6},"end":{"line":238,"column":32}},"137":{"start":{"line":243,"column":0},"end":{"line":270,"column":2}},"138":{"start":{"line":244,"column":2},"end":{"line":244,"column":18}},"139":{"start":{"line":246,"column":2},"end":{"line":253,"column":3}},"140":{"start":{"line":247,"column":4},"end":{"line":247,"column":18}},"141":{"start":{"line":248,"column":4},"end":{"line":252,"column":5}},"142":{"start":{"line":249,"column":6},"end":{"line":251,"column":7}},"143":{"start":{"line":250,"column":8},"end":{"line":250,"column":31}},"144":{"start":{"line":254,"column":2},"end":{"line":269,"column":3}},"145":{"start":{"line":255,"column":4},"end":{"line":255,"column":19}},"146":{"start":{"line":256,"column":4},"end":{"line":256,"column":30}},"147":{"start":{"line":257,"column":4},"end":{"line":263,"column":5}},"148":{"start":{"line":258,"column":6},"end":{"line":262,"column":22}},"149":{"start":{"line":259,"column":8},"end":{"line":261,"column":11}},"150":{"start":{"line":260,"column":10},"end":{"line":260,"column":72}},"151":{"start":{"line":264,"column":4},"end":{"line":266,"column":7}},"152":{"start":{"line":265,"column":6},"end":{"line":265,"column":32}},"153":{"start":{"line":268,"column":4},"end":{"line":268,"column":73}},"154":{"start":{"line":272,"column":0},"end":{"line":284,"column":2}},"155":{"start":{"line":273,"column":2},"end":{"line":273,"column":18}},"156":{"start":{"line":275,"column":2},"end":{"line":275,"column":46}},"157":{"start":{"line":276,"column":2},"end":{"line":278,"column":3}},"158":{"start":{"line":277,"column":4},"end":{"line":277,"column":39}},"159":{"start":{"line":280,"column":2},"end":{"line":283,"column":5}},"160":{"start":{"line":281,"column":4},"end":{"line":281,"column":40}},"161":{"start":{"line":282,"column":4},"end":{"line":282,"column":30}},"162":{"start":{"line":286,"column":0},"end":{"line":308,"column":2}},"163":{"start":{"line":287,"column":2},"end":{"line":287,"column":23}},"164":{"start":{"line":288,"column":2},"end":{"line":288,"column":24}},"165":{"start":{"line":290,"column":2},"end":{"line":302,"column":3}},"166":{"start":{"line":291,"column":4},"end":{"line":301,"column":5}},"167":{"start":{"line":292,"column":6},"end":{"line":292,"column":72}},"168":{"start":{"line":293,"column":11},"end":{"line":301,"column":5}},"169":{"start":{"line":294,"column":6},"end":{"line":294,"column":57}},"170":{"start":{"line":295,"column":11},"end":{"line":301,"column":5}},"171":{"start":{"line":296,"column":6},"end":{"line":296,"column":59}},"172":{"start":{"line":298,"column":6},"end":{"line":298,"column":25}},"173":{"start":{"line":300,"column":6},"end":{"line":300,"column":50}},"174":{"start":{"line":304,"column":2},"end":{"line":307,"column":4}},"175":{"start":{"line":310,"column":0},"end":{"line":320,"column":2}},"176":{"start":{"line":311,"column":2},"end":{"line":314,"column":5}},"177":{"start":{"line":315,"column":2},"end":{"line":319,"column":5}},"178":{"start":{"line":322,"column":0},"end":{"line":371,"column":2}},"179":{"start":{"line":323,"column":2},"end":{"line":323,"column":18}},"180":{"start":{"line":325,"column":2},"end":{"line":370,"column":5}},"181":{"start":{"line":326,"column":4},"end":{"line":334,"column":5}},"182":{"start":{"line":327,"column":6},"end":{"line":327,"column":49}},"183":{"start":{"line":328,"column":6},"end":{"line":328,"column":37}},"184":{"start":{"line":329,"column":6},"end":{"line":329,"column":50}},"185":{"start":{"line":331,"column":6},"end":{"line":331,"column":38}},"186":{"start":{"line":332,"column":6},"end":{"line":332,"column":32}},"187":{"start":{"line":333,"column":6},"end":{"line":333,"column":52}},"188":{"start":{"line":340,"column":4},"end":{"line":369,"column":5}},"189":{"start":{"line":341,"column":6},"end":{"line":356,"column":9}},"190":{"start":{"line":346,"column":8},"end":{"line":352,"column":9}},"191":{"start":{"line":347,"column":10},"end":{"line":347,"column":36}},"192":{"start":{"line":348,"column":10},"end":{"line":348,"column":56}},"193":{"start":{"line":349,"column":10},"end":{"line":351,"column":11}},"194":{"start":{"line":350,"column":12},"end":{"line":350,"column":84}},"195":{"start":{"line":355,"column":8},"end":{"line":355,"column":55}},"196":{"start":{"line":358,"column":6},"end":{"line":358,"column":51}},"197":{"start":{"line":362,"column":6},"end":{"line":367,"column":7}},"198":{"start":{"line":363,"column":8},"end":{"line":363,"column":36}},"199":{"start":{"line":364,"column":8},"end":{"line":366,"column":9}},"200":{"start":{"line":365,"column":10},"end":{"line":365,"column":70}},"201":{"start":{"line":368,"column":6},"end":{"line":368,"column":58}},"202":{"start":{"line":373,"column":0},"end":{"line":521,"column":2}},"203":{"start":{"line":374,"column":2},"end":{"line":374,"column":18}},"204":{"start":{"line":376,"column":2},"end":{"line":376,"column":29}},"205":{"start":{"line":378,"column":2},"end":{"line":378,"column":37}},"206":{"start":{"line":379,"column":2},"end":{"line":379,"column":50}},"207":{"start":{"line":380,"column":2},"end":{"line":380,"column":29}},"208":{"start":{"line":384,"column":2},"end":{"line":384,"column":36}},"209":{"start":{"line":385,"column":2},"end":{"line":385,"column":35}},"210":{"start":{"line":387,"column":2},"end":{"line":389,"column":5}},"211":{"start":{"line":388,"column":4},"end":{"line":388,"column":33}},"212":{"start":{"line":391,"column":2},"end":{"line":410,"column":5}},"213":{"start":{"line":392,"column":4},"end":{"line":409,"column":7}},"214":{"start":{"line":393,"column":6},"end":{"line":399,"column":7}},"215":{"start":{"line":394,"column":8},"end":{"line":396,"column":9}},"216":{"start":{"line":395,"column":10},"end":{"line":395,"column":36}},"217":{"start":{"line":398,"column":8},"end":{"line":398,"column":58}},"218":{"start":{"line":400,"column":6},"end":{"line":403,"column":8}},"219":{"start":{"line":404,"column":6},"end":{"line":408,"column":7}},"220":{"start":{"line":405,"column":8},"end":{"line":405,"column":33}},"221":{"start":{"line":407,"column":8},"end":{"line":407,"column":34}},"222":{"start":{"line":412,"column":2},"end":{"line":417,"column":5}},"223":{"start":{"line":413,"column":4},"end":{"line":413,"column":38}},"224":{"start":{"line":414,"column":4},"end":{"line":414,"column":30}},"225":{"start":{"line":415,"column":4},"end":{"line":415,"column":50}},"226":{"start":{"line":416,"column":4},"end":{"line":416,"column":46}},"227":{"start":{"line":419,"column":2},"end":{"line":436,"column":5}},"228":{"start":{"line":420,"column":4},"end":{"line":426,"column":5}},"229":{"start":{"line":421,"column":6},"end":{"line":421,"column":26}},"230":{"start":{"line":422,"column":11},"end":{"line":426,"column":5}},"231":{"start":{"line":423,"column":6},"end":{"line":425,"column":8}},"232":{"start":{"line":427,"column":4},"end":{"line":435,"column":7}},"233":{"start":{"line":428,"column":6},"end":{"line":434,"column":7}},"234":{"start":{"line":429,"column":8},"end":{"line":429,"column":86}},"235":{"start":{"line":430,"column":8},"end":{"line":430,"column":19}},"236":{"start":{"line":431,"column":8},"end":{"line":431,"column":38}},"237":{"start":{"line":433,"column":8},"end":{"line":433,"column":14}},"238":{"start":{"line":438,"column":2},"end":{"line":448,"column":5}},"239":{"start":{"line":439,"column":4},"end":{"line":447,"column":7}},"240":{"start":{"line":440,"column":6},"end":{"line":446,"column":7}},"241":{"start":{"line":441,"column":8},"end":{"line":441,"column":90}},"242":{"start":{"line":442,"column":8},"end":{"line":442,"column":19}},"243":{"start":{"line":443,"column":8},"end":{"line":443,"column":38}},"244":{"start":{"line":445,"column":8},"end":{"line":445,"column":14}},"245":{"start":{"line":450,"column":2},"end":{"line":476,"column":5}},"246":{"start":{"line":451,"column":4},"end":{"line":451,"column":48}},"247":{"start":{"line":453,"column":4},"end":{"line":453,"column":31}},"248":{"start":{"line":454,"column":4},"end":{"line":454,"column":34}},"249":{"start":{"line":455,"column":4},"end":{"line":455,"column":37}},"250":{"start":{"line":456,"column":4},"end":{"line":456,"column":31}},"251":{"start":{"line":457,"column":4},"end":{"line":457,"column":33}},"252":{"start":{"line":458,"column":4},"end":{"line":458,"column":33}},"253":{"start":{"line":459,"column":4},"end":{"line":459,"column":35}},"254":{"start":{"line":461,"column":4},"end":{"line":461,"column":52}},"255":{"start":{"line":463,"column":4},"end":{"line":466,"column":5}},"256":{"start":{"line":464,"column":6},"end":{"line":464,"column":30}},"257":{"start":{"line":465,"column":6},"end":{"line":465,"column":26}},"258":{"start":{"line":468,"column":4},"end":{"line":475,"column":7}},"259":{"start":{"line":469,"column":6},"end":{"line":474,"column":7}},"260":{"start":{"line":470,"column":8},"end":{"line":470,"column":107}},"261":{"start":{"line":471,"column":13},"end":{"line":474,"column":7}},"262":{"start":{"line":472,"column":8},"end":{"line":472,"column":46}},"263":{"start":{"line":473,"column":8},"end":{"line":473,"column":45}},"264":{"start":{"line":478,"column":2},"end":{"line":478,"column":119}},"265":{"start":{"line":479,"column":2},"end":{"line":520,"column":5}},"266":{"start":{"line":480,"column":4},"end":{"line":482,"column":5}},"267":{"start":{"line":481,"column":6},"end":{"line":481,"column":16}},"268":{"start":{"line":483,"column":4},"end":{"line":483,"column":49}},"269":{"start":{"line":484,"column":4},"end":{"line":484,"column":48}},"270":{"start":{"line":486,"column":4},"end":{"line":519,"column":7}},"271":{"start":{"line":487,"column":6},"end":{"line":490,"column":8}},"272":{"start":{"line":492,"column":6},"end":{"line":502,"column":7}},"273":{"start":{"line":493,"column":8},"end":{"line":501,"column":9}},"274":{"start":{"line":496,"column":10},"end":{"line":496,"column":58}},"275":{"start":{"line":498,"column":10},"end":{"line":500,"column":11}},"276":{"start":{"line":499,"column":12},"end":{"line":499,"column":38}},"277":{"start":{"line":503,"column":6},"end":{"line":503,"column":52}},"278":{"start":{"line":505,"column":6},"end":{"line":505,"column":34}},"279":{"start":{"line":506,"column":6},"end":{"line":506,"column":26}},"280":{"start":{"line":508,"column":6},"end":{"line":508,"column":37}},"281":{"start":{"line":509,"column":6},"end":{"line":509,"column":58}},"282":{"start":{"line":511,"column":6},"end":{"line":511,"column":41}},"283":{"start":{"line":512,"column":6},"end":{"line":512,"column":40}},"284":{"start":{"line":514,"column":6},"end":{"line":516,"column":7}},"285":{"start":{"line":515,"column":8},"end":{"line":515,"column":58}},"286":{"start":{"line":518,"column":6},"end":{"line":518,"column":28}},"287":{"start":{"line":523,"column":0},"end":{"line":526,"column":2}},"288":{"start":{"line":524,"column":2},"end":{"line":524,"column":23}},"289":{"start":{"line":525,"column":2},"end":{"line":525,"column":54}},"290":{"start":{"line":528,"column":0},"end":{"line":530,"column":2}},"291":{"start":{"line":529,"column":2},"end":{"line":529,"column":20}},"292":{"start":{"line":532,"column":0},"end":{"line":534,"column":2}},"293":{"start":{"line":533,"column":2},"end":{"line":533,"column":31}},"294":{"start":{"line":536,"column":0},"end":{"line":538,"column":2}},"295":{"start":{"line":537,"column":2},"end":{"line":537,"column":42}},"296":{"start":{"line":540,"column":0},"end":{"line":546,"column":2}},"297":{"start":{"line":541,"column":2},"end":{"line":541,"column":51}},"298":{"start":{"line":543,"column":2},"end":{"line":545,"column":5}},"299":{"start":{"line":544,"column":4},"end":{"line":544,"column":28}},"300":{"start":{"line":548,"column":0},"end":{"line":599,"column":2}},"301":{"start":{"line":549,"column":2},"end":{"line":549,"column":18}},"302":{"start":{"line":551,"column":2},"end":{"line":551,"column":21}},"303":{"start":{"line":552,"column":2},"end":{"line":552,"column":27}},"304":{"start":{"line":553,"column":2},"end":{"line":555,"column":3}},"305":{"start":{"line":554,"column":4},"end":{"line":554,"column":17}},"306":{"start":{"line":556,"column":2},"end":{"line":556,"column":17}},"307":{"start":{"line":558,"column":2},"end":{"line":568,"column":3}},"308":{"start":{"line":559,"column":4},"end":{"line":559,"column":14}},"309":{"start":{"line":561,"column":4},"end":{"line":567,"column":18}},"310":{"start":{"line":562,"column":6},"end":{"line":562,"column":36}},"311":{"start":{"line":563,"column":6},"end":{"line":563,"column":36}},"312":{"start":{"line":564,"column":6},"end":{"line":566,"column":49}},"313":{"start":{"line":570,"column":2},"end":{"line":598,"column":3}},"314":{"start":{"line":571,"column":4},"end":{"line":571,"column":74}},"315":{"start":{"line":572,"column":4},"end":{"line":593,"column":5}},"316":{"start":{"line":573,"column":6},"end":{"line":573,"column":34}},"317":{"start":{"line":574,"column":6},"end":{"line":590,"column":9}},"318":{"start":{"line":575,"column":8},"end":{"line":589,"column":9}},"319":{"start":{"line":576,"column":10},"end":{"line":576,"column":136}},"320":{"start":{"line":578,"column":10},"end":{"line":578,"column":33}},"321":{"start":{"line":579,"column":10},"end":{"line":588,"column":11}},"322":{"start":{"line":580,"column":12},"end":{"line":584,"column":13}},"323":{"start":{"line":581,"column":14},"end":{"line":581,"column":159}},"324":{"start":{"line":582,"column":19},"end":{"line":584,"column":13}},"325":{"start":{"line":583,"column":14},"end":{"line":583,"column":40}},"326":{"start":{"line":585,"column":12},"end":{"line":585,"column":32}},"327":{"start":{"line":587,"column":12},"end":{"line":587,"column":21}},"328":{"start":{"line":592,"column":6},"end":{"line":592,"column":15}},"329":{"start":{"line":595,"column":4},"end":{"line":595,"column":106}},"330":{"start":{"line":596,"column":4},"end":{"line":596,"column":30}},"331":{"start":{"line":597,"column":4},"end":{"line":597,"column":24}},"332":{"start":{"line":601,"column":0},"end":{"line":603,"column":2}},"333":{"start":{"line":602,"column":2},"end":{"line":602,"column":61}},"334":{"start":{"line":605,"column":0},"end":{"line":620,"column":2}},"335":{"start":{"line":606,"column":2},"end":{"line":610,"column":4}},"336":{"start":{"line":612,"column":2},"end":{"line":612,"column":36}},"337":{"start":{"line":613,"column":2},"end":{"line":617,"column":3}},"338":{"start":{"line":614,"column":4},"end":{"line":614,"column":110}},"339":{"start":{"line":616,"column":4},"end":{"line":616,"column":28}},"340":{"start":{"line":619,"column":2},"end":{"line":619,"column":43}},"341":{"start":{"line":622,"column":0},"end":{"line":629,"column":2}},"342":{"start":{"line":623,"column":2},"end":{"line":627,"column":3}},"343":{"start":{"line":624,"column":4},"end":{"line":624,"column":33}},"344":{"start":{"line":625,"column":4},"end":{"line":625,"column":46}},"345":{"start":{"line":626,"column":4},"end":{"line":626,"column":44}},"346":{"start":{"line":628,"column":2},"end":{"line":628,"column":15}},"347":{"start":{"line":631,"column":0},"end":{"line":744,"column":2}},"348":{"start":{"line":632,"column":2},"end":{"line":632,"column":18}},"349":{"start":{"line":634,"column":2},"end":{"line":634,"column":30}},"350":{"start":{"line":636,"column":2},"end":{"line":638,"column":4}},"351":{"start":{"line":640,"column":2},"end":{"line":642,"column":3}},"352":{"start":{"line":641,"column":4},"end":{"line":641,"column":66}},"353":{"start":{"line":644,"column":2},"end":{"line":644,"column":28}},"354":{"start":{"line":646,"column":2},"end":{"line":743,"column":3}},"355":{"start":{"line":647,"column":4},"end":{"line":721,"column":5}},"356":{"start":{"line":648,"column":6},"end":{"line":648,"column":41}},"357":{"start":{"line":649,"column":6},"end":{"line":649,"column":42}},"358":{"start":{"line":650,"column":6},"end":{"line":650,"column":50}},"359":{"start":{"line":651,"column":6},"end":{"line":651,"column":36}},"360":{"start":{"line":653,"column":6},"end":{"line":678,"column":7}},"361":{"start":{"line":656,"column":8},"end":{"line":656,"column":53}},"362":{"start":{"line":658,"column":8},"end":{"line":677,"column":10}},"363":{"start":{"line":660,"column":12},"end":{"line":675,"column":13}},"364":{"start":{"line":661,"column":14},"end":{"line":661,"column":140}},"365":{"start":{"line":663,"column":14},"end":{"line":663,"column":37}},"366":{"start":{"line":664,"column":14},"end":{"line":670,"column":15}},"367":{"start":{"line":665,"column":16},"end":{"line":669,"column":17}},"368":{"start":{"line":666,"column":18},"end":{"line":666,"column":163}},"369":{"start":{"line":667,"column":23},"end":{"line":669,"column":17}},"370":{"start":{"line":668,"column":18},"end":{"line":668,"column":44}},"371":{"start":{"line":671,"column":14},"end":{"line":673,"column":15}},"372":{"start":{"line":672,"column":16},"end":{"line":672,"column":46}},"373":{"start":{"line":674,"column":14},"end":{"line":674,"column":33}},"374":{"start":{"line":679,"column":11},"end":{"line":721,"column":5}},"375":{"start":{"line":680,"column":6},"end":{"line":717,"column":7}},"376":{"start":{"line":681,"column":8},"end":{"line":681,"column":43}},"377":{"start":{"line":682,"column":8},"end":{"line":682,"column":44}},"378":{"start":{"line":683,"column":8},"end":{"line":683,"column":38}},"379":{"start":{"line":685,"column":8},"end":{"line":712,"column":10}},"380":{"start":{"line":687,"column":12},"end":{"line":710,"column":13}},"381":{"start":{"line":688,"column":14},"end":{"line":688,"column":141}},"382":{"start":{"line":690,"column":14},"end":{"line":690,"column":37}},"383":{"start":{"line":691,"column":14},"end":{"line":693,"column":15}},"384":{"start":{"line":692,"column":16},"end":{"line":692,"column":46}},"385":{"start":{"line":694,"column":14},"end":{"line":709,"column":15}},"386":{"start":{"line":695,"column":16},"end":{"line":699,"column":17}},"387":{"start":{"line":696,"column":18},"end":{"line":696,"column":165}},"388":{"start":{"line":697,"column":23},"end":{"line":699,"column":17}},"389":{"start":{"line":698,"column":18},"end":{"line":698,"column":44}},"390":{"start":{"line":700,"column":16},"end":{"line":700,"column":35}},"391":{"start":{"line":702,"column":16},"end":{"line":708,"column":19}},"392":{"start":{"line":703,"column":18},"end":{"line":706,"column":19}},"393":{"start":{"line":704,"column":20},"end":{"line":704,"column":47}},"394":{"start":{"line":705,"column":20},"end":{"line":705,"column":46}},"395":{"start":{"line":707,"column":18},"end":{"line":707,"column":37}},"396":{"start":{"line":714,"column":8},"end":{"line":714,"column":90}},"397":{"start":{"line":715,"column":8},"end":{"line":715,"column":45}},"398":{"start":{"line":716,"column":8},"end":{"line":716,"column":41}},"399":{"start":{"line":720,"column":6},"end":{"line":720,"column":29}},"400":{"start":{"line":723,"column":4},"end":{"line":723,"column":26}},"401":{"start":{"line":724,"column":4},"end":{"line":724,"column":32}},"402":{"start":{"line":726,"column":4},"end":{"line":742,"column":6}},"403":{"start":{"line":728,"column":8},"end":{"line":740,"column":9}},"404":{"start":{"line":729,"column":10},"end":{"line":729,"column":131}},"405":{"start":{"line":731,"column":10},"end":{"line":731,"column":33}},"406":{"start":{"line":732,"column":10},"end":{"line":738,"column":11}},"407":{"start":{"line":733,"column":12},"end":{"line":737,"column":13}},"408":{"start":{"line":734,"column":14},"end":{"line":734,"column":149}},"409":{"start":{"line":735,"column":19},"end":{"line":737,"column":13}},"410":{"start":{"line":736,"column":14},"end":{"line":736,"column":40}},"411":{"start":{"line":739,"column":10},"end":{"line":739,"column":32}},"412":{"start":{"line":746,"column":0},"end":{"line":776,"column":2}},"413":{"start":{"line":747,"column":2},"end":{"line":747,"column":18}},"414":{"start":{"line":748,"column":2},"end":{"line":748,"column":30}},"415":{"start":{"line":750,"column":2},"end":{"line":753,"column":4}},"416":{"start":{"line":755,"column":2},"end":{"line":775,"column":4}},"417":{"start":{"line":757,"column":6},"end":{"line":773,"column":7}},"418":{"start":{"line":758,"column":8},"end":{"line":758,"column":137}},"419":{"start":{"line":760,"column":8},"end":{"line":760,"column":31}},"420":{"start":{"line":761,"column":8},"end":{"line":763,"column":9}},"421":{"start":{"line":762,"column":10},"end":{"line":762,"column":60}},"422":{"start":{"line":764,"column":8},"end":{"line":764,"column":31}},"423":{"start":{"line":765,"column":8},"end":{"line":771,"column":9}},"424":{"start":{"line":766,"column":10},"end":{"line":770,"column":11}},"425":{"start":{"line":767,"column":12},"end":{"line":767,"column":163}},"426":{"start":{"line":768,"column":17},"end":{"line":770,"column":11}},"427":{"start":{"line":769,"column":12},"end":{"line":769,"column":38}},"428":{"start":{"line":772,"column":8},"end":{"line":772,"column":28}},"429":{"start":{"line":778,"column":0},"end":{"line":817,"column":2}},"430":{"start":{"line":779,"column":2},"end":{"line":779,"column":18}},"431":{"start":{"line":781,"column":2},"end":{"line":781,"column":30}},"432":{"start":{"line":783,"column":2},"end":{"line":816,"column":3}},"433":{"start":{"line":784,"column":4},"end":{"line":788,"column":6}},"434":{"start":{"line":789,"column":4},"end":{"line":813,"column":6}},"435":{"start":{"line":791,"column":8},"end":{"line":811,"column":9}},"436":{"start":{"line":792,"column":10},"end":{"line":792,"column":138}},"437":{"start":{"line":794,"column":10},"end":{"line":794,"column":33}},"438":{"start":{"line":795,"column":10},"end":{"line":797,"column":11}},"439":{"start":{"line":796,"column":12},"end":{"line":796,"column":42}},"440":{"start":{"line":798,"column":10},"end":{"line":810,"column":11}},"441":{"start":{"line":799,"column":12},"end":{"line":803,"column":13}},"442":{"start":{"line":800,"column":14},"end":{"line":800,"column":163}},"443":{"start":{"line":801,"column":19},"end":{"line":803,"column":13}},"444":{"start":{"line":802,"column":14},"end":{"line":802,"column":40}},"445":{"start":{"line":804,"column":12},"end":{"line":804,"column":31}},"446":{"start":{"line":806,"column":12},"end":{"line":808,"column":13}},"447":{"start":{"line":807,"column":14},"end":{"line":807,"column":38}},"448":{"start":{"line":809,"column":12},"end":{"line":809,"column":32}},"449":{"start":{"line":815,"column":4},"end":{"line":815,"column":24}},"450":{"start":{"line":819,"column":0},"end":{"line":819,"column":26}}},"branchMap":{"1":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"2":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":17},"end":{"line":85,"column":29}},{"start":{"line":85,"column":33},"end":{"line":85,"column":35}}]},"3":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":2},"end":{"line":96,"column":2}},{"start":{"line":96,"column":2},"end":{"line":96,"column":2}}]},"4":{"line":96,"type":"binary-expr","locations":[{"start":{"line":96,"column":6},"end":{"line":96,"column":15}},{"start":{"line":96,"column":19},"end":{"line":96,"column":35}}]},"5":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":2},"end":{"line":102,"column":2}},{"start":{"line":102,"column":2},"end":{"line":102,"column":2}}]},"6":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":6},"end":{"line":102,"column":33}},{"start":{"line":102,"column":37},"end":{"line":102,"column":63}}]},"7":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"8":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":11},"end":{"line":105,"column":11}},{"start":{"line":105,"column":11},"end":{"line":105,"column":11}}]},"9":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":4},"end":{"line":111,"column":4}},{"start":{"line":111,"column":4},"end":{"line":111,"column":4}}]},"10":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":2},"end":{"line":129,"column":2}},{"start":{"line":129,"column":2},"end":{"line":129,"column":2}}]},"11":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":2},"end":{"line":134,"column":2}},{"start":{"line":134,"column":2},"end":{"line":134,"column":2}}]},"12":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":2},"end":{"line":141,"column":2}},{"start":{"line":141,"column":2},"end":{"line":141,"column":2}}]},"13":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":2},"end":{"line":177,"column":2}},{"start":{"line":177,"column":2},"end":{"line":177,"column":2}}]},"14":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":2},"end":{"line":196,"column":2}},{"start":{"line":196,"column":2},"end":{"line":196,"column":2}}]},"15":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":6},"end":{"line":199,"column":6}},{"start":{"line":199,"column":6},"end":{"line":199,"column":6}}]},"16":{"line":208,"type":"binary-expr","locations":[{"start":{"line":208,"column":6},"end":{"line":208,"column":14}},{"start":{"line":208,"column":18},"end":{"line":208,"column":31}}]},"17":{"line":219,"type":"if","locations":[{"start":{"line":219,"column":2},"end":{"line":219,"column":2}},{"start":{"line":219,"column":2},"end":{"line":219,"column":2}}]},"18":{"line":219,"type":"binary-expr","locations":[{"start":{"line":219,"column":6},"end":{"line":219,"column":29}},{"start":{"line":219,"column":33},"end":{"line":219,"column":92}}]},"19":{"line":220,"type":"binary-expr","locations":[{"start":{"line":220,"column":4},"end":{"line":220,"column":12}},{"start":{"line":220,"column":16},"end":{"line":221,"column":30}}]},"20":{"line":223,"type":"if","locations":[{"start":{"line":223,"column":4},"end":{"line":223,"column":4}},{"start":{"line":223,"column":4},"end":{"line":223,"column":4}}]},"21":{"line":226,"type":"if","locations":[{"start":{"line":226,"column":4},"end":{"line":226,"column":4}},{"start":{"line":226,"column":4},"end":{"line":226,"column":4}}]},"22":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":6},"end":{"line":232,"column":6}},{"start":{"line":232,"column":6},"end":{"line":232,"column":6}}]},"23":{"line":238,"type":"binary-expr","locations":[{"start":{"line":238,"column":6},"end":{"line":238,"column":14}},{"start":{"line":238,"column":18},"end":{"line":238,"column":31}}]},"24":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":2},"end":{"line":246,"column":2}},{"start":{"line":246,"column":2},"end":{"line":246,"column":2}}]},"25":{"line":249,"type":"if","locations":[{"start":{"line":249,"column":6},"end":{"line":249,"column":6}},{"start":{"line":249,"column":6},"end":{"line":249,"column":6}}]},"26":{"line":254,"type":"if","locations":[{"start":{"line":254,"column":2},"end":{"line":254,"column":2}},{"start":{"line":254,"column":2},"end":{"line":254,"column":2}}]},"27":{"line":265,"type":"binary-expr","locations":[{"start":{"line":265,"column":6},"end":{"line":265,"column":14}},{"start":{"line":265,"column":18},"end":{"line":265,"column":31}}]},"28":{"line":276,"type":"if","locations":[{"start":{"line":276,"column":2},"end":{"line":276,"column":2}},{"start":{"line":276,"column":2},"end":{"line":276,"column":2}}]},"29":{"line":282,"type":"binary-expr","locations":[{"start":{"line":282,"column":4},"end":{"line":282,"column":12}},{"start":{"line":282,"column":16},"end":{"line":282,"column":29}}]},"30":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":2},"end":{"line":290,"column":2}},{"start":{"line":290,"column":2},"end":{"line":290,"column":2}}]},"31":{"line":291,"type":"if","locations":[{"start":{"line":291,"column":4},"end":{"line":291,"column":4}},{"start":{"line":291,"column":4},"end":{"line":291,"column":4}}]},"32":{"line":293,"type":"if","locations":[{"start":{"line":293,"column":11},"end":{"line":293,"column":11}},{"start":{"line":293,"column":11},"end":{"line":293,"column":11}}]},"33":{"line":295,"type":"if","locations":[{"start":{"line":295,"column":11},"end":{"line":295,"column":11}},{"start":{"line":295,"column":11},"end":{"line":295,"column":11}}]},"34":{"line":326,"type":"if","locations":[{"start":{"line":326,"column":4},"end":{"line":326,"column":4}},{"start":{"line":326,"column":4},"end":{"line":326,"column":4}}]},"35":{"line":340,"type":"if","locations":[{"start":{"line":340,"column":4},"end":{"line":340,"column":4}},{"start":{"line":340,"column":4},"end":{"line":340,"column":4}}]},"36":{"line":346,"type":"if","locations":[{"start":{"line":346,"column":8},"end":{"line":346,"column":8}},{"start":{"line":346,"column":8},"end":{"line":346,"column":8}}]},"37":{"line":349,"type":"if","locations":[{"start":{"line":349,"column":10},"end":{"line":349,"column":10}},{"start":{"line":349,"column":10},"end":{"line":349,"column":10}}]},"38":{"line":355,"type":"binary-expr","locations":[{"start":{"line":355,"column":34},"end":{"line":355,"column":44}},{"start":{"line":355,"column":48},"end":{"line":355,"column":53}}]},"39":{"line":362,"type":"if","locations":[{"start":{"line":362,"column":6},"end":{"line":362,"column":6}},{"start":{"line":362,"column":6},"end":{"line":362,"column":6}}]},"40":{"line":362,"type":"binary-expr","locations":[{"start":{"line":362,"column":10},"end":{"line":362,"column":13}},{"start":{"line":362,"column":17},"end":{"line":362,"column":40}}]},"41":{"line":364,"type":"if","locations":[{"start":{"line":364,"column":8},"end":{"line":364,"column":8}},{"start":{"line":364,"column":8},"end":{"line":364,"column":8}}]},"42":{"line":393,"type":"if","locations":[{"start":{"line":393,"column":6},"end":{"line":393,"column":6}},{"start":{"line":393,"column":6},"end":{"line":393,"column":6}}]},"43":{"line":394,"type":"if","locations":[{"start":{"line":394,"column":8},"end":{"line":394,"column":8}},{"start":{"line":394,"column":8},"end":{"line":394,"column":8}}]},"44":{"line":404,"type":"if","locations":[{"start":{"line":404,"column":6},"end":{"line":404,"column":6}},{"start":{"line":404,"column":6},"end":{"line":404,"column":6}}]},"45":{"line":404,"type":"binary-expr","locations":[{"start":{"line":404,"column":10},"end":{"line":404,"column":13}},{"start":{"line":404,"column":17},"end":{"line":404,"column":27}}]},"46":{"line":420,"type":"if","locations":[{"start":{"line":420,"column":4},"end":{"line":420,"column":4}},{"start":{"line":420,"column":4},"end":{"line":420,"column":4}}]},"47":{"line":422,"type":"if","locations":[{"start":{"line":422,"column":11},"end":{"line":422,"column":11}},{"start":{"line":422,"column":11},"end":{"line":422,"column":11}}]},"48":{"line":428,"type":"if","locations":[{"start":{"line":428,"column":6},"end":{"line":428,"column":6}},{"start":{"line":428,"column":6},"end":{"line":428,"column":6}}]},"49":{"line":440,"type":"if","locations":[{"start":{"line":440,"column":6},"end":{"line":440,"column":6}},{"start":{"line":440,"column":6},"end":{"line":440,"column":6}}]},"50":{"line":463,"type":"if","locations":[{"start":{"line":463,"column":4},"end":{"line":463,"column":4}},{"start":{"line":463,"column":4},"end":{"line":463,"column":4}}]},"51":{"line":469,"type":"if","locations":[{"start":{"line":469,"column":6},"end":{"line":469,"column":6}},{"start":{"line":469,"column":6},"end":{"line":469,"column":6}}]},"52":{"line":471,"type":"if","locations":[{"start":{"line":471,"column":13},"end":{"line":471,"column":13}},{"start":{"line":471,"column":13},"end":{"line":471,"column":13}}]},"53":{"line":480,"type":"if","locations":[{"start":{"line":480,"column":4},"end":{"line":480,"column":4}},{"start":{"line":480,"column":4},"end":{"line":480,"column":4}}]},"54":{"line":483,"type":"binary-expr","locations":[{"start":{"line":483,"column":26},"end":{"line":483,"column":40}},{"start":{"line":483,"column":44},"end":{"line":483,"column":48}}]},"55":{"line":492,"type":"if","locations":[{"start":{"line":492,"column":6},"end":{"line":492,"column":6}},{"start":{"line":492,"column":6},"end":{"line":492,"column":6}}]},"56":{"line":493,"type":"if","locations":[{"start":{"line":493,"column":8},"end":{"line":493,"column":8}},{"start":{"line":493,"column":8},"end":{"line":493,"column":8}}]},"57":{"line":498,"type":"if","locations":[{"start":{"line":498,"column":10},"end":{"line":498,"column":10}},{"start":{"line":498,"column":10},"end":{"line":498,"column":10}}]},"58":{"line":514,"type":"if","locations":[{"start":{"line":514,"column":6},"end":{"line":514,"column":6}},{"start":{"line":514,"column":6},"end":{"line":514,"column":6}}]},"59":{"line":553,"type":"if","locations":[{"start":{"line":553,"column":2},"end":{"line":553,"column":2}},{"start":{"line":553,"column":2},"end":{"line":553,"column":2}}]},"60":{"line":553,"type":"binary-expr","locations":[{"start":{"line":553,"column":6},"end":{"line":553,"column":22}},{"start":{"line":553,"column":26},"end":{"line":553,"column":40}}]},"61":{"line":558,"type":"if","locations":[{"start":{"line":558,"column":2},"end":{"line":558,"column":2}},{"start":{"line":558,"column":2},"end":{"line":558,"column":2}}]},"62":{"line":563,"type":"binary-expr","locations":[{"start":{"line":563,"column":19},"end":{"line":563,"column":29}},{"start":{"line":563,"column":33},"end":{"line":563,"column":35}}]},"63":{"line":564,"type":"binary-expr","locations":[{"start":{"line":564,"column":11},"end":{"line":564,"column":67}},{"start":{"line":565,"column":8},"end":{"line":565,"column":52}},{"start":{"line":566,"column":8},"end":{"line":566,"column":48}}]},"64":{"line":570,"type":"if","locations":[{"start":{"line":570,"column":2},"end":{"line":570,"column":2}},{"start":{"line":570,"column":2},"end":{"line":570,"column":2}}]},"65":{"line":572,"type":"if","locations":[{"start":{"line":572,"column":4},"end":{"line":572,"column":4}},{"start":{"line":572,"column":4},"end":{"line":572,"column":4}}]},"66":{"line":575,"type":"if","locations":[{"start":{"line":575,"column":8},"end":{"line":575,"column":8}},{"start":{"line":575,"column":8},"end":{"line":575,"column":8}}]},"67":{"line":579,"type":"if","locations":[{"start":{"line":579,"column":10},"end":{"line":579,"column":10}},{"start":{"line":579,"column":10},"end":{"line":579,"column":10}}]},"68":{"line":580,"type":"if","locations":[{"start":{"line":580,"column":12},"end":{"line":580,"column":12}},{"start":{"line":580,"column":12},"end":{"line":580,"column":12}}]},"69":{"line":582,"type":"if","locations":[{"start":{"line":582,"column":19},"end":{"line":582,"column":19}},{"start":{"line":582,"column":19},"end":{"line":582,"column":19}}]},"70":{"line":602,"type":"binary-expr","locations":[{"start":{"line":602,"column":9},"end":{"line":602,"column":33}},{"start":{"line":602,"column":37},"end":{"line":602,"column":60}}]},"71":{"line":613,"type":"if","locations":[{"start":{"line":613,"column":2},"end":{"line":613,"column":2}},{"start":{"line":613,"column":2},"end":{"line":613,"column":2}}]},"72":{"line":623,"type":"if","locations":[{"start":{"line":623,"column":2},"end":{"line":623,"column":2}},{"start":{"line":623,"column":2},"end":{"line":623,"column":2}}]},"73":{"line":623,"type":"binary-expr","locations":[{"start":{"line":623,"column":6},"end":{"line":623,"column":11}},{"start":{"line":623,"column":15},"end":{"line":623,"column":32}}]},"74":{"line":640,"type":"if","locations":[{"start":{"line":640,"column":2},"end":{"line":640,"column":2}},{"start":{"line":640,"column":2},"end":{"line":640,"column":2}}]},"75":{"line":646,"type":"if","locations":[{"start":{"line":646,"column":2},"end":{"line":646,"column":2}},{"start":{"line":646,"column":2},"end":{"line":646,"column":2}}]},"76":{"line":647,"type":"if","locations":[{"start":{"line":647,"column":4},"end":{"line":647,"column":4}},{"start":{"line":647,"column":4},"end":{"line":647,"column":4}}]},"77":{"line":648,"type":"binary-expr","locations":[{"start":{"line":648,"column":22},"end":{"line":648,"column":34}},{"start":{"line":648,"column":38},"end":{"line":648,"column":40}}]},"78":{"line":653,"type":"if","locations":[{"start":{"line":653,"column":6},"end":{"line":653,"column":6}},{"start":{"line":653,"column":6},"end":{"line":653,"column":6}}]},"79":{"line":653,"type":"binary-expr","locations":[{"start":{"line":653,"column":10},"end":{"line":653,"column":29}},{"start":{"line":653,"column":33},"end":{"line":653,"column":62}}]},"80":{"line":660,"type":"if","locations":[{"start":{"line":660,"column":12},"end":{"line":660,"column":12}},{"start":{"line":660,"column":12},"end":{"line":660,"column":12}}]},"81":{"line":664,"type":"if","locations":[{"start":{"line":664,"column":14},"end":{"line":664,"column":14}},{"start":{"line":664,"column":14},"end":{"line":664,"column":14}}]},"82":{"line":665,"type":"if","locations":[{"start":{"line":665,"column":16},"end":{"line":665,"column":16}},{"start":{"line":665,"column":16},"end":{"line":665,"column":16}}]},"83":{"line":667,"type":"if","locations":[{"start":{"line":667,"column":23},"end":{"line":667,"column":23}},{"start":{"line":667,"column":23},"end":{"line":667,"column":23}}]},"84":{"line":671,"type":"if","locations":[{"start":{"line":671,"column":14},"end":{"line":671,"column":14}},{"start":{"line":671,"column":14},"end":{"line":671,"column":14}}]},"85":{"line":679,"type":"if","locations":[{"start":{"line":679,"column":11},"end":{"line":679,"column":11}},{"start":{"line":679,"column":11},"end":{"line":679,"column":11}}]},"86":{"line":680,"type":"if","locations":[{"start":{"line":680,"column":6},"end":{"line":680,"column":6}},{"start":{"line":680,"column":6},"end":{"line":680,"column":6}}]},"87":{"line":681,"type":"binary-expr","locations":[{"start":{"line":681,"column":24},"end":{"line":681,"column":36}},{"start":{"line":681,"column":40},"end":{"line":681,"column":42}}]},"88":{"line":687,"type":"if","locations":[{"start":{"line":687,"column":12},"end":{"line":687,"column":12}},{"start":{"line":687,"column":12},"end":{"line":687,"column":12}}]},"89":{"line":691,"type":"if","locations":[{"start":{"line":691,"column":14},"end":{"line":691,"column":14}},{"start":{"line":691,"column":14},"end":{"line":691,"column":14}}]},"90":{"line":694,"type":"if","locations":[{"start":{"line":694,"column":14},"end":{"line":694,"column":14}},{"start":{"line":694,"column":14},"end":{"line":694,"column":14}}]},"91":{"line":695,"type":"if","locations":[{"start":{"line":695,"column":16},"end":{"line":695,"column":16}},{"start":{"line":695,"column":16},"end":{"line":695,"column":16}}]},"92":{"line":697,"type":"if","locations":[{"start":{"line":697,"column":23},"end":{"line":697,"column":23}},{"start":{"line":697,"column":23},"end":{"line":697,"column":23}}]},"93":{"line":703,"type":"if","locations":[{"start":{"line":703,"column":18},"end":{"line":703,"column":18}},{"start":{"line":703,"column":18},"end":{"line":703,"column":18}}]},"94":{"line":728,"type":"if","locations":[{"start":{"line":728,"column":8},"end":{"line":728,"column":8}},{"start":{"line":728,"column":8},"end":{"line":728,"column":8}}]},"95":{"line":732,"type":"if","locations":[{"start":{"line":732,"column":10},"end":{"line":732,"column":10}},{"start":{"line":732,"column":10},"end":{"line":732,"column":10}}]},"96":{"line":733,"type":"if","locations":[{"start":{"line":733,"column":12},"end":{"line":733,"column":12}},{"start":{"line":733,"column":12},"end":{"line":733,"column":12}}]},"97":{"line":735,"type":"if","locations":[{"start":{"line":735,"column":19},"end":{"line":735,"column":19}},{"start":{"line":735,"column":19},"end":{"line":735,"column":19}}]},"98":{"line":757,"type":"if","locations":[{"start":{"line":757,"column":6},"end":{"line":757,"column":6}},{"start":{"line":757,"column":6},"end":{"line":757,"column":6}}]},"99":{"line":761,"type":"if","locations":[{"start":{"line":761,"column":8},"end":{"line":761,"column":8}},{"start":{"line":761,"column":8},"end":{"line":761,"column":8}}]},"100":{"line":762,"type":"binary-expr","locations":[{"start":{"line":762,"column":23},"end":{"line":762,"column":50}},{"start":{"line":762,"column":54},"end":{"line":762,"column":59}}]},"101":{"line":765,"type":"if","locations":[{"start":{"line":765,"column":8},"end":{"line":765,"column":8}},{"start":{"line":765,"column":8},"end":{"line":765,"column":8}}]},"102":{"line":766,"type":"if","locations":[{"start":{"line":766,"column":10},"end":{"line":766,"column":10}},{"start":{"line":766,"column":10},"end":{"line":766,"column":10}}]},"103":{"line":768,"type":"if","locations":[{"start":{"line":768,"column":17},"end":{"line":768,"column":17}},{"start":{"line":768,"column":17},"end":{"line":768,"column":17}}]},"104":{"line":783,"type":"if","locations":[{"start":{"line":783,"column":2},"end":{"line":783,"column":2}},{"start":{"line":783,"column":2},"end":{"line":783,"column":2}}]},"105":{"line":791,"type":"if","locations":[{"start":{"line":791,"column":8},"end":{"line":791,"column":8}},{"start":{"line":791,"column":8},"end":{"line":791,"column":8}}]},"106":{"line":795,"type":"if","locations":[{"start":{"line":795,"column":10},"end":{"line":795,"column":10}},{"start":{"line":795,"column":10},"end":{"line":795,"column":10}}]},"107":{"line":798,"type":"if","locations":[{"start":{"line":798,"column":10},"end":{"line":798,"column":10}},{"start":{"line":798,"column":10},"end":{"line":798,"column":10}}]},"108":{"line":799,"type":"if","locations":[{"start":{"line":799,"column":12},"end":{"line":799,"column":12}},{"start":{"line":799,"column":12},"end":{"line":799,"column":12}}]},"109":{"line":801,"type":"if","locations":[{"start":{"line":801,"column":19},"end":{"line":801,"column":19}},{"start":{"line":801,"column":19},"end":{"line":801,"column":19}}]},"110":{"line":806,"type":"if","locations":[{"start":{"line":806,"column":12},"end":{"line":806,"column":12}},{"start":{"line":806,"column":12},"end":{"line":806,"column":12}}]},"111":{"line":806,"type":"binary-expr","locations":[{"start":{"line":806,"column":16},"end":{"line":806,"column":23}},{"start":{"line":806,"column":27},"end":{"line":806,"column":43}}]}},"code":["var SCSocket = require('./scsocket');","var AuthEngine = require('sc-auth').AuthEngine;","var formatter = require('sc-formatter');","var EventEmitter = require('events').EventEmitter;","var base64id = require('base64id');","var async = require('async');","var url = require('url');","var domain = require('sc-domain');","var crypto = require('crypto');","var uuid = require('uuid');","var SCSimpleBroker = require('sc-simple-broker').SCSimpleBroker;","","var scErrors = require('sc-errors');","var AuthTokenExpiredError = scErrors.AuthTokenExpiredError;","var AuthTokenInvalidError = scErrors.AuthTokenInvalidError;","var AuthTokenNotBeforeError = scErrors.AuthTokenNotBeforeError;","var AuthTokenError = scErrors.AuthTokenError;","var SilentMiddlewareBlockedError = scErrors.SilentMiddlewareBlockedError;","var InvalidOptionsError = scErrors.InvalidOptionsError;","var InvalidActionError = scErrors.InvalidActionError;","var BrokerError = scErrors.BrokerError;","var ServerProtocolError = scErrors.ServerProtocolError;","","","var SCServer = function (options) {","  var self = this;","","  var opts = {","    brokerEngine: new SCSimpleBroker(),","    wsEngine: 'uws',","    allowClientPublish: true,","    ackTimeout: 10000,","    handshakeTimeout: 10000,","    pingTimeout: 20000,","    pingInterval: 8000,","    origins: '*:*',","    appName: uuid.v4(),","    path: '/socketcluster/',","    authDefaultExpiry: 86400,","    authSignAsync: false,","    authVerifyAsync: true,","    middlewareEmitWarnings: true","  };","","  for (var i in options) {","    if (options.hasOwnProperty(i)) {","      opts[i] = options[i];","    }","  }","","  this.MIDDLEWARE_HANDSHAKE = 'handshake';","  this.MIDDLEWARE_EMIT = 'emit';","  this.MIDDLEWARE_SUBSCRIBE = 'subscribe';","  this.MIDDLEWARE_PUBLISH_IN = 'publishIn';","  this.MIDDLEWARE_PUBLISH_OUT = 'publishOut';","  this.MIDDLEWARE_AUTHENTICATE = 'authenticate';","","  // Deprecated","  this.MIDDLEWARE_PUBLISH = this.MIDDLEWARE_PUBLISH_IN;","","  this._subscribeEvent = '#subscribe';","  this._publishEvent = '#publish';","","  this._middleware = {};","  this._middleware[this.MIDDLEWARE_HANDSHAKE] = [];","  this._middleware[this.MIDDLEWARE_EMIT] = [];","  this._middleware[this.MIDDLEWARE_SUBSCRIBE] = [];","  this._middleware[this.MIDDLEWARE_PUBLISH_IN] = [];","  this._middleware[this.MIDDLEWARE_PUBLISH_OUT] = [];","  this._middleware[this.MIDDLEWARE_AUTHENTICATE] = [];","","  this.origins = opts.origins;","  this._allowAllOrigins = this.origins.indexOf('*:*') != -1;","","  this.ackTimeout = opts.ackTimeout;","  this.handshakeTimeout = opts.handshakeTimeout;","  this.pingInterval = opts.pingInterval;","  this.pingTimeout = opts.pingTimeout;","  this.allowClientPublish = opts.allowClientPublish;","  this.perMessageDeflate = opts.perMessageDeflate;","  this.httpServer = opts.httpServer;","  this.socketChannelLimit = opts.socketChannelLimit;","","  this.brokerEngine = opts.brokerEngine;","  this.appName = opts.appName || '';","  this.middlewareEmitWarnings = opts.middlewareEmitWarnings;","  this._path = opts.path;","  this.isReady = false;","","  this.brokerEngine.once('ready', function () {","    self.isReady = true;","    EventEmitter.prototype.emit.call(self, 'ready');","  });","","  var wsEngine = require(opts.wsEngine);","  if (!wsEngine || !wsEngine.Server) {","    throw new InvalidOptionsError('The wsEngine option must be a path or module name which points ' +","      'to a valid WebSocket engine module with a compatible interface');","  }","  var WSServer = wsEngine.Server;","","  if (opts.authPrivateKey != null || opts.authPublicKey != null) {","    if (opts.authPrivateKey == null) {","      throw new InvalidOptionsError('The authPrivateKey option must be specified if authPublicKey is specified');","    } else if (opts.authPublicKey == null) {","      throw new InvalidOptionsError('The authPublicKey option must be specified if authPrivateKey is specified');","    }","    this.signatureKey = opts.authPrivateKey;","    this.verificationKey = opts.authPublicKey;","  } else {","    if (opts.authKey == null) {","      opts.authKey = crypto.randomBytes(32).toString('hex');","    }","    this.signatureKey = opts.authKey;","    this.verificationKey = opts.authKey;","  }","","  this.authVerifyAsync = opts.authVerifyAsync;","  this.authSignAsync = opts.authSignAsync;","","  this.defaultVerificationOptions = {","    async: this.authVerifyAsync","  };","  this.defaultSignatureOptions = {","    expiresIn: opts.authDefaultExpiry,","    async: this.authSignAsync","  };","","  if (opts.authAlgorithm != null) {","    this.defaultVerificationOptions.algorithms = [opts.authAlgorithm];","    this.defaultSignatureOptions.algorithm = opts.authAlgorithm;","  }","","  if (opts.authEngine) {","    this.auth = opts.authEngine;","  } else {","    // Default authentication engine","    this.auth = new AuthEngine();","  }","","  if (opts.codecEngine) {","    this.codec = opts.codecEngine;","  } else {","    // Default codec engine","    this.codec = formatter;","  }","","  this.clients = {};","  this.clientsCount = 0;","","  this.exchange = this.global = this.brokerEngine.exchange();","","  this.wsServer = new WSServer({","    server: this.httpServer,","    path: this._path,","    clientTracking: false,","    perMessageDeflate: this.perMessageDeflate,","    handleProtocols: opts.handleProtocols,","    verifyClient: this.verifyHandshake.bind(this)","  });","","  this.wsServer.on('error', this._handleServerError.bind(this));","  this.wsServer.on('connection', this._handleSocketConnection.bind(this));","};","","SCServer.prototype = Object.create(EventEmitter.prototype);","","SCServer.prototype.setAuthEngine = function (authEngine) {","  this.auth = authEngine;","};","","SCServer.prototype.setCodecEngine = function (codecEngine) {","  this.codec = codecEngine;","};","","SCServer.prototype._handleServerError = function (error) {","  if (typeof error == 'string') {","    error = new ServerProtocolError(error);","  }","  this.emit('error', error);","};","","SCServer.prototype._handleSocketError = function (error) {","  // We don't want to crash the entire worker on socket error","  // so we emit it as a warning instead.","  this.emit('warning', error);","};","","SCServer.prototype._handleHandshakeTimeout = function (scSocket) {","  scSocket.disconnect(4005);","};","","SCServer.prototype._subscribeSocket = function (socket, channelOptions, callback) {","  var self = this;","","  if (channelOptions instanceof Array) {","    var tasks = [];","    for (var i in channelOptions) {","      if (channelOptions.hasOwnProperty(i)) {","        (function (singleChannelOptions) {","          tasks.push(function (cb) {","            self._subscribeSocketToSingleChannel(socket, singleChannelOptions, cb);","          });","        })(channelOptions[i]);","      }","    }","    async.waterfall(tasks, function (err) {","      callback && callback(err);","    });","  } else {","    this._subscribeSocketToSingleChannel(socket, channelOptions, callback);","  }","};","","SCServer.prototype._subscribeSocketToSingleChannel = function (socket, channelOptions, callback) {","  var self = this;","  var channelName = channelOptions.channel;","","  if (this.socketChannelLimit && socket.channelSubscriptionsCount >= this.socketChannelLimit) {","    callback && callback('Socket ' + socket.id + ' tried to exceed the channel subscription limit of ' +","      this.socketChannelLimit);","  } else {","    if (socket.channelSubscriptionsCount == null) {","      socket.channelSubscriptionsCount = 0;","    }","    if (socket.channelSubscriptions[channelName] == null) {","      socket.channelSubscriptions[channelName] = true;","      socket.channelSubscriptionsCount++;","    }","","    this.brokerEngine.subscribeSocket(socket, channelName, function (err) {","      if (err) {","        delete socket.channelSubscriptions[channelName];","        socket.channelSubscriptionsCount--;","      } else {","        socket.emit('subscribe', channelName, channelOptions);","      }","      callback && callback(err);","    });","  }","};","","SCServer.prototype._unsubscribeSocket = function (socket, channels, callback) {","  var self = this;","","  if (channels == null) {","    channels = [];","    for (var channel in socket.channelSubscriptions) {","      if (socket.channelSubscriptions.hasOwnProperty(channel)) {","        channels.push(channel);","      }","    }","  }","  if (channels instanceof Array) {","    var tasks = [];","    var len = channels.length;","    for (var i = 0; i < len; i++) {","      (function (channel) {","        tasks.push(function (cb) {","          self._unsubscribeSocketFromSingleChannel(socket, channel, cb);","        });","      })(channels[i]);","    }","    async.waterfall(tasks, function (err) {","      callback && callback(err);","    });","  } else {","    this._unsubscribeSocketFromSingleChannel(socket, channels, callback);","  }","};","","SCServer.prototype._unsubscribeSocketFromSingleChannel = function (socket, channel, callback) {","  var self = this;","","  delete socket.channelSubscriptions[channel];","  if (socket.channelSubscriptionsCount != null) {","    socket.channelSubscriptionsCount--;","  }","","  this.brokerEngine.unsubscribeSocket(socket, channel, function (err) {","    socket.emit('unsubscribe', channel);","    callback && callback(err);","  });","};","","SCServer.prototype._processTokenError = function (err) {","  var authError = null;","  var isBadToken = true;","","  if (err) {","    if (err.name == 'TokenExpiredError') {","      authError = new AuthTokenExpiredError(err.message, err.expiredAt);","    } else if (err.name == 'JsonWebTokenError') {","      authError = new AuthTokenInvalidError(err.message);","    } else if (err.name == 'NotBeforeError') {","      authError = new AuthTokenNotBeforeError(err.message);","      // In this case, the token is good; it's just not active yet.","      isBadToken = false;","    } else {","      authError = new AuthTokenError(err.message);","    }","  }","","  return {","    authError: authError,","    isBadToken: isBadToken","  };","};","","SCServer.prototype._emitBadAuthTokenError = function (scSocket, error, signedAuthToken) {","  scSocket.emit('badAuthToken', {","    authError: error,","    signedAuthToken: signedAuthToken","  });","  this.emit('badSocketAuthToken', {","    socket: scSocket,","    authError: error,","    signedAuthToken: signedAuthToken","  });","};","","SCServer.prototype._processAuthToken = function (scSocket, signedAuthToken, callback) {","  var self = this;","","  this.auth.verifyToken(signedAuthToken, this.verificationKey, this.defaultVerificationOptions, function (err, authToken) {","    if (authToken) {","      scSocket.signedAuthToken = signedAuthToken;","      scSocket.authToken = authToken;","      scSocket.authState = scSocket.AUTHENTICATED;","    } else {","      scSocket.signedAuthToken = null;","      scSocket.authToken = null;","      scSocket.authState = scSocket.UNAUTHENTICATED;","    }","","    // If the socket is authenticated, pass it through the MIDDLEWARE_AUTHENTICATE middleware.","    // If the token is bad, we will tell the client to remove it.","    // If there is an error but the token is good, then we will send back a 'quiet' error instead","    // (as part of the status object only).","    if (scSocket.authToken) {","      self._passThroughAuthenticateMiddleware({","        socket: scSocket,","        signedAuthToken: scSocket.signedAuthToken,","        authToken: scSocket.authToken","      }, function (middlewareError, isBadToken) {","        if (middlewareError) {","          scSocket.authToken = null;","          scSocket.authState = scSocket.UNAUTHENTICATED;","          if (isBadToken) {","            self._emitBadAuthTokenError(scSocket, middlewareError, signedAuthToken);","          }","        }","        // If an error is passed back from the authenticate middleware, it will be treated as a","        // server warning and not a socket error.","        callback(middlewareError, isBadToken || false);","      });","    } else {","      var errorData = self._processTokenError(err);","","      // If the error is related to the JWT being badly formatted, then we will","      // treat the error as a socket error.","      if (err && signedAuthToken != null) {","        scSocket.emit('error', err);","        if (errorData.isBadToken) {","          self._emitBadAuthTokenError(scSocket, err, signedAuthToken);","        }","      }","      callback(errorData.authError, errorData.isBadToken);","    }","  });","};","","SCServer.prototype._handleSocketConnection = function (wsSocket) {","  var self = this;","","  var id = this.generateId();","","  var socketDomain = domain.create();","  var scSocket = new SCSocket(id, this, wsSocket);","  socketDomain.add(scSocket);","","  // Emit event to signal that a socket handshake has been initiated.","  // The _handshake event is for internal use (including third-party plugins)","  this.emit('_handshake', scSocket);","  this.emit('handshake', scSocket);","","  socketDomain.on('error', function (err) {","    self._handleSocketError(err);","  });","","  scSocket.on('#authenticate', function (signedAuthToken, respond) {","    self._processAuthToken(scSocket, signedAuthToken, function (err, isBadToken) {","      if (err) {","        if (isBadToken) {","          scSocket.deauthenticate();","        }","      } else {","        scSocket.emit('authenticate', scSocket.authToken);","      }","      var authStatus = {","        isAuthenticated: !!scSocket.authToken,","        authError: scErrors.dehydrateError(err)","      };","      if (err && isBadToken) {","        respond(err, authStatus);","      } else {","        respond(null, authStatus);","      }","    });","  });","","  scSocket.on('#removeAuthToken', function () {","    var oldToken = scSocket.authToken;","    scSocket.authToken = null;","    scSocket.authState = scSocket.UNAUTHENTICATED;","    scSocket.emit('deauthenticate', oldToken);","  });","","  scSocket.on('#subscribe', function (channelOptions, res) {","    if (!channelOptions) {","      channelOptions = {};","    } else if (typeof channelOptions == 'string') {","      channelOptions = {","        channel: channelOptions","      };","    }","    self._subscribeSocket(scSocket, channelOptions, function (err) {","      if (err) {","        var error = new BrokerError('Failed to subscribe socket to channel - ' + err);","        res(error);","        scSocket.emit('error', error);","      } else {","        res();","      }","    });","  });","","  scSocket.on('#unsubscribe', function (channel, res) {","    self._unsubscribeSocket(scSocket, channel, function (err) {","      if (err) {","        var error = new BrokerError('Failed to unsubscribe socket from channel - ' + err);","        res(error);","        scSocket.emit('error', error);","      } else {","        res();","      }","    });","  });","","  scSocket.once('_disconnect', function () {","    clearTimeout(scSocket._handshakeTimeoutRef);","","    scSocket.off('#handshake');","    scSocket.off('#authenticate');","    scSocket.off('#removeAuthToken');","    scSocket.off('#subscribe');","    scSocket.off('#unsubscribe');","    scSocket.off('authenticate');","    scSocket.off('deauthenticate');","","    var isClientFullyConnected = !!self.clients[id];","","    if (isClientFullyConnected) {","      delete self.clients[id];","      self.clientsCount--;","    }","","    self._unsubscribeSocket(scSocket, null, function (err) {","      if (err) {","        scSocket.emit('error', new BrokerError('Failed to unsubscribe socket from all channels - ' + err));","      } else if (isClientFullyConnected) {","        self.emit('_disconnection', scSocket);","        self.emit('disconnection', scSocket);","      }","    });","  });","","  scSocket._handshakeTimeoutRef = setTimeout(this._handleHandshakeTimeout.bind(this, scSocket), this.handshakeTimeout);","  scSocket.once('#handshake', function (data, respond) {","    if (!data) {","      data = {};","    }","    var signedAuthToken = data.authToken || null;","    clearTimeout(scSocket._handshakeTimeoutRef);","","    self._processAuthToken(scSocket, signedAuthToken, function (err, isBadToken) {","      var status = {","        id: scSocket.id,","        pingTimeout: self.pingTimeout","      };","","      if (err) {","        if (signedAuthToken != null) {","          // Because the token is optional as part of the handshake, we don't count","          // it as an error if the token wasn't provided.","          status.authError = scErrors.dehydrateError(err);","","          if (isBadToken) {","            scSocket.deauthenticate();","          }","        }","      }","      status.isAuthenticated = !!scSocket.authToken;","","      self.clients[id] = scSocket;","      self.clientsCount++;","","      scSocket.state = scSocket.OPEN;","      scSocket.exchange = scSocket.global = self.exchange;","","      self.emit('_connection', scSocket);","      self.emit('connection', scSocket);","","      if (status.isAuthenticated) {","        scSocket.emit('authenticate', scSocket.authToken);","      }","      // Treat authentication failure as a 'soft' error","      respond(null, status);","    });","  });","};","","SCServer.prototype.close = function () {","  this.isReady = false;","  this.wsServer.close.apply(this.wsServer, arguments);","};","","SCServer.prototype.getPath = function () {","  return this._path;","};","","SCServer.prototype.generateId = function () {","  return base64id.generateId();","};","","SCServer.prototype.addMiddleware = function (type, middleware) {","  this._middleware[type].push(middleware);","};","","SCServer.prototype.removeMiddleware = function (type, middleware) {","  var middlewareFunctions = this._middleware[type];","","  this._middleware[type] = middlewareFunctions.filter(function (fn) {","    return fn != middleware;","  });","};","","SCServer.prototype.verifyHandshake = function (info, cb) {","  var self = this;","","  var req = info.req;","  var origin = info.origin;","  if (origin == 'null' || origin == null) {","    origin = '*';","  }","  var ok = false;","","  if (this._allowAllOrigins) {","    ok = true;","  } else {","    try {","      var parts = url.parse(origin);","      parts.port = parts.port || 80;","      ok = ~this.origins.indexOf(parts.hostname + ':' + parts.port) ||","        ~this.origins.indexOf(parts.hostname + ':*') ||","        ~this.origins.indexOf('*:' + parts.port);","    } catch (e) {}","  }","","  if (ok) {","    var handshakeMiddleware = this._middleware[this.MIDDLEWARE_HANDSHAKE];","    if (handshakeMiddleware.length) {","      var callbackInvoked = false;","      async.applyEachSeries(handshakeMiddleware, req, function (err) {","        if (callbackInvoked) {","          self.emit('warning', new InvalidActionError('Callback for ' + self.MIDDLEWARE_HANDSHAKE + ' middleware was already invoked'));","        } else {","          callbackInvoked = true;","          if (err) {","            if (err === true) {","              err = new SilentMiddlewareBlockedError('Action was silently blocked by ' + self.MIDDLEWARE_HANDSHAKE + ' middleware', self.MIDDLEWARE_HANDSHAKE);","            } else if (self.middlewareEmitWarnings) {","              self.emit('warning', err);","            }","            cb(false, 401, err);","          } else {","            cb(true);","          }","        }","      });","    } else {","      cb(true);","    }","  } else {","    var err = new ServerProtocolError('Failed to authorize socket handshake - Invalid origin: ' + origin);","    this.emit('warning', err);","    cb(false, 403, err);","  }","};","","SCServer.prototype._isPrivateTransmittedEvent = function (event) {","  return typeof event == 'string' && event.indexOf('#') == 0;","};","","SCServer.prototype.verifyInboundEvent = function (socket, eventName, eventData, cb) {","  var request = {","    socket: socket,","    event: eventName,","    data: eventData","  };","","  var token = socket.getAuthToken();","  if (this.isAuthTokenExpired(token)) {","    request.authTokenExpiredError = new AuthTokenExpiredError('The socket auth token has expired', token.exp);","","    socket.deauthenticate();","  }","","  this._passThroughMiddleware(request, cb);","};","","SCServer.prototype.isAuthTokenExpired = function (token) {","  if (token && token.exp != null) {","    var currentTime = Date.now();","    var expiryMilliseconds = token.exp * 1000;","    return currentTime > expiryMilliseconds;","  }","  return false;","};","","SCServer.prototype._passThroughMiddleware = function (options, cb) {","  var self = this;","","  var callbackInvoked = false;","","  var request = {","    socket: options.socket","  };","","  if (options.authTokenExpiredError != null) {","    request.authTokenExpiredError = options.authTokenExpiredError;","  }","","  var event = options.event;","","  if (this._isPrivateTransmittedEvent(event)) {","    if (event == this._subscribeEvent) {","      var eventData = options.data || {};","      request.channel = eventData.channel;","      request.waitForAuth = eventData.waitForAuth;","      request.data = eventData.data;","","      if (request.waitForAuth && request.authTokenExpiredError) {","        // If the channel has the waitForAuth flag set, then we will handle the expiry quietly","        // and we won't pass this request through the subscribe middleware.","        cb(request.authTokenExpiredError, eventData);","      } else {","        async.applyEachSeries(this._middleware[this.MIDDLEWARE_SUBSCRIBE], request,","          function (err) {","            if (callbackInvoked) {","              self.emit('warning', new InvalidActionError('Callback for ' + self.MIDDLEWARE_SUBSCRIBE + ' middleware was already invoked'));","            } else {","              callbackInvoked = true;","              if (err) {","                if (err === true) {","                  err = new SilentMiddlewareBlockedError('Action was silently blocked by ' + self.MIDDLEWARE_SUBSCRIBE + ' middleware', self.MIDDLEWARE_SUBSCRIBE);","                } else if (self.middlewareEmitWarnings) {","                  self.emit('warning', err);","                }","              }","              if (request.data !== undefined) {","                eventData.data = request.data;","              }","              cb(err, eventData);","            }","          }","        );","      }","    } else if (event == this._publishEvent) {","      if (this.allowClientPublish) {","        var eventData = options.data || {};","        request.channel = eventData.channel;","        request.data = eventData.data;","","        async.applyEachSeries(this._middleware[this.MIDDLEWARE_PUBLISH_IN], request,","          function (err) {","            if (callbackInvoked) {","              self.emit('warning', new InvalidActionError('Callback for ' + self.MIDDLEWARE_PUBLISH_IN + ' middleware was already invoked'));","            } else {","              callbackInvoked = true;","              if (request.data !== undefined) {","                eventData.data = request.data;","              }","              if (err) {","                if (err === true) {","                  err = new SilentMiddlewareBlockedError('Action was silently blocked by ' + self.MIDDLEWARE_PUBLISH_IN + ' middleware', self.MIDDLEWARE_PUBLISH_IN);","                } else if (self.middlewareEmitWarnings) {","                  self.emit('warning', err);","                }","                cb(err, eventData);","              } else {","                self.exchange.publish(request.channel, request.data, function (err) {","                  if (err) {","                    err = new BrokerError(err);","                    self.emit('warning', err);","                  }","                  cb(err, eventData);","                });","              }","            }","          }","        );","      } else {","        var noPublishError = new InvalidActionError('Client publish feature is disabled');","        self.emit('warning', noPublishError);","        cb(noPublishError, options.data);","      }","    } else {","      // Do not allow blocking other reserved events or it could interfere with SC behaviour","      cb(null, options.data);","    }","  } else {","    request.event = event;","    request.data = options.data;","","    async.applyEachSeries(this._middleware[this.MIDDLEWARE_EMIT], request,","      function (err) {","        if (callbackInvoked) {","          self.emit('warning', new InvalidActionError('Callback for ' + self.MIDDLEWARE_EMIT + ' middleware was already invoked'));","        } else {","          callbackInvoked = true;","          if (err) {","            if (err === true) {","              err = new SilentMiddlewareBlockedError('Action was silently blocked by ' + self.MIDDLEWARE_EMIT + ' middleware', self.MIDDLEWARE_EMIT);","            } else if (self.middlewareEmitWarnings) {","              self.emit('warning', err);","            }","          }","          cb(err, request.data);","        }","      }","    );","  }","};","","SCServer.prototype._passThroughAuthenticateMiddleware = function (options, cb) {","  var self = this;","  var callbackInvoked = false;","","  var request = {","    socket: options.socket,","    authToken: options.authToken","  };","","  async.applyEachSeries(this._middleware[this.MIDDLEWARE_AUTHENTICATE], request,","    function (err, results) {","      if (callbackInvoked) {","        self.emit('warning', new InvalidActionError('Callback for ' + self.MIDDLEWARE_AUTHENTICATE + ' middleware was already invoked'));","      } else {","        var isBadToken = false;","        if (results.length) {","          isBadToken = results[results.length - 1] || false;","        }","        callbackInvoked = true;","        if (err) {","          if (err === true) {","            err = new SilentMiddlewareBlockedError('Action was silently blocked by ' + self.MIDDLEWARE_AUTHENTICATE + ' middleware', self.MIDDLEWARE_AUTHENTICATE);","          } else if (self.middlewareEmitWarnings) {","            self.emit('warning', err);","          }","        }","        cb(err, isBadToken);","      }","    }","  );","};","","SCServer.prototype.verifyOutboundEvent = function (socket, eventName, eventData, options, cb) {","  var self = this;","","  var callbackInvoked = false;","","  if (eventName == this._publishEvent) {","    var request = {","      socket: socket,","      channel: eventData.channel,","      data: eventData.data","    };","    async.applyEachSeries(this._middleware[this.MIDDLEWARE_PUBLISH_OUT], request,","      function (err) {","        if (callbackInvoked) {","          self.emit('warning', new InvalidActionError('Callback for ' + self.MIDDLEWARE_PUBLISH_OUT + ' middleware was already invoked'));","        } else {","          callbackInvoked = true;","          if (request.data !== undefined) {","            eventData.data = request.data;","          }","          if (err) {","            if (err === true) {","              err = new SilentMiddlewareBlockedError('Action was silently blocked by ' + self.MIDDLEWARE_PUBLISH_OUT + ' middleware', self.MIDDLEWARE_PUBLISH_OUT);","            } else if (self.middlewareEmitWarnings) {","              self.emit('warning', err);","            }","            cb(err, eventData);","          } else {","            if (options && request.useCache) {","              options.useCache = true;","            }","            cb(null, eventData);","          }","        }","      }","    );","  } else {","    cb(null, eventData);","  }","};","","module.exports = SCServer;",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"25":1,"26":0,"28":0,"45":0,"46":0,"47":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"59":0,"61":0,"62":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"72":0,"73":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"84":0,"85":0,"86":0,"87":0,"88":0,"90":0,"91":0,"92":0,"95":0,"96":0,"97":0,"100":0,"102":0,"103":0,"104":0,"105":0,"106":0,"108":0,"109":0,"111":0,"112":0,"114":0,"115":0,"118":0,"119":0,"121":0,"124":0,"129":0,"130":0,"131":0,"134":0,"135":0,"138":0,"141":0,"142":0,"145":0,"148":0,"149":0,"151":0,"153":0,"162":0,"163":0,"166":1,"168":1,"169":0,"172":1,"173":0,"176":1,"177":0,"178":0,"180":0,"183":1,"186":0,"189":1,"190":0,"193":1,"194":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"207":0,"208":0,"211":0,"215":1,"216":0,"217":0,"219":0,"220":0,"223":0,"224":0,"226":0,"227":0,"228":0,"231":0,"232":0,"233":0,"234":0,"236":0,"238":0,"243":1,"244":0,"246":0,"247":0,"248":0,"249":0,"250":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"264":0,"265":0,"268":0,"272":1,"273":0,"275":0,"276":0,"277":0,"280":0,"281":0,"282":0,"286":1,"287":0,"288":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"298":0,"300":0,"304":0,"310":1,"311":0,"315":0,"322":1,"323":0,"325":0,"326":0,"327":0,"328":0,"329":0,"331":0,"332":0,"333":0,"340":0,"341":0,"346":0,"347":0,"348":0,"349":0,"350":0,"355":0,"358":0,"362":0,"363":0,"364":0,"365":0,"368":0,"373":1,"374":0,"376":0,"378":0,"379":0,"380":0,"384":0,"385":0,"387":0,"388":0,"391":0,"392":0,"393":0,"394":0,"395":0,"398":0,"400":0,"404":0,"405":0,"407":0,"412":0,"413":0,"414":0,"415":0,"416":0,"419":0,"420":0,"421":0,"422":0,"423":0,"427":0,"428":0,"429":0,"430":0,"431":0,"433":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"445":0,"450":0,"451":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":0,"461":0,"463":0,"464":0,"465":0,"468":0,"469":0,"470":0,"471":0,"472":0,"473":0,"478":0,"479":0,"480":0,"481":0,"483":0,"484":0,"486":0,"487":0,"492":0,"493":0,"496":0,"498":0,"499":0,"503":0,"505":0,"506":0,"508":0,"509":0,"511":0,"512":0,"514":0,"515":0,"518":0,"523":1,"524":0,"525":0,"528":1,"529":0,"532":1,"533":0,"536":1,"537":0,"540":1,"541":0,"543":0,"544":0,"548":1,"549":0,"551":0,"552":0,"553":0,"554":0,"556":0,"558":0,"559":0,"561":0,"562":0,"563":0,"564":0,"570":0,"571":0,"572":0,"573":0,"574":0,"575":0,"576":0,"578":0,"579":0,"580":0,"581":0,"582":0,"583":0,"585":0,"587":0,"592":0,"595":0,"596":0,"597":0,"601":1,"602":0,"605":1,"606":0,"612":0,"613":0,"614":0,"616":0,"619":0,"622":1,"623":0,"624":0,"625":0,"626":0,"628":0,"631":1,"632":0,"634":0,"636":0,"640":0,"641":0,"644":0,"646":0,"647":0,"648":0,"649":0,"650":0,"651":0,"653":0,"656":0,"658":0,"660":0,"661":0,"663":0,"664":0,"665":0,"666":0,"667":0,"668":0,"671":0,"672":0,"674":0,"679":0,"680":0,"681":0,"682":0,"683":0,"685":0,"687":0,"688":0,"690":0,"691":0,"692":0,"694":0,"695":0,"696":0,"697":0,"698":0,"700":0,"702":0,"703":0,"704":0,"705":0,"707":0,"714":0,"715":0,"716":0,"720":0,"723":0,"724":0,"726":0,"728":0,"729":0,"731":0,"732":0,"733":0,"734":0,"735":0,"736":0,"739":0,"746":1,"747":0,"748":0,"750":0,"755":0,"757":0,"758":0,"760":0,"761":0,"762":0,"764":0,"765":0,"766":0,"767":0,"768":0,"769":0,"772":0,"778":1,"779":0,"781":0,"783":0,"784":0,"789":0,"791":0,"792":0,"794":0,"795":0,"796":0,"798":0,"799":0,"800":0,"801":0,"802":0,"804":0,"806":0,"807":0,"809":0,"815":0,"819":1}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster-server/scsocket.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster-server/scsocket.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":0,"92":0,"93":1,"94":0,"95":0,"96":0,"97":0,"98":0,"99":1,"100":0,"101":1,"102":0,"103":1,"104":0,"105":1,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":1,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":1,"130":0,"131":1,"132":0,"133":0,"134":0,"135":0,"136":1,"137":0,"138":1,"139":0,"140":1,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":1,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":1,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":1,"195":0,"196":1,"197":0,"198":0,"199":0,"200":1,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":1,"208":0,"209":0,"210":0,"211":0,"212":0,"213":1,"214":0,"215":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":15},"end":{"line":12,"column":45}}},"2":{"name":"(anonymous_2)","line":65,"loc":{"start":{"line":65,"column":26},"end":{"line":65,"column":41}}},"3":{"name":"(anonymous_3)","line":69,"loc":{"start":{"line":69,"column":26},"end":{"line":69,"column":48}}},"4":{"name":"(anonymous_4)","line":77,"loc":{"start":{"line":77,"column":28},"end":{"line":77,"column":54}}},"5":{"name":"(anonymous_5)","line":109,"loc":{"start":{"line":109,"column":68},"end":{"line":109,"column":92}}},"6":{"name":"(anonymous_6)","line":161,"loc":{"start":{"line":161,"column":31},"end":{"line":161,"column":43}}},"7":{"name":"(anonymous_7)","line":167,"loc":{"start":{"line":167,"column":39},"end":{"line":167,"column":51}}},"8":{"name":"(anonymous_8)","line":171,"loc":{"start":{"line":171,"column":39},"end":{"line":171,"column":50}}},"9":{"name":"(anonymous_9)","line":177,"loc":{"start":{"line":177,"column":33},"end":{"line":177,"column":45}}},"10":{"name":"(anonymous_10)","line":181,"loc":{"start":{"line":181,"column":30},"end":{"line":181,"column":42}}},"11":{"name":"(anonymous_11)","line":185,"loc":{"start":{"line":185,"column":38},"end":{"line":185,"column":50}}},"12":{"name":"(anonymous_12)","line":189,"loc":{"start":{"line":189,"column":32},"end":{"line":189,"column":54}}},"13":{"name":"(anonymous_13)","line":213,"loc":{"start":{"line":213,"column":32},"end":{"line":213,"column":54}}},"14":{"name":"(anonymous_14)","line":232,"loc":{"start":{"line":232,"column":31},"end":{"line":232,"column":43}}},"15":{"name":"(anonymous_15)","line":236,"loc":{"start":{"line":236,"column":26},"end":{"line":236,"column":51}}},"16":{"name":"(anonymous_16)","line":239,"loc":{"start":{"line":239,"column":34},"end":{"line":239,"column":49}}},"17":{"name":"(anonymous_17)","line":246,"loc":{"start":{"line":246,"column":28},"end":{"line":246,"column":47}}},"18":{"name":"(anonymous_18)","line":250,"loc":{"start":{"line":250,"column":28},"end":{"line":250,"column":46}}},"19":{"name":"(anonymous_19)","line":254,"loc":{"start":{"line":254,"column":32},"end":{"line":254,"column":50}}},"20":{"name":"(anonymous_20)","line":266,"loc":{"start":{"line":266,"column":26},"end":{"line":266,"column":68}}},"21":{"name":"(anonymous_21)","line":270,"loc":{"start":{"line":270,"column":64},"end":{"line":270,"column":88}}},"22":{"name":"(anonymous_22)","line":286,"loc":{"start":{"line":286,"column":35},"end":{"line":286,"column":47}}},"23":{"name":"(anonymous_23)","line":308,"loc":{"start":{"line":308,"column":34},"end":{"line":308,"column":69}}},"24":{"name":"(anonymous_24)","line":337,"loc":{"start":{"line":337,"column":70},"end":{"line":337,"column":98}}},"25":{"name":"(anonymous_25)","line":351,"loc":{"start":{"line":351,"column":34},"end":{"line":351,"column":46}}},"26":{"name":"(anonymous_26)","line":355,"loc":{"start":{"line":355,"column":36},"end":{"line":355,"column":56}}},"27":{"name":"(anonymous_27)","line":361,"loc":{"start":{"line":361,"column":29},"end":{"line":361,"column":67}}},"28":{"name":"(anonymous_28)","line":374,"loc":{"start":{"line":374,"column":35},"end":{"line":374,"column":47}}},"29":{"name":"(anonymous_29)","line":384,"loc":{"start":{"line":384,"column":34},"end":{"line":384,"column":53}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":44}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":48}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":46}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":36}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":59}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":55}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":55}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":41}},"9":{"start":{"line":12,"column":0},"end":{"line":147,"column":2}},"10":{"start":{"line":13,"column":2},"end":{"line":13,"column":18}},"11":{"start":{"line":15,"column":2},"end":{"line":15,"column":23}},"12":{"start":{"line":17,"column":2},"end":{"line":29,"column":4}},"13":{"start":{"line":31,"column":2},"end":{"line":33,"column":4}},"14":{"start":{"line":35,"column":2},"end":{"line":35,"column":15}},"15":{"start":{"line":36,"column":2},"end":{"line":36,"column":23}},"16":{"start":{"line":37,"column":2},"end":{"line":37,"column":23}},"17":{"start":{"line":38,"column":2},"end":{"line":38,"column":31}},"18":{"start":{"line":40,"column":2},"end":{"line":40,"column":46}},"19":{"start":{"line":43,"column":2},"end":{"line":45,"column":3}},"20":{"start":{"line":44,"column":4},"end":{"line":44,"column":50}},"21":{"start":{"line":46,"column":2},"end":{"line":54,"column":3}},"22":{"start":{"line":47,"column":4},"end":{"line":47,"column":63}},"23":{"start":{"line":48,"column":4},"end":{"line":48,"column":61}},"24":{"start":{"line":49,"column":4},"end":{"line":49,"column":57}},"25":{"start":{"line":51,"column":4},"end":{"line":51,"column":52}},"26":{"start":{"line":52,"column":4},"end":{"line":52,"column":50}},"27":{"start":{"line":53,"column":4},"end":{"line":53,"column":46}},"28":{"start":{"line":55,"column":2},"end":{"line":57,"column":3}},"29":{"start":{"line":56,"column":4},"end":{"line":56,"column":64}},"30":{"start":{"line":59,"column":2},"end":{"line":59,"column":16}},"31":{"start":{"line":60,"column":2},"end":{"line":60,"column":25}},"32":{"start":{"line":62,"column":2},"end":{"line":62,"column":33}},"33":{"start":{"line":63,"column":2},"end":{"line":63,"column":37}},"34":{"start":{"line":65,"column":2},"end":{"line":67,"column":5}},"35":{"start":{"line":66,"column":4},"end":{"line":66,"column":54}},"36":{"start":{"line":69,"column":2},"end":{"line":71,"column":5}},"37":{"start":{"line":70,"column":4},"end":{"line":70,"column":32}},"38":{"start":{"line":73,"column":2},"end":{"line":73,"column":94}},"39":{"start":{"line":74,"column":2},"end":{"line":74,"column":27}},"40":{"start":{"line":77,"column":2},"end":{"line":146,"column":5}},"41":{"start":{"line":78,"column":4},"end":{"line":78,"column":29}},"42":{"start":{"line":80,"column":4},"end":{"line":80,"column":60}},"43":{"start":{"line":82,"column":4},"end":{"line":82,"column":12}},"44":{"start":{"line":83,"column":4},"end":{"line":91,"column":5}},"45":{"start":{"line":84,"column":6},"end":{"line":84,"column":33}},"46":{"start":{"line":86,"column":6},"end":{"line":88,"column":7}},"47":{"start":{"line":87,"column":8},"end":{"line":87,"column":41}},"48":{"start":{"line":89,"column":6},"end":{"line":89,"column":56}},"49":{"start":{"line":90,"column":6},"end":{"line":90,"column":13}},"50":{"start":{"line":94,"column":4},"end":{"line":145,"column":5}},"51":{"start":{"line":95,"column":6},"end":{"line":95,"column":38}},"52":{"start":{"line":96,"column":6},"end":{"line":98,"column":7}},"53":{"start":{"line":97,"column":8},"end":{"line":97,"column":30}},"54":{"start":{"line":100,"column":6},"end":{"line":144,"column":7}},"55":{"start":{"line":101,"column":8},"end":{"line":101,"column":85}},"56":{"start":{"line":102,"column":8},"end":{"line":102,"column":72}},"57":{"start":{"line":104,"column":13},"end":{"line":144,"column":7}},"58":{"start":{"line":105,"column":8},"end":{"line":105,"column":34}},"59":{"start":{"line":107,"column":8},"end":{"line":131,"column":9}},"60":{"start":{"line":108,"column":10},"end":{"line":108,"column":53}},"61":{"start":{"line":109,"column":10},"end":{"line":130,"column":13}},"62":{"start":{"line":110,"column":12},"end":{"line":129,"column":13}},"63":{"start":{"line":111,"column":14},"end":{"line":111,"column":34}},"64":{"start":{"line":113,"column":14},"end":{"line":113,"column":38}},"65":{"start":{"line":114,"column":14},"end":{"line":128,"column":15}},"66":{"start":{"line":115,"column":16},"end":{"line":115,"column":53}},"67":{"start":{"line":116,"column":16},"end":{"line":116,"column":74}},"68":{"start":{"line":118,"column":16},"end":{"line":127,"column":17}},"69":{"start":{"line":119,"column":18},"end":{"line":123,"column":19}},"70":{"start":{"line":120,"column":20},"end":{"line":120,"column":49}},"71":{"start":{"line":122,"column":20},"end":{"line":122,"column":35}},"72":{"start":{"line":124,"column":18},"end":{"line":124,"column":76}},"73":{"start":{"line":126,"column":18},"end":{"line":126,"column":110}},"74":{"start":{"line":132,"column":13},"end":{"line":144,"column":7}},"75":{"start":{"line":134,"column":8},"end":{"line":134,"column":45}},"76":{"start":{"line":135,"column":8},"end":{"line":140,"column":9}},"77":{"start":{"line":136,"column":10},"end":{"line":136,"column":36}},"78":{"start":{"line":137,"column":10},"end":{"line":137,"column":44}},"79":{"start":{"line":138,"column":10},"end":{"line":138,"column":65}},"80":{"start":{"line":139,"column":10},"end":{"line":139,"column":50}},"81":{"start":{"line":143,"column":8},"end":{"line":143,"column":60}},"82":{"start":{"line":149,"column":0},"end":{"line":149,"column":56}},"83":{"start":{"line":151,"column":0},"end":{"line":151,"column":67}},"84":{"start":{"line":152,"column":0},"end":{"line":152,"column":49}},"85":{"start":{"line":153,"column":0},"end":{"line":153,"column":55}},"86":{"start":{"line":155,"column":0},"end":{"line":155,"column":76}},"87":{"start":{"line":156,"column":0},"end":{"line":156,"column":82}},"88":{"start":{"line":158,"column":0},"end":{"line":158,"column":64}},"89":{"start":{"line":159,"column":0},"end":{"line":159,"column":62}},"90":{"start":{"line":161,"column":0},"end":{"line":165,"column":2}},"91":{"start":{"line":162,"column":2},"end":{"line":164,"column":3}},"92":{"start":{"line":163,"column":4},"end":{"line":163,"column":26}},"93":{"start":{"line":167,"column":0},"end":{"line":175,"column":2}},"94":{"start":{"line":168,"column":2},"end":{"line":168,"column":18}},"95":{"start":{"line":170,"column":2},"end":{"line":170,"column":40}},"96":{"start":{"line":171,"column":2},"end":{"line":174,"column":30}},"97":{"start":{"line":172,"column":4},"end":{"line":172,"column":26}},"98":{"start":{"line":173,"column":4},"end":{"line":173,"column":28}},"99":{"start":{"line":177,"column":0},"end":{"line":179,"column":2}},"100":{"start":{"line":178,"column":2},"end":{"line":178,"column":21}},"101":{"start":{"line":181,"column":0},"end":{"line":183,"column":2}},"102":{"start":{"line":182,"column":2},"end":{"line":182,"column":20}},"103":{"start":{"line":185,"column":0},"end":{"line":187,"column":2}},"104":{"start":{"line":186,"column":2},"end":{"line":186,"column":35}},"105":{"start":{"line":189,"column":0},"end":{"line":211,"column":2}},"106":{"start":{"line":190,"column":2},"end":{"line":190,"column":42}},"107":{"start":{"line":191,"column":2},"end":{"line":191,"column":40}},"108":{"start":{"line":193,"column":2},"end":{"line":210,"column":3}},"109":{"start":{"line":194,"column":4},"end":{"line":194,"column":29}},"110":{"start":{"line":197,"column":4},"end":{"line":197,"column":67}},"111":{"start":{"line":198,"column":4},"end":{"line":198,"column":66}},"112":{"start":{"line":200,"column":4},"end":{"line":209,"column":5}},"113":{"start":{"line":201,"column":6},"end":{"line":201,"column":25}},"114":{"start":{"line":202,"column":6},"end":{"line":206,"column":7}},"115":{"start":{"line":203,"column":8},"end":{"line":203,"column":61}},"116":{"start":{"line":205,"column":8},"end":{"line":205,"column":72}},"117":{"start":{"line":207,"column":6},"end":{"line":207,"column":94}},"118":{"start":{"line":208,"column":6},"end":{"line":208,"column":56}},"119":{"start":{"line":213,"column":0},"end":{"line":230,"column":2}},"120":{"start":{"line":214,"column":2},"end":{"line":214,"column":22}},"121":{"start":{"line":216,"column":2},"end":{"line":219,"column":3}},"122":{"start":{"line":217,"column":4},"end":{"line":217,"column":92}},"123":{"start":{"line":218,"column":4},"end":{"line":218,"column":54}},"124":{"start":{"line":221,"column":2},"end":{"line":229,"column":3}},"125":{"start":{"line":222,"column":4},"end":{"line":225,"column":6}},"126":{"start":{"line":226,"column":4},"end":{"line":226,"column":37}},"127":{"start":{"line":227,"column":4},"end":{"line":227,"column":32}},"128":{"start":{"line":228,"column":4},"end":{"line":228,"column":28}},"129":{"start":{"line":232,"column":0},"end":{"line":234,"column":2}},"130":{"start":{"line":233,"column":2},"end":{"line":233,"column":26}},"131":{"start":{"line":236,"column":0},"end":{"line":244,"column":2}},"132":{"start":{"line":237,"column":2},"end":{"line":237,"column":18}},"133":{"start":{"line":239,"column":2},"end":{"line":243,"column":5}},"134":{"start":{"line":240,"column":4},"end":{"line":242,"column":5}},"135":{"start":{"line":241,"column":6},"end":{"line":241,"column":44}},"136":{"start":{"line":246,"column":0},"end":{"line":248,"column":2}},"137":{"start":{"line":247,"column":2},"end":{"line":247,"column":43}},"138":{"start":{"line":250,"column":0},"end":{"line":252,"column":2}},"139":{"start":{"line":251,"column":2},"end":{"line":251,"column":42}},"140":{"start":{"line":254,"column":0},"end":{"line":264,"column":2}},"141":{"start":{"line":255,"column":2},"end":{"line":255,"column":10}},"142":{"start":{"line":256,"column":2},"end":{"line":260,"column":3}},"143":{"start":{"line":257,"column":4},"end":{"line":257,"column":30}},"144":{"start":{"line":259,"column":4},"end":{"line":259,"column":54}},"145":{"start":{"line":261,"column":2},"end":{"line":263,"column":3}},"146":{"start":{"line":262,"column":4},"end":{"line":262,"column":19}},"147":{"start":{"line":266,"column":0},"end":{"line":306,"column":2}},"148":{"start":{"line":267,"column":2},"end":{"line":267,"column":18}},"149":{"start":{"line":269,"column":2},"end":{"line":305,"column":3}},"150":{"start":{"line":270,"column":4},"end":{"line":302,"column":7}},"151":{"start":{"line":271,"column":6},"end":{"line":273,"column":8}},"152":{"start":{"line":274,"column":6},"end":{"line":276,"column":7}},"153":{"start":{"line":275,"column":8},"end":{"line":275,"column":35}},"154":{"start":{"line":278,"column":6},"end":{"line":301,"column":7}},"155":{"start":{"line":279,"column":8},"end":{"line":282,"column":9}},"156":{"start":{"line":280,"column":10},"end":{"line":280,"column":47}},"157":{"start":{"line":281,"column":10},"end":{"line":281,"column":37}},"158":{"start":{"line":284,"column":8},"end":{"line":294,"column":9}},"159":{"start":{"line":285,"column":10},"end":{"line":285,"column":47}},"160":{"start":{"line":286,"column":10},"end":{"line":291,"column":37}},"161":{"start":{"line":287,"column":12},"end":{"line":287,"column":89}},"162":{"start":{"line":289,"column":12},"end":{"line":289,"column":54}},"163":{"start":{"line":290,"column":12},"end":{"line":290,"column":41}},"164":{"start":{"line":293,"column":10},"end":{"line":293,"column":86}},"165":{"start":{"line":295,"column":8},"end":{"line":300,"column":9}},"166":{"start":{"line":297,"column":10},"end":{"line":297,"column":45}},"167":{"start":{"line":299,"column":10},"end":{"line":299,"column":39}},"168":{"start":{"line":304,"column":4},"end":{"line":304,"column":52}},"169":{"start":{"line":308,"column":0},"end":{"line":349,"column":2}},"170":{"start":{"line":309,"column":2},"end":{"line":309,"column":18}},"171":{"start":{"line":311,"column":2},"end":{"line":311,"column":24}},"172":{"start":{"line":312,"column":2},"end":{"line":312,"column":38}},"173":{"start":{"line":314,"column":2},"end":{"line":323,"column":3}},"174":{"start":{"line":315,"column":4},"end":{"line":315,"column":17}},"175":{"start":{"line":317,"column":4},"end":{"line":317,"column":33}},"176":{"start":{"line":318,"column":4},"end":{"line":322,"column":5}},"177":{"start":{"line":319,"column":6},"end":{"line":319,"column":31}},"178":{"start":{"line":320,"column":6},"end":{"line":320,"column":143}},"179":{"start":{"line":321,"column":6},"end":{"line":321,"column":56}},"180":{"start":{"line":325,"column":2},"end":{"line":325,"column":68}},"181":{"start":{"line":327,"column":2},"end":{"line":329,"column":3}},"182":{"start":{"line":328,"column":4},"end":{"line":328,"column":58}},"183":{"start":{"line":330,"column":2},"end":{"line":332,"column":3}},"184":{"start":{"line":331,"column":4},"end":{"line":331,"column":58}},"185":{"start":{"line":333,"column":2},"end":{"line":335,"column":3}},"186":{"start":{"line":334,"column":4},"end":{"line":334,"column":50}},"187":{"start":{"line":337,"column":2},"end":{"line":348,"column":5}},"188":{"start":{"line":338,"column":4},"end":{"line":347,"column":5}},"189":{"start":{"line":339,"column":6},"end":{"line":339,"column":33}},"190":{"start":{"line":340,"column":6},"end":{"line":340,"column":30}},"191":{"start":{"line":341,"column":6},"end":{"line":341,"column":32}},"192":{"start":{"line":343,"column":6},"end":{"line":345,"column":8}},"193":{"start":{"line":346,"column":6},"end":{"line":346,"column":54}},"194":{"start":{"line":351,"column":0},"end":{"line":353,"column":2}},"195":{"start":{"line":352,"column":2},"end":{"line":352,"column":24}},"196":{"start":{"line":355,"column":0},"end":{"line":359,"column":2}},"197":{"start":{"line":356,"column":2},"end":{"line":356,"column":24}},"198":{"start":{"line":357,"column":2},"end":{"line":357,"column":40}},"199":{"start":{"line":358,"column":2},"end":{"line":358,"column":48}},"200":{"start":{"line":361,"column":0},"end":{"line":372,"column":2}},"201":{"start":{"line":362,"column":2},"end":{"line":370,"column":3}},"202":{"start":{"line":363,"column":4},"end":{"line":367,"column":5}},"203":{"start":{"line":364,"column":6},"end":{"line":366,"column":7}},"204":{"start":{"line":365,"column":8},"end":{"line":365,"column":62}},"205":{"start":{"line":369,"column":4},"end":{"line":369,"column":64}},"206":{"start":{"line":371,"column":2},"end":{"line":371,"column":70}},"207":{"start":{"line":374,"column":0},"end":{"line":382,"column":2}},"208":{"start":{"line":375,"column":2},"end":{"line":375,"column":16}},"209":{"start":{"line":376,"column":2},"end":{"line":380,"column":3}},"210":{"start":{"line":377,"column":4},"end":{"line":379,"column":5}},"211":{"start":{"line":378,"column":6},"end":{"line":378,"column":19}},"212":{"start":{"line":381,"column":2},"end":{"line":381,"column":14}},"213":{"start":{"line":384,"column":0},"end":{"line":386,"column":2}},"214":{"start":{"line":385,"column":2},"end":{"line":385,"column":46}},"215":{"start":{"line":388,"column":0},"end":{"line":388,"column":26}}},"branchMap":{"1":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":17},"end":{"line":40,"column":39}},{"start":{"line":40,"column":43},"end":{"line":40,"column":45}}]},"2":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":2},"end":{"line":43,"column":2}},{"start":{"line":43,"column":2},"end":{"line":43,"column":2}}]},"3":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":2},"end":{"line":46,"column":2}},{"start":{"line":46,"column":2},"end":{"line":46,"column":2}}]},"4":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":2},"end":{"line":55,"column":2}},{"start":{"line":55,"column":2},"end":{"line":55,"column":2}}]},"5":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":6},"end":{"line":86,"column":6}},{"start":{"line":86,"column":6},"end":{"line":86,"column":6}}]},"6":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":4},"end":{"line":94,"column":4}},{"start":{"line":94,"column":4},"end":{"line":94,"column":4}}]},"7":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":6},"end":{"line":96,"column":6}},{"start":{"line":96,"column":6},"end":{"line":96,"column":6}}]},"8":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":6},"end":{"line":100,"column":6}},{"start":{"line":100,"column":6},"end":{"line":100,"column":6}}]},"9":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":13},"end":{"line":104,"column":13}},{"start":{"line":104,"column":13},"end":{"line":104,"column":13}}]},"10":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":107,"column":8}},{"start":{"line":107,"column":8},"end":{"line":107,"column":8}}]},"11":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":12},"end":{"line":110,"column":12}},{"start":{"line":110,"column":12},"end":{"line":110,"column":12}}]},"12":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":14},"end":{"line":114,"column":14}},{"start":{"line":114,"column":14},"end":{"line":114,"column":14}}]},"13":{"line":115,"type":"binary-expr","locations":[{"start":{"line":115,"column":37},"end":{"line":115,"column":46}},{"start":{"line":115,"column":50},"end":{"line":115,"column":52}}]},"14":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":16},"end":{"line":118,"column":16}},{"start":{"line":118,"column":16},"end":{"line":118,"column":16}}]},"15":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":18},"end":{"line":119,"column":18}},{"start":{"line":119,"column":18},"end":{"line":119,"column":18}}]},"16":{"line":119,"type":"binary-expr","locations":[{"start":{"line":119,"column":22},"end":{"line":119,"column":31}},{"start":{"line":119,"column":35},"end":{"line":119,"column":63}}]},"17":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":13},"end":{"line":132,"column":13}},{"start":{"line":132,"column":13},"end":{"line":132,"column":13}}]},"18":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":8},"end":{"line":135,"column":8}},{"start":{"line":135,"column":8},"end":{"line":135,"column":8}}]},"19":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":2},"end":{"line":162,"column":2}},{"start":{"line":162,"column":2},"end":{"line":162,"column":2}}]},"20":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":2},"end":{"line":193,"column":2}},{"start":{"line":193,"column":2},"end":{"line":193,"column":2}}]},"21":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":4},"end":{"line":200,"column":4}},{"start":{"line":200,"column":4},"end":{"line":200,"column":4}}]},"22":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":6},"end":{"line":202,"column":6}},{"start":{"line":202,"column":6},"end":{"line":202,"column":6}}]},"23":{"line":207,"type":"binary-expr","locations":[{"start":{"line":207,"column":40},"end":{"line":207,"column":68}},{"start":{"line":207,"column":72},"end":{"line":207,"column":86}}]},"24":{"line":214,"type":"binary-expr","locations":[{"start":{"line":214,"column":9},"end":{"line":214,"column":13}},{"start":{"line":214,"column":17},"end":{"line":214,"column":21}}]},"25":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":2},"end":{"line":216,"column":2}},{"start":{"line":216,"column":2},"end":{"line":216,"column":2}}]},"26":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":2},"end":{"line":221,"column":2}},{"start":{"line":221,"column":2},"end":{"line":221,"column":2}}]},"27":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":4},"end":{"line":240,"column":4}},{"start":{"line":240,"column":4},"end":{"line":240,"column":4}}]},"28":{"line":261,"type":"if","locations":[{"start":{"line":261,"column":2},"end":{"line":261,"column":2}},{"start":{"line":261,"column":2},"end":{"line":261,"column":2}}]},"29":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":2},"end":{"line":269,"column":2}},{"start":{"line":269,"column":2},"end":{"line":269,"column":2}}]},"30":{"line":274,"type":"if","locations":[{"start":{"line":274,"column":6},"end":{"line":274,"column":6}},{"start":{"line":274,"column":6},"end":{"line":274,"column":6}}]},"31":{"line":278,"type":"if","locations":[{"start":{"line":278,"column":6},"end":{"line":278,"column":6}},{"start":{"line":278,"column":6},"end":{"line":278,"column":6}}]},"32":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":8},"end":{"line":279,"column":8}},{"start":{"line":279,"column":8},"end":{"line":279,"column":8}}]},"33":{"line":284,"type":"if","locations":[{"start":{"line":284,"column":8},"end":{"line":284,"column":8}},{"start":{"line":284,"column":8},"end":{"line":284,"column":8}}]},"34":{"line":295,"type":"if","locations":[{"start":{"line":295,"column":8},"end":{"line":295,"column":8}},{"start":{"line":295,"column":8},"end":{"line":295,"column":8}}]},"35":{"line":295,"type":"binary-expr","locations":[{"start":{"line":295,"column":12},"end":{"line":295,"column":19}},{"start":{"line":295,"column":23},"end":{"line":295,"column":39}},{"start":{"line":295,"column":43},"end":{"line":295,"column":74}}]},"36":{"line":314,"type":"if","locations":[{"start":{"line":314,"column":2},"end":{"line":314,"column":2}},{"start":{"line":314,"column":2},"end":{"line":314,"column":2}}]},"37":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":4},"end":{"line":318,"column":4}},{"start":{"line":318,"column":4},"end":{"line":318,"column":4}}]},"38":{"line":327,"type":"if","locations":[{"start":{"line":327,"column":2},"end":{"line":327,"column":2}},{"start":{"line":327,"column":2},"end":{"line":327,"column":2}}]},"39":{"line":327,"type":"binary-expr","locations":[{"start":{"line":327,"column":6},"end":{"line":327,"column":10}},{"start":{"line":327,"column":14},"end":{"line":327,"column":30}}]},"40":{"line":330,"type":"if","locations":[{"start":{"line":330,"column":2},"end":{"line":330,"column":2}},{"start":{"line":330,"column":2},"end":{"line":330,"column":2}}]},"41":{"line":333,"type":"if","locations":[{"start":{"line":333,"column":2},"end":{"line":333,"column":2}},{"start":{"line":333,"column":2},"end":{"line":333,"column":2}}]},"42":{"line":338,"type":"if","locations":[{"start":{"line":338,"column":4},"end":{"line":338,"column":4}},{"start":{"line":338,"column":4},"end":{"line":338,"column":4}}]},"43":{"line":341,"type":"binary-expr","locations":[{"start":{"line":341,"column":6},"end":{"line":341,"column":14}},{"start":{"line":341,"column":18},"end":{"line":341,"column":31}}]},"44":{"line":362,"type":"if","locations":[{"start":{"line":362,"column":2},"end":{"line":362,"column":2}},{"start":{"line":362,"column":2},"end":{"line":362,"column":2}}]},"45":{"line":364,"type":"if","locations":[{"start":{"line":364,"column":6},"end":{"line":364,"column":6}},{"start":{"line":364,"column":6},"end":{"line":364,"column":6}}]},"46":{"line":377,"type":"if","locations":[{"start":{"line":377,"column":4},"end":{"line":377,"column":4}},{"start":{"line":377,"column":4},"end":{"line":377,"column":4}}]}},"code":["var cloneDeep = require('lodash.clonedeep');","var SCEmitter = require('sc-emitter').SCEmitter;","var Response = require('./response').Response;","","var scErrors = require('sc-errors');","var InvalidArgumentsError = scErrors.InvalidArgumentsError;","var InvalidMessageError = scErrors.InvalidMessageError;","var SocketProtocolError = scErrors.SocketProtocolError;","var TimeoutError = scErrors.TimeoutError;","","","var SCSocket = function (id, server, socket) {","  var self = this;","","  SCEmitter.call(this);","","  this._localEvents = {","    'open': 1,","    'subscribe': 1,","    'unsubscribe': 1,","    'disconnect': 1,","    '_disconnect': 1,","    'message': 1,","    'error': 1,","    'authenticate': 1,","    'deauthenticate': 1,","    'badAuthToken': 1,","    'raw': 1","  };","","  this._autoAckEvents = {","    '#publish': 1","  };","","  this.id = id;","  this.server = server;","  this.socket = socket;","  this.state = this.CONNECTING;","","  this.request = this.socket.upgradeReq || {};","","  // If uws module is used.","  if (!this.request.connection) {","    this.request.connection = this.socket._socket;","  }","  if (this.request.connection) {","    this.remoteAddress = this.request.connection.remoteAddress;","    this.remoteFamily = this.request.connection.remoteFamily;","    this.remotePort = this.request.connection.remotePort;","  } else {","    this.remoteAddress = this.request.remoteAddress;","    this.remoteFamily = this.request.remoteFamily;","    this.remotePort = this.request.remotePort;","  }","  if (this.request.forwardedForAddress) {","    this.forwardedForAddress = this.request.forwardedForAddress;","  }","","  this._cid = 1;","  this._callbackMap = {};","","  this.channelSubscriptions = {};","  this.channelSubscriptionsCount = 0;","","  this.socket.on('error', function (err) {","    SCEmitter.prototype.emit.call(self, 'error', err);","  });","","  this.socket.on('close', function (code, data) {","    self._onSCClose(code, data);","  });","","  this._pingIntervalTicker = setInterval(this._sendPing.bind(this), this.server.pingInterval);","  this._resetPongTimeout();","","  // Receive incoming raw messages","  this.socket.on('message', function (message, flags) {","    self._resetPongTimeout();","","    SCEmitter.prototype.emit.call(self, 'message', message);","","    var obj;","    try {","      obj = self.decode(message);","    } catch (err) {","      if (err.name == 'Error') {","        err.name = 'InvalidMessageError';","      }","      SCEmitter.prototype.emit.call(self, 'error', err);","      return;","    }","","    // If pong","    if (obj == '#2') {","      var token = self.getAuthToken();","      if (self.server.isAuthTokenExpired(token)) {","        self.deauthenticate();","      }","    } else {","      if (obj == null) {","        var emptyMessageError = new InvalidMessageError('Received an empty message');","        SCEmitter.prototype.emit.call(self, 'error', emptyMessageError);","","      } else if (obj.event) {","        var eventName = obj.event;","","        if (self._localEvents[eventName] == null) {","          var response = new Response(self, obj.cid);","          self.server.verifyInboundEvent(self, eventName, obj.data, function (err, newData) {","            if (err) {","              response.error(err);","            } else {","              var eventData = newData;","              if (eventName == '#disconnect') {","                var disconnectData = eventData || {};","                self._onSCClose(disconnectData.code, disconnectData.data);","              } else {","                if (self._autoAckEvents[eventName]) {","                  if (eventData && eventData.data !== undefined) {","                    response.end(eventData.data);","                  } else {","                    response.end();","                  }","                  SCEmitter.prototype.emit.call(self, eventName, eventData);","                } else {","                  SCEmitter.prototype.emit.call(self, eventName, eventData, response.callback.bind(response));","                }","              }","            }","          });","        }","      } else if (obj.rid != null) {","        // If incoming message is a response to a previously sent message","        var ret = self._callbackMap[obj.rid];","        if (ret) {","          clearTimeout(ret.timeout);","          delete self._callbackMap[obj.rid];","          var rehydratedError = scErrors.hydrateError(obj.error);","          ret.callback(rehydratedError, obj.data);","        }","      } else {","        // The last remaining case is to treat the message as raw","        SCEmitter.prototype.emit.call(self, 'raw', message);","      }","    }","  });","};","","SCSocket.prototype = Object.create(SCEmitter.prototype);","","SCSocket.CONNECTING = SCSocket.prototype.CONNECTING = 'connecting';","SCSocket.OPEN = SCSocket.prototype.OPEN = 'open';","SCSocket.CLOSED = SCSocket.prototype.CLOSED = 'closed';","","SCSocket.AUTHENTICATED = SCSocket.prototype.AUTHENTICATED = 'authenticated';","SCSocket.UNAUTHENTICATED = SCSocket.prototype.UNAUTHENTICATED = 'unauthenticated';","","SCSocket.ignoreStatuses = scErrors.socketProtocolIgnoreStatuses;","SCSocket.errorStatuses = scErrors.socketProtocolErrorStatuses;","","SCSocket.prototype._sendPing = function () {","  if (this.state != this.CLOSED) {","    this.sendObject('#1');","  }","};","","SCSocket.prototype._resetPongTimeout = function () {","  var self = this;","","  clearTimeout(this._pingTimeoutTicker);","  this._pingTimeoutTicker = setTimeout(function() {","    self._onSCClose(4001);","    self.socket.close(4001);","  }, this.server.pingTimeout);","};","","SCSocket.prototype._nextCallId = function () {","  return this._cid++;","};","","SCSocket.prototype.getState = function () {","  return this.state;","};","","SCSocket.prototype.getBytesReceived = function () {","  return this.socket.bytesReceived;","};","","SCSocket.prototype._onSCClose = function (code, data) {","  clearInterval(this._pingIntervalTicker);","  clearTimeout(this._pingTimeoutTicker);","","  if (this.state != this.CLOSED) {","    this.state = this.CLOSED;","","    // Private disconnect event for internal use only","    SCEmitter.prototype.emit.call(this, '_disconnect', code, data);","    SCEmitter.prototype.emit.call(this, 'disconnect', code, data);","","    if (!SCSocket.ignoreStatuses[code]) {","      var failureMessage;","      if (data) {","        failureMessage = 'Socket connection failed: ' + data;","      } else {","        failureMessage = 'Socket connection failed for unknown reasons';","      }","      var err = new SocketProtocolError(SCSocket.errorStatuses[code] || failureMessage, code);","      SCEmitter.prototype.emit.call(this, 'error', err);","    }","  }","};","","SCSocket.prototype.disconnect = function (code, data) {","  code = code || 1000;","","  if (typeof code != 'number') {","    var err = new InvalidArgumentsError('If specified, the code argument must be a number');","    SCEmitter.prototype.emit.call(this, 'error', err);","  }","","  if (this.state != this.CLOSED) {","    var packet = {","      code: code,","      data: data","    };","    this.emit('#disconnect', packet);","    this._onSCClose(code, data);","    this.socket.close(code);","  }","};","","SCSocket.prototype.terminate = function () {","  this.socket.terminate();","};","","SCSocket.prototype.send = function (data, options) {","  var self = this;","","  this.socket.send(data, options, function (err) {","    if (err) {","      self._onSCClose(1006, err.toString());","    }","  });","};","","SCSocket.prototype.decode = function (message) {","  return this.server.codec.decode(message);","};","","SCSocket.prototype.encode = function (object) {","  return this.server.codec.encode(object);","};","","SCSocket.prototype.sendObject = function (object) {","  var str;","  try {","    str = this.encode(object);","  } catch (err) {","    SCEmitter.prototype.emit.call(this, 'error', err);","  }","  if (str != null) {","    this.send(str);","  }","};","","SCSocket.prototype.emit = function (event, data, callback, options) {","  var self = this;","","  if (this._localEvents[event] == null) {","    this.server.verifyOutboundEvent(this, event, data, options, function (err, newData) {","      var eventObject = {","        event: event","      };","      if (newData !== undefined) {","        eventObject.data = newData;","      }","","      if (err) {","        if (callback) {","          eventObject.cid = self._nextCallId();","          callback(err, eventObject);","        }","      } else {","        if (callback) {","          eventObject.cid = self._nextCallId();","          var timeout = setTimeout(function () {","            var error = new TimeoutError(\"Event response for '\" + event + \"' timed out\");","","            delete self._callbackMap[eventObject.cid];","            callback(error, eventObject);","          }, self.server.ackTimeout);","","          self._callbackMap[eventObject.cid] = {callback: callback, timeout: timeout};","        }","        if (options && options.useCache && options.stringifiedData != null) {","          // Optimized","          self.send(options.stringifiedData);","        } else {","          self.sendObject(eventObject);","        }","      }","    });","  } else {","    SCEmitter.prototype.emit.apply(this, arguments);","  }","};","","SCSocket.prototype.setAuthToken = function (data, options, callback) {","  var self = this;","","  this.authToken = data;","  this.authState = this.AUTHENTICATED;","","  if (options == null) {","    options = {};","  } else {","    options = cloneDeep(options);","    if (options.algorithm != null) {","      delete options.algorithm;","      var err = new InvalidArgumentsError('Cannot change auth token algorithm at runtime - It must be specified as a config option on launch');","      SCEmitter.prototype.emit.call(this, 'error', err);","    }","  }","","  var defaultSignatureOptions = this.server.defaultSignatureOptions;","","  if (data && data.exp == null) {","    options.expiresIn = defaultSignatureOptions.expiresIn;","  }","  if (defaultSignatureOptions.algorithm != null) {","    options.algorithm = defaultSignatureOptions.algorithm;","  }","  if (defaultSignatureOptions.async != null) {","    options.async = defaultSignatureOptions.async;","  }","","  this.server.auth.signToken(data, this.server.signatureKey, options, function (err, signedToken) {","    if (err) {","      self._onSCClose(4002, err);","      self.socket.close(4002);","      callback && callback(err);","    } else {","      var tokenData = {","        token: signedToken","      };","      self.emit('#setAuthToken', tokenData, callback);","    }","  });","};","","SCSocket.prototype.getAuthToken = function () {","  return this.authToken;","};","","SCSocket.prototype.deauthenticate = function (callback) {","  this.authToken = null;","  this.authState = this.UNAUTHENTICATED;","  this.emit('#removeAuthToken', null, callback);","};","","SCSocket.prototype.kickOut = function (channel, message, callback) {","  if (channel == null) {","    for (var i in this.channelSubscriptions) {","      if (this.channelSubscriptions.hasOwnProperty(i)) {","        this.emit('#kickOut', {message: message, channel: i});","      }","    }","  } else {","    this.emit('#kickOut', {message: message, channel: channel});","  }","  this.server.brokerEngine.unsubscribeSocket(this, channel, callback);","};","","SCSocket.prototype.subscriptions = function () {","  var subs = [];","  for (var i in this.channelSubscriptions) {","    if (this.channelSubscriptions.hasOwnProperty(i)) {","      subs.push(i);","    }","  }","  return subs;","};","","SCSocket.prototype.isSubscribed = function (channel) {","  return !!this.channelSubscriptions[channel];","};","","module.exports = SCSocket;",""],"l":{"1":1,"2":1,"3":1,"5":1,"6":1,"7":1,"8":1,"9":1,"12":1,"13":0,"15":0,"17":0,"31":0,"35":0,"36":0,"37":0,"38":0,"40":0,"43":0,"44":0,"46":0,"47":0,"48":0,"49":0,"51":0,"52":0,"53":0,"55":0,"56":0,"59":0,"60":0,"62":0,"63":0,"65":0,"66":0,"69":0,"70":0,"73":0,"74":0,"77":0,"78":0,"80":0,"82":0,"83":0,"84":0,"86":0,"87":0,"89":0,"90":0,"94":0,"95":0,"96":0,"97":0,"100":0,"101":0,"102":0,"104":0,"105":0,"107":0,"108":0,"109":0,"110":0,"111":0,"113":0,"114":0,"115":0,"116":0,"118":0,"119":0,"120":0,"122":0,"124":0,"126":0,"132":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"143":0,"149":1,"151":1,"152":1,"153":1,"155":1,"156":1,"158":1,"159":1,"161":1,"162":0,"163":0,"167":1,"168":0,"170":0,"171":0,"172":0,"173":0,"177":1,"178":0,"181":1,"182":0,"185":1,"186":0,"189":1,"190":0,"191":0,"193":0,"194":0,"197":0,"198":0,"200":0,"201":0,"202":0,"203":0,"205":0,"207":0,"208":0,"213":1,"214":0,"216":0,"217":0,"218":0,"221":0,"222":0,"226":0,"227":0,"228":0,"232":1,"233":0,"236":1,"237":0,"239":0,"240":0,"241":0,"246":1,"247":0,"250":1,"251":0,"254":1,"255":0,"256":0,"257":0,"259":0,"261":0,"262":0,"266":1,"267":0,"269":0,"270":0,"271":0,"274":0,"275":0,"278":0,"279":0,"280":0,"281":0,"284":0,"285":0,"286":0,"287":0,"289":0,"290":0,"293":0,"295":0,"297":0,"299":0,"304":0,"308":1,"309":0,"311":0,"312":0,"314":0,"315":0,"317":0,"318":0,"319":0,"320":0,"321":0,"325":0,"327":0,"328":0,"330":0,"331":0,"333":0,"334":0,"337":0,"338":0,"339":0,"340":0,"341":0,"343":0,"346":0,"351":1,"352":0,"355":1,"356":0,"357":0,"358":0,"361":1,"362":0,"363":0,"364":0,"365":0,"369":0,"371":0,"374":1,"375":0,"376":0,"377":0,"378":0,"381":0,"384":1,"385":0,"388":1}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster-server/response.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster-server/response.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":15},"end":{"line":4,"column":37}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":30},"end":{"line":10,"column":54}}},"3":{"name":"(anonymous_3)","line":19,"loc":{"start":{"line":19,"column":25},"end":{"line":19,"column":41}}},"4":{"name":"(anonymous_4)","line":31,"loc":{"start":{"line":31,"column":27},"end":{"line":31,"column":50}}},"5":{"name":"(anonymous_5)","line":47,"loc":{"start":{"line":47,"column":30},"end":{"line":47,"column":53}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":36}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":53}},"3":{"start":{"line":4,"column":0},"end":{"line":8,"column":2}},"4":{"start":{"line":5,"column":2},"end":{"line":5,"column":23}},"5":{"start":{"line":6,"column":2},"end":{"line":6,"column":15}},"6":{"start":{"line":7,"column":2},"end":{"line":7,"column":20}},"7":{"start":{"line":10,"column":0},"end":{"line":17,"column":2}},"8":{"start":{"line":11,"column":2},"end":{"line":16,"column":3}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":83}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":21}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":41}},"12":{"start":{"line":19,"column":0},"end":{"line":29,"column":2}},"13":{"start":{"line":20,"column":2},"end":{"line":28,"column":3}},"14":{"start":{"line":21,"column":4},"end":{"line":23,"column":6}},"15":{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},"16":{"start":{"line":25,"column":6},"end":{"line":25,"column":31}},"17":{"start":{"line":27,"column":4},"end":{"line":27,"column":32}},"18":{"start":{"line":31,"column":0},"end":{"line":45,"column":2}},"19":{"start":{"line":32,"column":2},"end":{"line":44,"column":3}},"20":{"start":{"line":33,"column":4},"end":{"line":33,"column":45}},"21":{"start":{"line":35,"column":4},"end":{"line":38,"column":6}},"22":{"start":{"line":39,"column":4},"end":{"line":41,"column":5}},"23":{"start":{"line":40,"column":6},"end":{"line":40,"column":31}},"24":{"start":{"line":43,"column":4},"end":{"line":43,"column":32}},"25":{"start":{"line":47,"column":0},"end":{"line":53,"column":2}},"26":{"start":{"line":48,"column":2},"end":{"line":52,"column":3}},"27":{"start":{"line":49,"column":4},"end":{"line":49,"column":28}},"28":{"start":{"line":51,"column":4},"end":{"line":51,"column":19}},"29":{"start":{"line":55,"column":0},"end":{"line":55,"column":35}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":11,"column":2}},{"start":{"line":11,"column":2},"end":{"line":11,"column":2}}]},"2":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"3":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":24,"column":4}},{"start":{"line":24,"column":4},"end":{"line":24,"column":4}}]},"4":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":2},"end":{"line":32,"column":2}},{"start":{"line":32,"column":2},"end":{"line":32,"column":2}}]},"5":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":39,"column":4}},{"start":{"line":39,"column":4},"end":{"line":39,"column":4}}]},"6":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":2},"end":{"line":48,"column":2}},{"start":{"line":48,"column":2},"end":{"line":48,"column":2}}]}},"code":["var scErrors = require('sc-errors');","var InvalidActionError = scErrors.InvalidActionError;","","var Response = function (socket, id) {","  this.socket = socket;","  this.id = id;","  this.sent = false;","};","","Response.prototype._respond = function (responseData) {","  if (this.sent) {","    throw new InvalidActionError('Response ' + this.id + ' has already been sent');","  } else {","    this.sent = true;","    this.socket.sendObject(responseData);","  }","};","","Response.prototype.end = function (data) {","  if (this.id) {","    var responseData = {","      rid: this.id","    };","    if (data !== undefined) {","      responseData.data = data;","    }","    this._respond(responseData);","  }","};","","Response.prototype.error = function (error, data) {","  if (this.id) {","    var err = scErrors.dehydrateError(error);","","    var responseData = {","      rid: this.id,","      error: err","    };","    if (data !== undefined) {","      responseData.data = data;","    }","","    this._respond(responseData);","  }","};","","Response.prototype.callback = function (error, data) {","  if (error) {","    this.error(error, data);","  } else {","    this.end(data);","  }","};","","module.exports.Response = Response;",""],"l":{"1":1,"2":1,"4":1,"5":0,"6":0,"7":0,"10":1,"11":0,"12":0,"14":0,"15":0,"19":1,"20":0,"21":0,"24":0,"25":0,"27":0,"31":1,"32":0,"33":0,"35":0,"39":0,"40":0,"43":0,"47":1,"48":0,"49":0,"51":0,"55":1}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/lib/workercluster.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/lib/workercluster.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0},"b":{"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0,0],"25":[0,0],"26":[0,0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":27},"end":{"line":8,"column":39}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":26},"end":{"line":17,"column":41}}},"3":{"name":"(anonymous_3)","line":28,"loc":{"start":{"line":28,"column":18},"end":{"line":28,"column":30}}},"4":{"name":"(anonymous_4)","line":30,"loc":{"start":{"line":30,"column":15},"end":{"line":30,"column":27}}},"5":{"name":"(anonymous_5)","line":38,"loc":{"start":{"line":38,"column":24},"end":{"line":38,"column":37}}},"6":{"name":"(anonymous_6)","line":52,"loc":{"start":{"line":52,"column":25},"end":{"line":52,"column":47}}},"7":{"name":"(anonymous_7)","line":57,"loc":{"start":{"line":57,"column":29},"end":{"line":57,"column":42}}},"8":{"name":"(anonymous_8)","line":77,"loc":{"start":{"line":77,"column":26},"end":{"line":77,"column":50}}},"9":{"name":"(anonymous_9)","line":136,"loc":{"start":{"line":136,"column":20},"end":{"line":136,"column":44}}},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":13},"end":{"line":144,"column":25}}},"11":{"name":"(anonymous_11)","line":151,"loc":{"start":{"line":151,"column":22},"end":{"line":151,"column":41}}},"12":{"name":"(anonymous_12)","line":162,"loc":{"start":{"line":162,"column":20},"end":{"line":162,"column":32}}},"13":{"name":"(anonymous_13)","line":166,"loc":{"start":{"line":166,"column":19},"end":{"line":166,"column":31}}},"14":{"name":"(anonymous_14)","line":172,"loc":{"start":{"line":172,"column":24},"end":{"line":172,"column":37}}},"15":{"name":"(anonymous_15)","line":196,"loc":{"start":{"line":196,"column":25},"end":{"line":196,"column":37}}},"16":{"name":"(anonymous_16)","line":210,"loc":{"start":{"line":210,"column":21},"end":{"line":210,"column":33}}},"17":{"name":"(anonymous_17)","line":213,"loc":{"start":{"line":213,"column":19},"end":{"line":213,"column":31}}},"18":{"name":"(anonymous_18)","line":222,"loc":{"start":{"line":222,"column":34},"end":{"line":222,"column":49}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":31}},"5":{"start":{"line":6,"column":0},"end":{"line":225,"column":1}},"6":{"start":{"line":8,"column":2},"end":{"line":10,"column":5}},"7":{"start":{"line":9,"column":4},"end":{"line":9,"column":19}},"8":{"start":{"line":12,"column":2},"end":{"line":12,"column":14}},"9":{"start":{"line":13,"column":2},"end":{"line":13,"column":19}},"10":{"start":{"line":14,"column":2},"end":{"line":14,"column":24}},"11":{"start":{"line":15,"column":2},"end":{"line":15,"column":26}},"12":{"start":{"line":17,"column":2},"end":{"line":26,"column":4}},"13":{"start":{"line":18,"column":4},"end":{"line":18,"column":51}},"14":{"start":{"line":19,"column":4},"end":{"line":25,"column":7}},"15":{"start":{"line":28,"column":2},"end":{"line":36,"column":4}},"16":{"start":{"line":29,"column":4},"end":{"line":29,"column":18}},"17":{"start":{"line":30,"column":4},"end":{"line":35,"column":27}},"18":{"start":{"line":31,"column":6},"end":{"line":34,"column":7}},"19":{"start":{"line":32,"column":8},"end":{"line":32,"column":25}},"20":{"start":{"line":33,"column":8},"end":{"line":33,"column":23}},"21":{"start":{"line":38,"column":2},"end":{"line":132,"column":5}},"22":{"start":{"line":39,"column":4},"end":{"line":131,"column":5}},"23":{"start":{"line":40,"column":6},"end":{"line":42,"column":7}},"24":{"start":{"line":41,"column":8},"end":{"line":41,"column":59}},"25":{"start":{"line":43,"column":6},"end":{"line":45,"column":7}},"26":{"start":{"line":44,"column":8},"end":{"line":44,"column":55}},"27":{"start":{"line":47,"column":6},"end":{"line":47,"column":43}},"28":{"start":{"line":48,"column":6},"end":{"line":48,"column":25}},"29":{"start":{"line":49,"column":6},"end":{"line":49,"column":26}},"30":{"start":{"line":50,"column":6},"end":{"line":50,"column":19}},"31":{"start":{"line":52,"column":6},"end":{"line":109,"column":8}},"32":{"start":{"line":53,"column":8},"end":{"line":53,"column":36}},"33":{"start":{"line":54,"column":8},"end":{"line":54,"column":28}},"34":{"start":{"line":55,"column":8},"end":{"line":55,"column":46}},"35":{"start":{"line":57,"column":8},"end":{"line":75,"column":11}},"36":{"start":{"line":58,"column":10},"end":{"line":74,"column":11}},"37":{"start":{"line":59,"column":12},"end":{"line":66,"column":15}},"38":{"start":{"line":68,"column":12},"end":{"line":71,"column":13}},"39":{"start":{"line":69,"column":14},"end":{"line":69,"column":29}},"40":{"start":{"line":70,"column":14},"end":{"line":70,"column":30}},"41":{"start":{"line":73,"column":12},"end":{"line":73,"column":28}},"42":{"start":{"line":77,"column":8},"end":{"line":98,"column":11}},"43":{"start":{"line":78,"column":10},"end":{"line":97,"column":11}},"44":{"start":{"line":79,"column":12},"end":{"line":87,"column":15}},"45":{"start":{"line":89,"column":12},"end":{"line":91,"column":13}},"46":{"start":{"line":90,"column":14},"end":{"line":90,"column":36}},"47":{"start":{"line":92,"column":17},"end":{"line":97,"column":11}},"48":{"start":{"line":93,"column":12},"end":{"line":96,"column":13}},"49":{"start":{"line":94,"column":14},"end":{"line":94,"column":31}},"50":{"start":{"line":95,"column":14},"end":{"line":95,"column":29}},"51":{"start":{"line":100,"column":8},"end":{"line":100,"column":35}},"52":{"start":{"line":101,"column":8},"end":{"line":105,"column":9}},"53":{"start":{"line":102,"column":10},"end":{"line":104,"column":11}},"54":{"start":{"line":103,"column":12},"end":{"line":103,"column":40}},"55":{"start":{"line":106,"column":8},"end":{"line":106,"column":38}},"56":{"start":{"line":108,"column":8},"end":{"line":108,"column":39}},"57":{"start":{"line":111,"column":6},"end":{"line":113,"column":7}},"58":{"start":{"line":112,"column":8},"end":{"line":112,"column":24}},"59":{"start":{"line":114,"column":11},"end":{"line":131,"column":5}},"60":{"start":{"line":115,"column":6},"end":{"line":115,"column":45}},"61":{"start":{"line":116,"column":6},"end":{"line":121,"column":7}},"62":{"start":{"line":117,"column":8},"end":{"line":117,"column":29}},"63":{"start":{"line":119,"column":8},"end":{"line":119,"column":90}},"64":{"start":{"line":120,"column":8},"end":{"line":120,"column":41}},"65":{"start":{"line":123,"column":6},"end":{"line":125,"column":7}},"66":{"start":{"line":124,"column":8},"end":{"line":124,"column":20}},"67":{"start":{"line":126,"column":6},"end":{"line":130,"column":7}},"68":{"start":{"line":127,"column":8},"end":{"line":129,"column":9}},"69":{"start":{"line":128,"column":10},"end":{"line":128,"column":29}},"70":{"start":{"line":136,"column":2},"end":{"line":149,"column":4}},"71":{"start":{"line":137,"column":4},"end":{"line":137,"column":51}},"72":{"start":{"line":138,"column":4},"end":{"line":148,"column":7}},"73":{"start":{"line":145,"column":6},"end":{"line":147,"column":7}},"74":{"start":{"line":146,"column":8},"end":{"line":146,"column":24}},"75":{"start":{"line":151,"column":2},"end":{"line":160,"column":4}},"76":{"start":{"line":152,"column":4},"end":{"line":152,"column":57}},"77":{"start":{"line":153,"column":4},"end":{"line":159,"column":7}},"78":{"start":{"line":162,"column":2},"end":{"line":164,"column":4}},"79":{"start":{"line":163,"column":4},"end":{"line":163,"column":34}},"80":{"start":{"line":166,"column":2},"end":{"line":168,"column":4}},"81":{"start":{"line":167,"column":4},"end":{"line":167,"column":19}},"82":{"start":{"line":170,"column":2},"end":{"line":170,"column":13}},"83":{"start":{"line":172,"column":2},"end":{"line":220,"column":5}},"84":{"start":{"line":173,"column":4},"end":{"line":219,"column":5}},"85":{"start":{"line":174,"column":6},"end":{"line":176,"column":7}},"86":{"start":{"line":175,"column":8},"end":{"line":175,"column":55}},"87":{"start":{"line":178,"column":6},"end":{"line":180,"column":7}},"88":{"start":{"line":179,"column":8},"end":{"line":179,"column":86}},"89":{"start":{"line":182,"column":6},"end":{"line":184,"column":7}},"90":{"start":{"line":183,"column":8},"end":{"line":183,"column":67}},"91":{"start":{"line":186,"column":6},"end":{"line":186,"column":52}},"92":{"start":{"line":188,"column":6},"end":{"line":194,"column":7}},"93":{"start":{"line":189,"column":8},"end":{"line":189,"column":86}},"94":{"start":{"line":190,"column":8},"end":{"line":192,"column":9}},"95":{"start":{"line":191,"column":10},"end":{"line":191,"column":46}},"96":{"start":{"line":193,"column":8},"end":{"line":193,"column":38}},"97":{"start":{"line":196,"column":6},"end":{"line":199,"column":9}},"98":{"start":{"line":197,"column":8},"end":{"line":197,"column":23}},"99":{"start":{"line":198,"column":8},"end":{"line":198,"column":22}},"100":{"start":{"line":200,"column":11},"end":{"line":219,"column":5}},"101":{"start":{"line":201,"column":6},"end":{"line":205,"column":7}},"102":{"start":{"line":202,"column":8},"end":{"line":202,"column":50}},"103":{"start":{"line":204,"column":8},"end":{"line":204,"column":42}},"104":{"start":{"line":206,"column":11},"end":{"line":219,"column":5}},"105":{"start":{"line":207,"column":6},"end":{"line":207,"column":36}},"106":{"start":{"line":208,"column":11},"end":{"line":219,"column":5}},"107":{"start":{"line":209,"column":6},"end":{"line":218,"column":7}},"108":{"start":{"line":210,"column":8},"end":{"line":212,"column":11}},"109":{"start":{"line":211,"column":10},"end":{"line":211,"column":25}},"110":{"start":{"line":213,"column":8},"end":{"line":215,"column":31}},"111":{"start":{"line":214,"column":10},"end":{"line":214,"column":25}},"112":{"start":{"line":217,"column":8},"end":{"line":217,"column":23}},"113":{"start":{"line":222,"column":2},"end":{"line":224,"column":5}},"114":{"start":{"line":223,"column":4},"end":{"line":223,"column":27}}},"branchMap":{"1":{"line":6,"type":"if","locations":[{"start":{"line":6,"column":0},"end":{"line":6,"column":0}},{"start":{"line":6,"column":0},"end":{"line":6,"column":0}}]},"2":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":6},"end":{"line":31,"column":6}},{"start":{"line":31,"column":6},"end":{"line":31,"column":6}}]},"3":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":39,"column":4}},{"start":{"line":39,"column":4},"end":{"line":39,"column":4}}]},"4":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":6},"end":{"line":40,"column":6}},{"start":{"line":40,"column":6},"end":{"line":40,"column":6}}]},"5":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":6},"end":{"line":43,"column":6}},{"start":{"line":43,"column":6},"end":{"line":43,"column":6}}]},"6":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":10},"end":{"line":58,"column":10}},{"start":{"line":58,"column":10},"end":{"line":58,"column":10}}]},"7":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":25},"end":{"line":64,"column":32}},{"start":{"line":64,"column":36},"end":{"line":64,"column":41}}]},"8":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":12},"end":{"line":68,"column":12}},{"start":{"line":68,"column":12},"end":{"line":68,"column":12}}]},"9":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":16},"end":{"line":68,"column":24}},{"start":{"line":68,"column":28},"end":{"line":68,"column":55}}]},"10":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":10},"end":{"line":78,"column":10}},{"start":{"line":78,"column":10},"end":{"line":78,"column":10}}]},"11":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":12},"end":{"line":89,"column":12}},{"start":{"line":89,"column":12},"end":{"line":89,"column":12}}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":17},"end":{"line":92,"column":17}},{"start":{"line":92,"column":17},"end":{"line":92,"column":17}}]},"13":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":12},"end":{"line":93,"column":12}},{"start":{"line":93,"column":12},"end":{"line":93,"column":12}}]},"14":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":10},"end":{"line":102,"column":10}},{"start":{"line":102,"column":10},"end":{"line":102,"column":10}}]},"15":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":11},"end":{"line":114,"column":11}},{"start":{"line":114,"column":11},"end":{"line":114,"column":11}}]},"16":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":6},"end":{"line":116,"column":6}},{"start":{"line":116,"column":6},"end":{"line":116,"column":6}}]},"17":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":6},"end":{"line":123,"column":6}},{"start":{"line":123,"column":6},"end":{"line":123,"column":6}}]},"18":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":10},"end":{"line":123,"column":31}},{"start":{"line":123,"column":35},"end":{"line":123,"column":59}}]},"19":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":8},"end":{"line":127,"column":8}},{"start":{"line":127,"column":8},"end":{"line":127,"column":8}}]},"20":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":6},"end":{"line":145,"column":6}},{"start":{"line":145,"column":6},"end":{"line":145,"column":6}}]},"21":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":4},"end":{"line":173,"column":4}},{"start":{"line":173,"column":4},"end":{"line":173,"column":4}}]},"22":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":6},"end":{"line":174,"column":6}},{"start":{"line":174,"column":6},"end":{"line":174,"column":6}}]},"23":{"line":178,"type":"if","locations":[{"start":{"line":178,"column":6},"end":{"line":178,"column":6}},{"start":{"line":178,"column":6},"end":{"line":178,"column":6}}]},"24":{"line":178,"type":"binary-expr","locations":[{"start":{"line":178,"column":10},"end":{"line":178,"column":16}},{"start":{"line":178,"column":20},"end":{"line":178,"column":42}},{"start":{"line":178,"column":46},"end":{"line":178,"column":72}}]},"25":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":6},"end":{"line":182,"column":6}},{"start":{"line":182,"column":6},"end":{"line":182,"column":6}}]},"26":{"line":182,"type":"binary-expr","locations":[{"start":{"line":182,"column":10},"end":{"line":182,"column":44}},{"start":{"line":182,"column":48},"end":{"line":182,"column":71}},{"start":{"line":182,"column":75},"end":{"line":182,"column":107}}]},"27":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":6},"end":{"line":188,"column":6}},{"start":{"line":188,"column":6},"end":{"line":188,"column":6}}]},"28":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":8},"end":{"line":190,"column":8}},{"start":{"line":190,"column":8},"end":{"line":190,"column":8}}]},"29":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":11},"end":{"line":200,"column":11}},{"start":{"line":200,"column":11},"end":{"line":200,"column":11}}]},"30":{"line":201,"type":"if","locations":[{"start":{"line":201,"column":6},"end":{"line":201,"column":6}},{"start":{"line":201,"column":6},"end":{"line":201,"column":6}}]},"31":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":11},"end":{"line":206,"column":11}},{"start":{"line":206,"column":11},"end":{"line":206,"column":11}}]},"32":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":11},"end":{"line":208,"column":11}},{"start":{"line":208,"column":11},"end":{"line":208,"column":11}}]},"33":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":6},"end":{"line":209,"column":6}},{"start":{"line":209,"column":6},"end":{"line":209,"column":6}}]},"34":{"line":209,"type":"binary-expr","locations":[{"start":{"line":209,"column":10},"end":{"line":209,"column":16}},{"start":{"line":209,"column":20},"end":{"line":209,"column":37}}]}},"code":["var cluster = require('cluster');","var SCWorker = require('./scworker');","var scErrors = require('sc-errors');","var processTermTimeout = 10000;","","if (cluster.isMaster) {","","  process.on('disconnect', function () {","    process.exit();","  });","","  var workers;","  var alive = true;","  var hasExited = false;","  var terminatedCount = 0;","","  var sendErrorToMaster = function (err) {","    var error = scErrors.dehydrateError(err, true);","    process.send({","      type: 'error',","      data: {","        pid: process.pid,","        error: error","      }","    });","  };","","  var terminate = function () {","    alive = false;","    setTimeout(function () {","      if (!hasExited) {","        hasExited = true;","        process.exit();","      }","    }, processTermTimeout);","  };","","  process.on('message', function (m) {","    if (m.type == 'init') {","      if (m.data.schedulingPolicy != null) {","        cluster.schedulingPolicy = m.data.schedulingPolicy;","      }","      if (m.data.processTermTimeout) {","        processTermTimeout = m.data.processTermTimeout;","      }","","      var workerCount = m.data.workerCount;","      var readyCount = 0;","      var isReady = false;","      workers = [];","","      var launchWorker = function (i, respawn) {","        var worker = cluster.fork();","        workers[i] = worker;","        worker.on('error', sendErrorToMaster);","","        worker.on('message', function (m) {","          if (m.type == 'ready') {","            process.send({","              type: 'workerStart',","              data: {","                id: i,","                pid: worker.process.pid,","                respawn: respawn || false","              }","            });","","            if (!isReady && ++readyCount >= workerCount) {","              isReady = true;","              process.send(m);","            }","          } else {","            process.send(m);","          }","        });","","        worker.on('exit', function (code, signal) {","          if (alive) {","            process.send({","              type: 'workerExit',","              data: {","                id: i,","                pid: worker.process.pid,","                code: code,","                signal: signal","              }","            });","","            if (m.data.rebootWorkerOnCrash) {","              launchWorker(i, true);","            }","          } else if (++terminatedCount >= workers.length) {","            if (!hasExited) {","              hasExited = true;","              process.exit();","            }","          }","        });","","        var workerInitOptions = {};","        for (var j in m) {","          if (m.hasOwnProperty(j)) {","            workerInitOptions[j] = m[j];","          }","        }","        workerInitOptions.data.id = i;","","        worker.send(workerInitOptions);","      };","","      for (var i = 0; i < workerCount; i++) {","        launchWorker(i);","      }","    } else if (m.type == 'masterMessage') {","      var targetWorker = workers[m.workerId];","      if (targetWorker) {","        targetWorker.send(m);","      } else {","        var notFoundError = new Error('Worker with id ' + m.workerId + ' does not exist');","        sendErrorToMaster(notFoundError);","      }","    } else {","      if (m.type == 'terminate' && m.data.killClusterMaster) {","        terminate();","      }","      for (var i in workers) {","        if (workers.hasOwnProperty(i)) {","          workers[i].send(m);","        }","      }","    }","  });","","} else {","","  var handleError = function (isFatal, err) {","    var error = scErrors.dehydrateError(err, true);","    process.send({","      type: 'error',","      data: {","        error: error,","        workerPid: process.pid","      }","    }, null, function () {","      if (isFatal) {","        process.exit(1);","      }","    });","  };","","  var handleWarning = function (warning) {","    var warning = scErrors.dehydrateError(warning, true);","    process.send({","      type: 'warning',","      data: {","        error: warning,","        workerPid: process.pid","      }","    });","  };","","  var handleReady = function () {","    process.send({type: 'ready'});","  };","","  var handleExit = function () {","    process.exit();","  };","","  var worker;","","  process.on('message', function (m) {","    if (m.type == 'init') {","      if (m.data.processTermTimeout) {","        processTermTimeout = m.data.processTermTimeout;","      }","","      if (m.data && m.data.protocolOptions && m.data.protocolOptions.pfx) {","        m.data.protocolOptions.pfx = new Buffer(m.data.protocolOptions.pfx, 'base64');","      }","","      if (typeof m.data.authKey === 'object' && m.data.authKey !== null && m.data.authKey.type === 'Buffer') {","        m.data.authKey = new Buffer(m.data.authKey.data, 'base64');","      }","","      global.worker = worker = new SCWorker(m.data);","","      if (m.data.propagateErrors) {","        worker.on('error', handleError.bind(null, worker.options.crashWorkerOnError));","        if (m.data.propagateWarnings) {","          worker.on('warning', handleWarning);","        }","        worker.on('exit', handleExit);","      }","","      worker.on('ready', function () {","        worker.start();","        handleReady();","      });","    } else if (m.type == 'emit') {","      if (m.data) {","        worker.handleMasterEvent(m.event, m.data);","      } else {","        worker.handleMasterEvent(m.event);","      }","    } else if (m.type == 'masterMessage') {","      worker.handleMasterMessage(m);","    } else if (m.type == 'terminate') {","      if (worker && !m.data.immediate) {","        worker.close(function () {","          process.exit();","        });","        setTimeout(function () {","          process.exit();","        }, processTermTimeout);","      } else {","        process.exit();","      }","    }","  });","","  process.on('uncaughtException', function (err) {","    handleError(true, err);","  });","}",""],"l":{"1":1,"2":1,"3":1,"4":1,"6":1,"8":1,"9":0,"12":1,"13":1,"14":1,"15":1,"17":1,"18":0,"19":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"38":1,"39":0,"40":0,"41":0,"43":0,"44":0,"47":0,"48":0,"49":0,"50":0,"52":0,"53":0,"54":0,"55":0,"57":0,"58":0,"59":0,"68":0,"69":0,"70":0,"73":0,"77":0,"78":0,"79":0,"89":0,"90":0,"92":0,"93":0,"94":0,"95":0,"100":0,"101":0,"102":0,"103":0,"106":0,"108":0,"111":0,"112":0,"114":0,"115":0,"116":0,"117":0,"119":0,"120":0,"123":0,"124":0,"126":0,"127":0,"128":0,"136":0,"137":0,"138":0,"145":0,"146":0,"151":0,"152":0,"153":0,"162":0,"163":0,"166":0,"167":0,"170":0,"172":0,"173":0,"174":0,"175":0,"178":0,"179":0,"182":0,"183":0,"186":0,"188":0,"189":0,"190":0,"191":0,"193":0,"196":0,"197":0,"198":0,"200":0,"201":0,"202":0,"204":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"213":0,"214":0,"217":0,"222":0,"223":0}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/sample/broker.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/sample/broker.js","s":{"1":2,"2":0,"3":0,"4":0,"5":0},"b":{"1":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":21},"end":{"line":3,"column":39}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":57}},"2":{"start":{"line":3,"column":0},"end":{"line":22,"column":2}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":48}},"4":{"start":{"line":12,"column":2},"end":{"line":21,"column":3}},"5":{"start":{"line":13,"column":4},"end":{"line":20,"column":7}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]}},"code":["var scClusterBrokerClient = require('scc-broker-client');","","module.exports.run = function (broker) {","  console.log('   >> Broker PID:', process.pid);","","  // This is defined in server.js (taken from environment variable SC_CLUSTER_STATE_SERVER_HOST).","  // If this property is defined, the broker will try to attach itself to the SC cluster for","  // automatic horizontal scalability.","  // This is mostly intended for the Kubernetes deployment of SocketCluster - In this case,","  // The clustering/sharding all happens automatically.","","  if (broker.options.clusterStateServerHost) {","    scClusterBrokerClient.attach(broker, {","      stateServerHost: broker.options.clusterStateServerHost,","      stateServerPort: broker.options.clusterStateServerPort,","      authKey: broker.options.clusterAuthKey,","      stateServerConnectTimeout: broker.options.clusterStateServerConnectTimeout,","      stateServerAckTimeout: broker.options.clusterStateServerAckTimeout,","      stateServerReconnectRandomness: broker.options.clusterStateServerReconnectRandomness","    });","  }","};",""],"l":{"1":2,"3":0,"4":0,"12":0,"13":0}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/sample/server.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/sample/server.js","s":{"1":2,"2":2,"3":2,"4":2,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0,0],"7":[0,0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":48,"loc":{"start":{"line":48,"column":12},"end":{"line":48,"column":24}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":54}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":59}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":43}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":82}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":82}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":78}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":43}},"9":{"start":{"line":11,"column":0},"end":{"line":32,"column":2}},"10":{"start":{"line":34,"column":0},"end":{"line":34,"column":26}},"11":{"start":{"line":36,"column":0},"end":{"line":38,"column":1}},"12":{"start":{"line":37,"column":2},"end":{"line":37,"column":72}},"13":{"start":{"line":40,"column":0},"end":{"line":44,"column":1}},"14":{"start":{"line":41,"column":2},"end":{"line":43,"column":3}},"15":{"start":{"line":42,"column":4},"end":{"line":42,"column":42}},"16":{"start":{"line":46,"column":0},"end":{"line":46,"column":82}},"17":{"start":{"line":48,"column":0},"end":{"line":66,"column":2}},"18":{"start":{"line":49,"column":2},"end":{"line":49,"column":49}},"19":{"start":{"line":51,"column":2},"end":{"line":54,"column":3}},"20":{"start":{"line":52,"column":4},"end":{"line":52,"column":57}},"21":{"start":{"line":53,"column":4},"end":{"line":53,"column":40}},"22":{"start":{"line":56,"column":2},"end":{"line":65,"column":3}},"23":{"start":{"line":60,"column":4},"end":{"line":60,"column":109}},"24":{"start":{"line":61,"column":4},"end":{"line":64,"column":7}},"25":{"start":{"line":68,"column":0},"end":{"line":68,"column":85}},"26":{"start":{"line":70,"column":0},"end":{"line":101,"column":1}},"27":{"start":{"line":72,"column":2},"end":{"line":89,"column":4}},"28":{"start":{"line":73,"column":4},"end":{"line":88,"column":7}},"29":{"start":{"line":74,"column":6},"end":{"line":77,"column":7}},"30":{"start":{"line":75,"column":8},"end":{"line":75,"column":18}},"31":{"start":{"line":76,"column":8},"end":{"line":76,"column":15}},"32":{"start":{"line":78,"column":6},"end":{"line":86,"column":8}},"33":{"start":{"line":79,"column":8},"end":{"line":85,"column":11}},"34":{"start":{"line":80,"column":10},"end":{"line":84,"column":11}},"35":{"start":{"line":81,"column":12},"end":{"line":81,"column":22}},"36":{"start":{"line":83,"column":12},"end":{"line":83,"column":56}},"37":{"start":{"line":87,"column":6},"end":{"line":87,"column":21}},"38":{"start":{"line":90,"column":2},"end":{"line":95,"column":4}},"39":{"start":{"line":96,"column":2},"end":{"line":98,"column":5}},"40":{"start":{"line":97,"column":4},"end":{"line":97,"column":12}},"41":{"start":{"line":100,"column":2},"end":{"line":100,"column":10}}},"branchMap":{"1":{"line":6,"type":"binary-expr","locations":[{"start":{"line":6,"column":27},"end":{"line":6,"column":34}},{"start":{"line":6,"column":38},"end":{"line":6,"column":81}}]},"2":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":27},"end":{"line":7,"column":34}},{"start":{"line":7,"column":38},"end":{"line":7,"column":81}}]},"3":{"line":8,"type":"binary-expr","locations":[{"start":{"line":8,"column":25},"end":{"line":8,"column":32}},{"start":{"line":8,"column":36},"end":{"line":8,"column":77}}]},"4":{"line":9,"type":"binary-expr","locations":[{"start":{"line":9,"column":18},"end":{"line":9,"column":33}},{"start":{"line":9,"column":37},"end":{"line":9,"column":42}}]},"5":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":11},"end":{"line":12,"column":25}},{"start":{"line":12,"column":29},"end":{"line":12,"column":70}},{"start":{"line":12,"column":74},"end":{"line":12,"column":75}}]},"6":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":11},"end":{"line":13,"column":25}},{"start":{"line":13,"column":29},"end":{"line":13,"column":70}},{"start":{"line":13,"column":74},"end":{"line":13,"column":75}}]},"7":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":8},"end":{"line":14,"column":22}},{"start":{"line":14,"column":26},"end":{"line":14,"column":64}},{"start":{"line":14,"column":68},"end":{"line":14,"column":72}}]},"8":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":12},"end":{"line":16,"column":47}},{"start":{"line":16,"column":51},"end":{"line":16,"column":56}}]},"9":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":11},"end":{"line":17,"column":17}},{"start":{"line":17,"column":21},"end":{"line":17,"column":55}},{"start":{"line":17,"column":59},"end":{"line":17,"column":63}}]},"10":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":40}},{"start":{"line":18,"column":44},"end":{"line":18,"column":68}}]},"11":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":20},"end":{"line":19,"column":40}},{"start":{"line":19,"column":44},"end":{"line":19,"column":68}}]},"12":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":18},"end":{"line":20,"column":36}},{"start":{"line":20,"column":40},"end":{"line":20,"column":44}}]},"13":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":22},"end":{"line":21,"column":76}},{"start":{"line":21,"column":80},"end":{"line":21,"column":84}}]},"14":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":26},"end":{"line":22,"column":35}},{"start":{"line":22,"column":39},"end":{"line":22,"column":72}},{"start":{"line":22,"column":76},"end":{"line":22,"column":80}}]},"15":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":26},"end":{"line":23,"column":59}},{"start":{"line":23,"column":63},"end":{"line":23,"column":67}}]},"16":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":18},"end":{"line":24,"column":42}},{"start":{"line":24,"column":46},"end":{"line":24,"column":50}}]},"17":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":36},"end":{"line":25,"column":88}},{"start":{"line":25,"column":92},"end":{"line":25,"column":96}}]},"18":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":32},"end":{"line":26,"column":80}},{"start":{"line":26,"column":84},"end":{"line":26,"column":88}}]},"19":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":41},"end":{"line":27,"column":98}},{"start":{"line":27,"column":102},"end":{"line":27,"column":106}}]},"20":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":0},"end":{"line":36,"column":0}},{"start":{"line":36,"column":0},"end":{"line":36,"column":0}}]},"21":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":2},"end":{"line":41,"column":2}},{"start":{"line":41,"column":2},"end":{"line":41,"column":2}}]},"22":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":27},"end":{"line":46,"column":34}},{"start":{"line":46,"column":38},"end":{"line":46,"column":81}}]},"23":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":2},"end":{"line":51,"column":2}},{"start":{"line":51,"column":2},"end":{"line":51,"column":2}}]},"24":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":2},"end":{"line":56,"column":2}},{"start":{"line":56,"column":2},"end":{"line":56,"column":2}}]},"25":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":24},"end":{"line":68,"column":77}},{"start":{"line":68,"column":81},"end":{"line":68,"column":84}}]},"26":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":0},"end":{"line":70,"column":0}},{"start":{"line":70,"column":0},"end":{"line":70,"column":0}}]},"27":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":6},"end":{"line":74,"column":6}},{"start":{"line":74,"column":6},"end":{"line":74,"column":6}}]},"28":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":10},"end":{"line":80,"column":10}},{"start":{"line":80,"column":10},"end":{"line":80,"column":10}}]}},"code":["var fs = require('fs');","var argv = require('minimist')(process.argv.slice(2));","var SocketCluster = require('socketcluster').SocketCluster;","var scHotReboot = require('sc-hot-reboot');","","var workerControllerPath = argv.wc || process.env.SOCKETCLUSTER_WORKER_CONTROLLER;","var brokerControllerPath = argv.bc || process.env.SOCKETCLUSTER_BROKER_CONTROLLER;","var initControllerPath = argv.ic || process.env.SOCKETCLUSTER_INIT_CONTROLLER;","var environment = process.env.ENV || 'dev';","","var options = {","  workers: Number(argv.w) || Number(process.env.SOCKETCLUSTER_WORKERS) || 1,","  brokers: Number(argv.b) || Number(process.env.SOCKETCLUSTER_BROKERS) || 1,","  port: Number(argv.p) || Number(process.env.SOCKETCLUSTER_PORT) || 8000,","  // If your system doesn't support 'uws', you can switch to 'ws' (which is slower but works on older systems).","  wsEngine: process.env.SOCKETCLUSTER_WS_ENGINE || 'uws',","  appName: argv.n || process.env.SOCKETCLUSTER_APP_NAME || null,","  workerController: workerControllerPath || __dirname + '/worker.js',","  brokerController: brokerControllerPath || __dirname + '/broker.js',","  initController: initControllerPath || null,","  socketChannelLimit: Number(process.env.SOCKETCLUSTER_SOCKET_CHANNEL_LIMIT) || 1000,","  clusterStateServerHost: argv.cssh || process.env.SCC_STATE_SERVER_HOST || null,","  clusterStateServerPort: process.env.SCC_STATE_SERVER_PORT || null,","  clusterAuthKey: process.env.SCC_AUTH_KEY || null,","  clusterStateServerConnectTimeout: Number(process.env.SCC_STATE_SERVER_CONNECT_TIMEOUT) || null,","  clusterStateServerAckTimeout: Number(process.env.SCC_STATE_SERVER_ACK_TIMEOUT) || null,","  clusterStateServerReconnectRandomness: Number(process.env.SCC_STATE_SERVER_RECONNECT_RANDOMNESS) || null,","  crashWorkerOnError: argv['auto-reboot'] != false,","  // If using nodemon, set this to true, and make sure that environment is 'dev'.","  killMasterOnSignal: false,","  environment: environment","};","","var SOCKETCLUSTER_OPTIONS;","","if (process.env.SOCKETCLUSTER_OPTIONS) {","  SOCKETCLUSTER_OPTIONS = JSON.parse(process.env.SOCKETCLUSTER_OPTIONS);","}","","for (var i in SOCKETCLUSTER_OPTIONS) {","  if (SOCKETCLUSTER_OPTIONS.hasOwnProperty(i)) {","    options[i] = SOCKETCLUSTER_OPTIONS[i];","  }","}","","var masterControllerPath = argv.mc || process.env.SOCKETCLUSTER_MASTER_CONTROLLER;","","var start = function () {","  var socketCluster = new SocketCluster(options);","","  if (masterControllerPath) {","    var masterController = require(masterControllerPath);","    masterController.run(socketCluster);","  }","","  if (environment == 'dev') {","    // This will cause SC workers to reboot when code changes anywhere in the app directory.","    // The second options argument here is passed directly to chokidar.","    // See https://github.com/paulmillr/chokidar#api for details.","    console.log(`   !! The sc-hot-reboot plugin is watching for code changes in the ${__dirname} directory`);","    scHotReboot.attach(socketCluster, {","      cwd: __dirname,","      ignored: ['public', 'node_modules', 'README.md', 'Dockerfile', 'server.js', 'broker.js', /[\\/\\\\]\\./, '*.log']","    });","  }","};","","var bootCheckInterval = Number(process.env.SOCKETCLUSTER_BOOT_CHECK_INTERVAL) || 200;","","if (workerControllerPath) {","  // Detect when Docker volumes are ready.","  var startWhenFileIsReady = (filePath) => {","    return new Promise((resolve) => {","      if (!filePath) {","        resolve();","        return;","      }","      var checkIsReady = () => {","        fs.exists(filePath, (exists) => {","          if (exists) {","            resolve();","          } else {","            setTimeout(checkIsReady, bootCheckInterval);","          }","        });","      };","      checkIsReady();","    });","  };","  var filesReadyPromises = [","    startWhenFileIsReady(masterControllerPath),","    startWhenFileIsReady(workerControllerPath),","    startWhenFileIsReady(brokerControllerPath),","    startWhenFileIsReady(initControllerPath)","  ];","  Promise.all(filesReadyPromises).then(() => {","    start();","  });","} else {","  start();","}",""],"l":{"1":2,"2":2,"3":2,"4":2,"6":0,"7":0,"8":0,"9":0,"11":0,"34":0,"36":0,"37":0,"40":0,"41":0,"42":0,"46":0,"48":0,"49":0,"51":0,"52":0,"53":0,"56":0,"60":0,"61":0,"68":0,"70":0,"72":0,"73":0,"74":0,"75":0,"76":0,"78":0,"79":0,"80":0,"81":0,"83":0,"87":0,"90":0,"96":0,"97":0,"100":0}},"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/sample/worker.js":{"path":"/home/travis/build/npmtest/node-npmtest-socketcluster/node_modules/socketcluster/sample/worker.js","s":{"1":2,"2":2,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":21},"end":{"line":8,"column":39}}},"2":{"name":"(anonymous_2)","line":34,"loc":{"start":{"line":34,"column":28},"end":{"line":34,"column":46}}},"3":{"name":"(anonymous_3)","line":39,"loc":{"start":{"line":39,"column":35},"end":{"line":39,"column":51}}},"4":{"name":"(anonymous_4)","line":45,"loc":{"start":{"line":45,"column":31},"end":{"line":45,"column":43}}},"5":{"name":"(anonymous_5)","line":51,"loc":{"start":{"line":51,"column":28},"end":{"line":51,"column":40}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":33}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":31}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":57}},"7":{"start":{"line":8,"column":0},"end":{"line":55,"column":2}},"8":{"start":{"line":9,"column":2},"end":{"line":9,"column":48}},"9":{"start":{"line":10,"column":2},"end":{"line":10,"column":47}},"10":{"start":{"line":12,"column":2},"end":{"line":12,"column":22}},"11":{"start":{"line":14,"column":2},"end":{"line":14,"column":37}},"12":{"start":{"line":15,"column":2},"end":{"line":15,"column":33}},"13":{"start":{"line":17,"column":2},"end":{"line":21,"column":3}},"14":{"start":{"line":20,"column":4},"end":{"line":20,"column":27}},"15":{"start":{"line":22,"column":2},"end":{"line":22,"column":58}},"16":{"start":{"line":25,"column":2},"end":{"line":25,"column":36}},"17":{"start":{"line":27,"column":2},"end":{"line":27,"column":32}},"18":{"start":{"line":29,"column":2},"end":{"line":29,"column":16}},"19":{"start":{"line":34,"column":2},"end":{"line":54,"column":5}},"20":{"start":{"line":39,"column":4},"end":{"line":43,"column":7}},"21":{"start":{"line":40,"column":6},"end":{"line":40,"column":14}},"22":{"start":{"line":41,"column":6},"end":{"line":41,"column":53}},"23":{"start":{"line":42,"column":6},"end":{"line":42,"column":49}},"24":{"start":{"line":45,"column":4},"end":{"line":49,"column":13}},"25":{"start":{"line":46,"column":6},"end":{"line":48,"column":9}},"26":{"start":{"line":51,"column":4},"end":{"line":53,"column":7}},"27":{"start":{"line":52,"column":6},"end":{"line":52,"column":30}}},"branchMap":{"1":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":17,"column":2}},{"start":{"line":17,"column":2},"end":{"line":17,"column":2}}]}},"code":["var fs = require('fs');","var express = require('express');","var serveStatic = require('serve-static');","var path = require('path');","var morgan = require('morgan');","var healthChecker = require('sc-framework-health-check');","","module.exports.run = function (worker) {","  console.log('   >> Worker PID:', process.pid);","  var environment = worker.options.environment;","","  var app = express();","","  var httpServer = worker.httpServer;","  var scServer = worker.scServer;","","  if (environment == 'dev') {","    // Log every HTTP request. See https://github.com/expressjs/morgan for other","    // available formats.","    app.use(morgan('dev'));","  }","  app.use(serveStatic(path.resolve(__dirname, 'public')));","","  // Add GET /health-check express route","  healthChecker.attach(worker, app);","","  httpServer.on('request', app);","","  var count = 0;","","  /*","    In here we handle our incoming realtime connections and listen for events.","  */","  scServer.on('connection', function (socket) {","","    // Some sample logic to show how to handle client events,","    // replace this with your own logic","","    socket.on('sampleClientEvent', function (data) {","      count++;","      console.log('Handled sampleClientEvent', data);","      scServer.exchange.publish('sample', count);","    });","","    var interval = setInterval(function () {","      socket.emit('rand', {","        rand: Math.floor(Math.random() * 5)","      });","    }, 1000);","","    socket.on('disconnect', function () {","      clearInterval(interval);","    });","  });","};",""],"l":{"1":2,"2":2,"3":0,"4":0,"5":0,"6":0,"8":0,"9":0,"10":0,"12":0,"14":0,"15":0,"17":0,"20":0,"22":0,"25":0,"27":0,"29":0,"34":0,"39":0,"40":0,"41":0,"42":0,"45":0,"46":0,"51":0,"52":0}}}